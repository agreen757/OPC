!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Megatron=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var RemoteForm=require("remote-form"),bean=require("bean"),notify=require("notify"),MegatronForm=module.exports=RemoteForm.extend({defaultMessages:{beforeSend:"Submitting...",success:"Success!",error:"Something went wrong."},messageFor:function(e){if(this.el.dataset[e])return this.el.dataset[e];var r=this.$("[data-ajax-event="+e+"]").innerHTML||this.$("script."+e).innerHTML;return r?r:this.defaultMessages[e]},beforeSend:function(){notify.progress(this.messageFor("beforeSend"))},success:function(){notify.success(this.messageFor("success"))},error:function(){notify.error(this.messageFor("error"))}});
},{"bean":10,"notify":27,"remote-form":39}],2:[function(require,module,exports){
function pageLoad(){utils.Toggler.listen(),utils.AutoNavigate.listen(),pageChange()}function pageChange(){utils.linkHeadings(),utils.toggleActiveNav(),utils.autoSizeTextarea(),utils.highlightCode(),utils.Toggler.refresh(),utils.autofocus(),utils.notifyFormFlash(),utils.TimeSwitch.setup(),utils.Timeago.setup()}function handleDialogTrigger(e){e.preventDefault(),new Dialog(e.currentTarget.dataset).show()}function toggleNavigationMode(e){e.target.blur(),utils.Classie.toggle(document.querySelector("body"),"active-nav")}function disableWith(e){var t=e.currentTarget.querySelectorAll("[data-disable-with]");Array.prototype.forEach.call(t,function(e){e.disabled=!0,utils.Classie.add(e,"disabled");var t=e.dataset.disableWith;t&&""!=t||(t=e.innerHTML),e.innerHTML=t.replace(/\.{3}/,"…")})}function handleRemoteFormSubmit(e){_.find(boundForms,function(t){return t==e.currentTarget})||(new Form({el:e.currentTarget}).submit(e),boundForms.push(e.currentTarget))}var utils=require("./utils"),bean=require("bean"),Dialog=require("dialog"),tap=require("tap-event"),Form=require("./form"),Link=require("./link"),_=require("lodash");if(module.exports={Dialog:Dialog,notify:require("notify"),utils:utils,Event:bean,Toggler:utils.Toggler,Form:Form,Link:Link,_:_},bean.on(document,"DOMContentLoaded",pageLoad),bean.on(document,"page:load",pageChange),bean.on(document,"click","[data-trigger=dialog]",handleDialogTrigger),bean.on(document,"click","[data-trigger=dialog]",tap(handleDialogTrigger)),bean.on(document,"click",".nav_toggle",toggleNavigationMode),!window.$||!$.rails){var boundForms=[];bean.on(document,"submit","form[data-remote]",handleRemoteFormSubmit),bean.on(document,"submit","form",disableWith),bean.on(document,"click","a[data-method], a[data-confirm], button[data-method], button[data-confirm]",Link.click)}
},{"./form":1,"./link":3,"./utils":5,"bean":10,"dialog":23,"lodash":48,"notify":27,"tap-event":46}],3:[function(require,module,exports){
function Link(){}var domify=require("domify"),Dialog=require("dialog"),bean=require("bean");module.exports=Link;var counter=0,DEFAULT_CONTINUE_BUTTON="Yes";Link.click=function(e){e.preventDefault();var t=e.currentTarget,n=null;if(t.dataset.method&&(n=Link.buildForm(t),document.body.appendChild(n)),t.dataset.confirm){var i={title:t.dataset.confirm,message:t.dataset.message||null,"continue":t.dataset.continue||DEFAULT_CONTINUE_BUTTON};t.dataset.method?(i.submit="#"+n.getAttribute("id"),"delete"===t.dataset.method.toLowerCase()&&(i.destructive=!0,i.continue=t.dataset.continue||"Delete")):i.follow=t.getAttribute("href"),new Dialog(i).show()}else n.submit()},Link.buildForm=function(e){var t=e.dataset.method||"post",n=document.querySelector("meta[name=csrf-token]"),i=document.querySelector("meta[name=csrf-param]"),a=domify('<form id="link-'+ ++counter+'" class="hidden" action="'+e.href+'" method="post"></form>');return a.appendChild(domify('<input name="_method" value="'+t+'" type="hidden">')),n&&i&&a.appendChild(domify('<input name="'+i.getAttribute("content")+'" value="'+n.getAttribute("content")+'" type="hidden" />')),a};
},{"bean":10,"dialog":23,"domify":47}],4:[function(require,module,exports){
var bean=require("bean"),classie=require("classie");require("compose-tap-event");var AutoNavigate={listen:function(){bean.on(document,"click",".auto-navigate",AutoNavigate.trigger)},trigger:function(e){var a=e.target;"a"!=a.tagName.toLowerCase()&&(link=e.currentTarget.querySelector("a.navigate"),e.metaKey?window.open(link):bean.fire(link,"click"))}};module.exports=AutoNavigate;
},{"bean":10,"classie":11,"compose-tap-event":46}],5:[function(require,module,exports){
var bean=require("bean"),CodeMirror=require("codemirror"),classie=require("classie"),Toggler=require("./toggler"),AutoNavigate=require("./auto-navigate"),Timeago=require("./time/timeago"),TimeSwitch=require("./time/time-switch"),notify=require("notify");require("codemirror/mode/htmlmixed/htmlmixed"),require("codemirror/mode/slim/slim"),require("codemirror/mode/javascript/javascript"),require("codemirror/mode/css/css"),require("codemirror/addon/runmode/runmode.js"),require("codemirror/addon/edit/matchbrackets.js"),module.exports={Timeago:Timeago,TimeSwitch:TimeSwitch,CodeMirror:CodeMirror,Classie:classie,Toggler:Toggler,AutoNavigate:AutoNavigate,toggleActiveNav:function(){Array.prototype.forEach.call(document.querySelectorAll("[data-match-url]"),function(e){var r=e.getAttribute("data-match-url");r&&new RegExp(e.getAttribute("data-match-url"),"i").test(location.pathname)&&(e.className+=" here")})},highlightCode:function(){for(var e,r=function(e){var r={markup:"htmlmixed",html:"htmlmixed",json:"javascript"};return r[e]||e},t=document.querySelectorAll('[class*="language-"], [class*="lang-"]'),a=0;e=t[a++];){var i=e.className.match(/lang.*?-(\S+)/)[1];classie.has(e,"language-"+i)&&(classie.remove(e,"language-"+i),classie.add(e,"lang-"+i));var o=e.textContent.trim(),c={};"json"==i&&(c.json=!0),CodeMirror.runMode(o,r(i),e,c),e.innerHTML="<code class='highlighted-code static-code cm-s-default'>"+e.innerHTML+"</code>",classie.add(e,"highlighted")}},linkHeadings:function(){var e=document.querySelectorAll("h2, h3, h4");for(i=0;i<e.length;i++){var r=e[i];""!=r.id&&(r.innerHTML="<a href='#"+r.id+"' class='heading-link'>"+r.innerHTML+"</a>",r.className=r.className+" linked_heading")}},autoSizeTextarea:function(){var e=function(e){var r=e.offsetHeight-e.clientHeight;e.style.height="auto",e.style.height=e.scrollHeight+r+"px"};Array.prototype.forEach.call(document.querySelectorAll("textarea"),e),bean.on(document.querySelector("body"),"keyup","textarea",function(r){e(r.currentTarget)})},notifyFormFlash:function(){var e=document.querySelector(".form-flash");if(e){var r=e.dataset.type||"error";"info"==r&&(r="action"),notify[r](e.textContent.trim()),classie.add(e,"hidden")}},autofocus:function(){var e=document.querySelector(".autofocus");e&&e.focus()}};
},{"./auto-navigate":4,"./time/time-switch":7,"./time/timeago":8,"./toggler":9,"bean":10,"classie":11,"codemirror":15,"codemirror/addon/edit/matchbrackets.js":13,"codemirror/addon/runmode/runmode.js":14,"codemirror/mode/css/css":16,"codemirror/mode/htmlmixed/htmlmixed":17,"codemirror/mode/javascript/javascript":18,"codemirror/mode/slim/slim":20,"notify":27}],6:[function(require,module,exports){
var dateToHtml=function(e,t){if(isNaN(new Date("2014-01-29T18:14:29+00:00").getDate()))return!1;var a=new Date(e),t=t||a.getTimezoneOffset()/-60;if("UTC"===t)var n=a.getUTCFullYear(),s=pad(a.getUTCMonth()+1),r=pad(a.getUTCDate()),p=pad(a.getUTCHours()),d=pad(a.getUTCMinutes()),g=pad(a.getUTCSeconds());else{var n=a.getFullYear(),s=pad(a.getMonth()+1),r=pad(a.getDate()),p=pad(a.getHours()),d=pad(a.getMinutes()),g=pad(a.getSeconds()),o=String(a).match(/\((.+)\)$/);if(o)var t=o[1];else{var t="GMT ";t+=t>0?"+":"",t+=" "+pad(100*t,4)}}return str='<span class="date">'+n+"-"+s+"-"+r+"</span>",str+=' <span class="time">'+p+":"+d+":"+g+"</span>",str+=' <span class="timezone">'+t+"</span>"},pad=function(e,t){for(t=t||2;String(e).length<t;)e="0"+e;return e};module.exports=dateToHtml;
},{}],7:[function(require,module,exports){
var timeago=require("./timeago"),dateToHtml=require("./date-to-html"),classie=require("classie"),bean=require("bean");require("compose-dataset-shim");var TimeSwitch={setup:function(){if(!timeago.browserSupport())return!1;this.listening||this.listen();var e=document.querySelectorAll(".time-switch[datetime]");Array.prototype.forEach.call(e,function(e){var t=e.getAttribute("datetime"),a=e.dataset.timeago,i=e.dataset.timeagoStyle;e.innerHTML=TimeSwitch.template(t,a,i),classie.add(e,"time-switch"),e.setAttribute("title","toggle timezones")})},listen:function(){bean.on(document,"click",".time-switch",TimeSwitch.toggle),this.listening=!0},toggle:function(){var e=document.querySelectorAll(".time-switch");Array.prototype.forEach.call(e,function(e){classie.toggle(e,"alt-zone")})},template:function(e,t,a){var i=dateToHtml(e,"UTC"),s=dateToHtml(e),n="";return"before"===t&&(n+=this.timeagoTemplate(e,t,a)),n+="<span class='utc'><span class='clock_line_icon'></span> ",n+=i+"</span>",n+="<span class='local'><span class='clock_fill_icon'></span> ",n+=s+"</span>","after"===t&&(n+=this.timeagoTemplate(e,t,a)),n},timeagoTemplate:function(e,t,a){var i=timeago.parse(e,a),s="<span class='dash'>&nbsp;-&nbsp;</span>",n="";return i?("after"===t&&(n+=s),n+="<span class='timeago'>"+i+"</span> "):""}};module.exports=TimeSwitch;
},{"./date-to-html":6,"./timeago":8,"bean":10,"classie":11,"compose-dataset-shim":22}],8:[function(require,module,exports){
Timeago={setup:function(){var e=document.querySelectorAll(".timeago[datetime]");Array.prototype.forEach.call(e,function(e){var a=e.attributes.datetime.value,o=e.dataset.timeagoStyle;e.innerHTML=Timeago.parse(a,o)})},browserSupport:function(){return!isNaN(new Date("2014-01-29T18:14:29+00:00").getDate())},parse:function(e,a){if(a=a||"normal","string"==typeof e&&(e=new Date(e)),"short"===a)var o={just_now:"now",minute_ago:"1m",minutes_ago:"m",hour_ago:"1h",hours_ago:"h",yesterday:"1d",days_ago:"d",last_week:"1w",weeks_ago:"w"};if("normal"===a)var o={just_now:"just now",minute_ago:"1 minute",minutes_ago:" minutes",hour_ago:"1 hour",hours_ago:" hours",yesterday:"1 day",days_ago:" days",last_week:"1 week",weeks_ago:" weeks"};if("long"===a)var o={just_now:"just now",minute_ago:"1 minute ago",minutes_ago:" minutes ago",hour_ago:"1 hour ago",hours_ago:" hours ago",yesterday:"1 day ago",days_ago:" days ago",last_week:"1 week ago",weeks_ago:" weeks ago"};{var t=((new Date).getTime()-new Date(e).getTime())/1e3,r=Math.floor(t/60),s=Math.floor(t/3600),u=Math.floor(t/86400),g=Math.floor(u/7);Math.floor(u/30)}return isNaN(t)||0>u?!1:0===u?60>t?o.just_now:120>t?o.minute_ago:3600>t?r+o.minutes_ago:7200>t?o.hour_ago:s+o.hours_ago:1===u?o.yesterday:7>u?u+o.days_ago:1===g?o.last_week:g+o.weeks_ago}},module.exports=Timeago;
},{}],9:[function(require,module,exports){
var bean=require("bean"),classie=require("classie");require("compose-tap-event"),require("compose-dataset-shim");var Toggler={listen:function(){bean.on(document,"click","[data-toggle], [data-show], [data-hide]",Toggler.trigger),bean.on(document,"change",".select-toggler",Toggler.trigger)},refresh:function(){Toggler.toggleRadios(),Toggler.toggleCheckboxes(),Toggler.setupSelects()},trigger:function(e){var t=e.currentTarget;"a"==t.tagName.toLowerCase()&&(console.log("yep"),e.preventDefault(),e.stop()),"radio"==t.type?Toggler.toggleRadios('input[name="'+t.name+'"]'):"checkbox"==t.type?Toggler.toggleCheckbox(t):"select"==t.tagName.toLowerCase()?Toggler.toggleSelect(t):(Toggler.dispatch(t,"toggle"),Toggler.dispatch(t,"show"),Toggler.dispatch(t,"hide"))},dispatch:function(e,t){e.dataset[t]&&Toggler.setState(e.dataset[t],t)},setState:function(e,t){var o=document.querySelectorAll(e);"boolean"==typeof t&&(t=t?"show":"hide"),Array.prototype.forEach.call(o,function(e){Toggler[t](e)})},toggle:function(e){null===e.offsetParent?Toggler.show(e):Toggler.hide(e)},show:function(e){classie.remove(e,"hidden"),classie.add(e,"visible");var t=e.querySelector("[data-focus]");t&&t.focus()},hide:function(e){classie.remove(e,"visible"),classie.add(e,"hidden")},toggleRadios:function(e){var e=e||"input[type=radio][data-show]";Array.prototype.forEach.call(document.querySelectorAll(e),function(e){Toggler.setState(e.dataset.show,e.checked)})},toggleCheckbox:function(e){Toggler.setState(e.dataset.toggle,"toggle"),Toggler.setState(e.dataset.show,e.checked),Toggler.setState(e.dataset.hide,!e.checked)},toggleSelect:function(e){var t=e.selectedOptions[0];Toggler.dispatch(t,"show"),Toggler.dispatch(t,"hide")},toggleCheckboxes:function(){var e="input[type=checkbox][data-toggle]";Array.prototype.forEach.call(document.querySelectorAll(e),Toggler.toggleCheckbox)},setupSelects:function(){Array.prototype.forEach.call(document.querySelectorAll("option[data-show]"),function(e){if(!e.dataset.hide){var t=Toggler.getSelectFromOption(e);classie.add(t,"select-toggler");var o=t.querySelectorAll("option"),r=Toggler.showAttributes(o);Array.prototype.forEach.call(o,function(){e.dataset.hide=r.filter(function(t){return e.dataset.show!=t&&""!=t}).join(",")}),Toggler.toggleSelect(t)}})},getSelectFromOption:function(e){var t=e.parentElement;return"select"==t.tagName.toLowerCase()?t:Toggler.getSelectFromOption(t)},showAttributes:function(e){return Array.prototype.map.call(e,function(e){return e.dataset.show})},toggleSelects:function(e){Array.prototype.forEach.call(document.querySelectorAll(radios),function(e){Toggler.setState(e.dataset.show,e.checked)})}};module.exports=Toggler;
},{"bean":10,"classie":11,"compose-dataset-shim":22,"compose-tap-event":46}],10:[function(require,module,exports){
!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):t[e]=n()}("bean",this,function(e,t){e=e||"bean",t=t||this;var n,r=window,o=t[e],a=/[^\.]*(?=\..*)\.|.*/,i=/\..*/,l="addEventListener",u="removeEventListener",c=document||{},s=c.documentElement||{},p=s[l],f=p?l:"attachEvent",h={},g=Array.prototype.slice,d=function(e,t){return e.split(t||" ")},m=function(e){return"string"==typeof e},v=function(e){return"function"==typeof e},y="click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll ",b="show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ",E=function(e,t,n){for(n=0;n<t.length;n++)t[n]&&(e[t[n]]=1);return e}({},d(y+(p?b:""))),w=function(){var e="compareDocumentPosition"in s?function(e,t){return t.compareDocumentPosition&&16===(16&t.compareDocumentPosition(e))}:"contains"in s?function(e,t){return t=9===t.nodeType||t===window?s:t,t!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},t=function(t){var n=t.relatedTarget;return n?n!==this&&"xul"!==n.prefix&&!/document/.test(this.toString())&&!e(n,this):null==n};return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),T=function(){var e=d("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),t=e.concat(d("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=t.concat(d("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),o=e.concat(d("char charCode key keyCode keyIdentifier keyLocation location")),a=e.concat(d("data")),i=e.concat(d("touches targetTouches changedTouches scale rotation")),l=e.concat(d("data origin source")),u=e.concat(d("state")),p=/over|out/,f=[{reg:/key/i,fix:function(e,t){return t.keyCode=e.keyCode||e.which,o}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,n,r){return n.rightClick=3===e.which||2===e.button,n.pos={x:0,y:0},e.pageX||e.pageY?(n.clientX=e.pageX,n.clientY=e.pageY):(e.clientX||e.clientY)&&(n.clientX=e.clientX+c.body.scrollLeft+s.scrollLeft,n.clientY=e.clientY+c.body.scrollTop+s.scrollTop),p.test(r)&&(n.relatedTarget=e.relatedTarget||e[("mouseover"==r?"from":"to")+"Element"]),t}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return a}},{reg:/^touch|^gesture/i,fix:function(){return i}},{reg:/^message$/i,fix:function(){return l}},{reg:/^popstate$/i,fix:function(){return u}},{reg:/.*/,fix:function(){return e}}],h={},g=function(e,t,n){if(arguments.length&&(e=e||((t.ownerDocument||t.document||t).parentWindow||r).event,this.originalEvent=e,this.isNative=n,this.isBean=!0,e)){var o,a,i,l,u,c=e.type,s=e.target||e.srcElement;if(this.target=s&&3===s.nodeType?s.parentNode:s,n){if(u=h[c],!u)for(o=0,a=f.length;a>o;o++)if(f[o].reg.test(c)){h[c]=u=f[o].fix;break}for(l=u(e,this,c),o=l.length;o--;)!((i=l[o])in this)&&i in e&&(this[i]=e[i])}}};return g.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},g.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},g.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},g.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},g.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},g.prototype.clone=function(e){var t=new g(this,this.element,this.isNative);return t.currentTarget=e,t},g}(),D=function(e,t){return p||t||e!==c&&e!==r?e:s},x=function(){var e=function(e,t,n,r){var o=function(n,o){return t.apply(e,r?g.call(o,n?0:1).concat(r):o)},a=function(n,r){return t.__beanDel?t.__beanDel.ft(n.target,e):r},i=n?function(e){var t=a(e,this);return n.apply(t,arguments)?(e&&(e.currentTarget=t),o(e,arguments)):void 0}:function(e){return t.__beanDel&&(e=e.clone(a(e))),o(e,arguments)};return i.__beanDel=t.__beanDel,i},t=function(t,n,r,o,a,i,l){var u,c=w[n];"unload"==n&&(r=S(I,t,n,r,o)),c&&(c.condition&&(r=e(t,r,c.condition,i)),n=c.base||n),this.isNative=u=E[n]&&!!t[f],this.customType=!p&&!u&&n,this.element=t,this.type=n,this.original=o,this.namespaces=a,this.eventType=p||u?n:"propertychange",this.target=D(t,u),this[f]=!!this.target[f],this.root=l,this.handler=e(t,r,null,i)};return t.prototype.inNamespaces=function(e){var t,n,r=0;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)e[t]==this.namespaces[n]&&r++;return e.length===r},t.prototype.matches=function(e,t,n){return!(this.element!==e||t&&this.original!==t||n&&this.handler!==n)},t}(),k=function(){var e={},t=function(n,r,o,a,i,l){var u=i?"r":"$";if(r&&"*"!=r){var c,s=0,p=e[u+r],f="*"==n;if(!p)return;for(c=p.length;c>s;s++)if((f||p[s].matches(n,o,a))&&!l(p[s],p,s,r))return}else for(var h in e)h.charAt(0)==u&&t(n,h.substr(1),o,a,i,l)},n=function(t,n,r,o){var a,i=e[(o?"r":"$")+n];if(i)for(a=i.length;a--;)if(!i[a].root&&i[a].matches(t,r,null))return!0;return!1},r=function(e,n,r,o){var a=[];return t(e,n,r,null,o,function(e){return a.push(e)}),a},o=function(t){var n=!t.root&&!this.has(t.element,t.type,null,!1),r=(t.root?"r":"$")+t.type;return(e[r]||(e[r]=[])).push(t),n},a=function(n){t(n.element,n.type,null,n.handler,n.root,function(t,n,r){return n.splice(r,1),t.removed=!0,0===n.length&&delete e[(t.root?"r":"$")+t.type],!1})},i=function(){var t,n=[];for(t in e)"$"==t.charAt(0)&&(n=n.concat(e[t]));return n};return{has:n,get:r,put:o,del:a,entries:i}}(),P=function(e){n=arguments.length?e:c.querySelectorAll?function(e,t){return t.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},_=function(e,t){if(p||!t||!e||e.propertyName=="_on"+t){var n=k.get(this,t||e.type,null,!1),r=n.length,o=0;for(e=new T(e,this,!0),t&&(e.type=t);r>o&&!e.isImmediatePropagationStopped();o++)n[o].removed||n[o].handler.call(this,e)}},N=p?function(e,t,n){e[n?l:u](t,_,!1)}:function(e,t,n,r){var o;n?(k.put(o=new x(e,r||t,function(t){_.call(e,t,r)},_,null,null,!0)),r&&null==e["_on"+r]&&(e["_on"+r]=0),o.target.attachEvent("on"+o.eventType,o.handler)):(o=k.get(e,r||t,_,!0)[0],o&&(o.target.detachEvent("on"+o.eventType,o.handler),k.del(o)))},S=function(e,t,n,r,o){return function(){r.apply(this,arguments),e(t,n,o)}},I=function(e,t,n,r){var o,a,l=t&&t.replace(i,""),u=k.get(e,l,null,!1),c={};for(o=0,a=u.length;a>o;o++)n&&u[o].original!==n||!u[o].inNamespaces(r)||(k.del(u[o]),!c[u[o].eventType]&&u[o][f]&&(c[u[o].eventType]={t:u[o].eventType,c:u[o].type}));for(o in c)k.has(e,c[o].t,null,!1)||N(e,c[o].t,!1,c[o].c)},X=function(e,t){var r=function(t,r){for(var o,a=m(e)?n(e,r):e;t&&t!==r;t=t.parentNode)for(o=a.length;o--;)if(a[o]===t)return t},o=function(e){var n=r(e.target,this);n&&t.apply(n,arguments)};return o.__beanDel={ft:r,selector:e},o},Y=p?function(e,t,n){var o=c.createEvent(e?"HTMLEvents":"UIEvents");o[e?"initEvent":"initUIEvent"](t,!0,!0,r,1),n.dispatchEvent(o)}:function(e,t,n){n=D(n,e),e?n.fireEvent("on"+t,c.createEventObject()):n["_on"+t]++},C=function(e,t,n){var r,o,l,u,c=m(t);if(c&&t.indexOf(" ")>0){for(t=d(t),u=t.length;u--;)C(e,t[u],n);return e}if(o=c&&t.replace(i,""),o&&w[o]&&(o=w[o].base),!t||c)(l=c&&t.replace(a,""))&&(l=d(l,".")),I(e,o,n,l);else if(v(t))I(e,null,t);else for(r in t)t.hasOwnProperty(r)&&C(e,r,t[r]);return e},L=function(e,t,r,o){var l,u,c,s,p,m,y;{if(void 0!==r||"object"!=typeof t){for(v(r)?(p=g.call(arguments,3),o=l=r):(l=o,p=g.call(arguments,4),o=X(r,l,n)),c=d(t),this===h&&(o=S(C,e,t,o,l)),s=c.length;s--;)y=k.put(m=new x(e,c[s].replace(i,""),o,l,d(c[s].replace(a,""),"."),p,!1)),m[f]&&y&&N(e,m.eventType,!0,m.customType);return e}for(u in t)t.hasOwnProperty(u)&&L.call(this,e,u,t[u])}},M=function(e,t,n,r){return L.apply(null,m(n)?[e,n,t,r].concat(arguments.length>3?g.call(arguments,5):[]):g.call(arguments))},O=function(){return L.apply(h,arguments)},$=function(e,t,n){var r,o,l,u,c,s=d(t);for(r=s.length;r--;)if(t=s[r].replace(i,""),(u=s[r].replace(a,""))&&(u=d(u,".")),u||n||!e[f])for(c=k.get(e,t,null,!1),n=[!1].concat(n),o=0,l=c.length;l>o;o++)c[o].inNamespaces(u)&&c[o].handler.apply(e,n);else Y(E[t],t,e);return e},A=function(e,t,n){for(var r,o,a=k.get(t,n,null,!1),i=a.length,l=0;i>l;l++)a[l].original&&(r=[e,a[l].type],(o=a[l].handler.__beanDel)&&r.push(o.selector),r.push(a[l].original),L.apply(null,r));return e},K={on:L,add:M,one:O,off:C,remove:C,clone:A,fire:$,Event:T,setSelectorEngine:P,noConflict:function(){return t[e]=o,this}};if(r.attachEvent){var B=function(){var e,t=k.entries();for(e in t)t[e].type&&"unload"!==t[e].type&&C(t[e].element,t[e].type);r.detachEvent("onunload",B),r.CollectGarbage&&r.CollectGarbage()};r.attachEvent("onunload",B)}return P(),K});
},{}],11:[function(require,module,exports){
module.exports=require("./lib/classie");
},{"./lib/classie":12}],12:[function(require,module,exports){
"use strict";function classReg(s){return new RegExp("(^|\\s+)"+s+"(\\s+|$)")}function toggleClass(s,a){var e=hasClass(s,a)?removeClass:addClass;e(s,a)}var hasClass,addClass,removeClass;"object"==typeof document&&"classList"in document.documentElement?(hasClass=function(s,a){return s.classList.contains(a)},addClass=function(s,a){s.classList.add(a)},removeClass=function(s,a){s.classList.remove(a)}):(hasClass=function(s,a){return classReg(a).test(s.className)},addClass=function(s,a){hasClass(s,a)||(s.className=s.className+" "+a)},removeClass=function(s,a){s.className=s.className.replace(classReg(a)," ")});var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=classie:define(classie),"object"==typeof window&&"object"==typeof window.document&&(window.classie=classie);
},{}],13:[function(require,module,exports){
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,i,r){var o=e.getLineHandle(t.line),l=t.ch-1,f=l>=0&&c[o.text.charAt(l)]||c[o.text.charAt(++l)];if(!f)return null;var u=">"==f.charAt(1)?1:-1;if(i&&u>0!=(l==t.ch))return null;var h=e.getTokenTypeAt(a(t.line,l+1)),s=n(e,a(t.line,l+(u>0?1:0)),u,h||null,r);return null==s?null:{from:a(t.line,l),to:s&&s.pos,match:s&&s.ch==f.charAt(0),forward:u>0}}function n(e,t,n,i,r){for(var o=r&&r.maxScanLineLength||1e4,l=r&&r.maxScanLines||1e3,f=[],u=r&&r.bracketRegex?r.bracketRegex:/[(){}[\]]/,h=n>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),s=t.line;s!=h;s+=n){var m=e.getLine(s);if(m){var d=n>0?0:m.length-1,g=n>0?m.length:-1;if(!(m.length>o))for(s==t.line&&(d=t.ch-(0>n?1:0));d!=g;d+=n){var p=m.charAt(d);if(u.test(p)&&(void 0===i||e.getTokenTypeAt(a(s,d+1))==i)){var v=c[p];if(">"==v.charAt(1)==n>0)f.push(p);else{if(!f.length)return{pos:a(s,d),ch:p};f.pop()}}}}}return s-n==(n>0?e.lastLine():e.firstLine())?!1:null}function i(e,n,i){for(var r=e.state.matchBrackets.maxHighlightLineLength||1e3,c=[],l=e.listSelections(),f=0;f<l.length;f++){var u=l[f].empty()&&t(e,l[f].head,!1,i);if(u&&e.getLine(u.from.line).length<=r){var h=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";c.push(e.markText(u.from,a(u.from.line,u.from.ch+1),{className:h})),u.to&&e.getLine(u.to.line).length<=r&&c.push(e.markText(u.to,a(u.to.line,u.to.ch+1),{className:h}))}}if(c.length){o&&e.state.focused&&e.display.input.focus();var s=function(){e.operation(function(){for(var e=0;e<c.length;e++)c[e].clear()})};if(!n)return s;setTimeout(s,800)}}function r(e){e.operation(function(){l&&(l(),l=null),l=i(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),a=e.Pos,c={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&t.off("cursorActivity",r),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",r))}),e.defineExtension("matchBrackets",function(){i(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,i){return t(this,e,n,i)}),e.defineExtension("scanForBracket",function(e,t,i,r){return n(this,e,t,i,r)})});
},{"../../lib/codemirror":15}],14:[function(require,module,exports){
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.runMode=function(t,n,r,o){var a=e.getMode(e.defaults,n),d=/MSIE \d/.test(navigator.userAgent),i=d&&(null==document.documentMode||document.documentMode<9);if(1==r.nodeType){var c=o&&o.tabSize||e.defaults.tabSize,l=r,u=0;l.innerHTML="",r=function(e,t){if("\n"==e)return l.appendChild(document.createTextNode(i?"\r":e)),void(u=0);for(var n="",r=0;;){var o=e.indexOf("	",r);if(-1==o){n+=e.slice(r),u+=e.length-r;break}u+=o-r,n+=e.slice(r,o);var a=c-u%c;u+=a;for(var d=0;a>d;++d)n+=" ";r=o+1}if(t){var f=l.appendChild(document.createElement("span"));f.className="cm-"+t.replace(/ +/g," cm-"),f.appendChild(document.createTextNode(n))}else l.appendChild(document.createTextNode(n))}}for(var f=e.splitLines(t),s=o&&o.state||e.startState(a),m=0,p=f.length;p>m;++m){m&&r("\n");var v=new e.StringStream(f[m]);for(!v.string&&a.blankLine&&a.blankLine(s);!v.eol();){var b=a.token(v,s);r(v.current(),b,m,v.start,s),v.start=v.pos}}}});
},{"../../lib/codemirror":15}],15:[function(require,module,exports){
!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(r,n){if(!(this instanceof e))return new e(r,n);this.options=n=n?vo(n):{},vo(Dl,n,!1),p(n);var i=n.value;"string"==typeof i&&(i=new ns(i,n.mode)),this.doc=i;var o=this.display=new t(r,i);o.wrapper.CodeMirror=this,c(this),a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!cl&&kr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new ao},Jo&&11>el&&setTimeout(mo(Sr,this,!0),20),Hr(this),Oo(),Jt(this),this.curOp.forceUpdate=!0,Ni(this,i),n.autofocus&&!cl||ko()==o.input?setTimeout(mo(Zr,this),20):Qr(this);for(var l in Il)Il.hasOwnProperty(l)&&Il[l](this,n[l],El);w(this);for(var s=0;s<Fl.length;++s)Fl[s](this);tr(this)}function t(e,t){var r=this,n=r.input=xo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");tl?n.style.width="1000px":n.setAttribute("wrap","off"),ul&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),r.inputDiv=xo("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=xo("div",[xo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=xo("div",[xo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=xo("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=xo("div",null,"CodeMirror-gutter-filler"),r.lineDiv=xo("div",null,"CodeMirror-code"),r.selectionDiv=xo("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=xo("div",null,"CodeMirror-cursors"),r.measure=xo("div",null,"CodeMirror-measure"),r.lineMeasure=xo("div",null,"CodeMirror-measure"),r.lineSpace=xo("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none"),r.mover=xo("div",[xo("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=xo("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=xo("div",null,null,"position: absolute; height: "+ds+"px; width: 1px;"),r.gutters=xo("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=xo("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=xo("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),Jo&&8>el&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),ul&&(n.style.width="0px"),tl||(r.scroller.draggable=!0),ll&&(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"),Jo&&8>el&&(r.scrollbarH.style.minHeight=r.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),r.viewFrom=r.viewTo=t.first,r.view=[],r.externalMeasured=null,r.viewOffset=0,r.lastSizeC=0,r.updateLineNumbers=null,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new ao,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null}function r(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Ct(e,100),e.state.modeGen++,e.curOp&&pr(e)}function i(e){e.options.lineWrapping?(Ho(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(To(e.display.wrapper,"CodeMirror-wrap"),d(e)),l(e),pr(e),Bt(e),setTimeout(function(){m(e)},100)}function o(e){var t=Zt(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/Qt(e.display)-3);return function(i){if(ri(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function l(e){var t=e.doc,r=o(e);t.iter(function(e){var t=r(e);t!=e.height&&Di(e,t)})}function s(e){var t=Kl[e.options.keyMap],r=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(r?" cm-keymap-"+r:"")}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bt(e)}function u(e){c(e),pr(e),setTimeout(function(){b(e)},20)}function c(e){var t=e.display.gutters,r=e.options.gutters;Co(t);for(var n=0;n<r.length;++n){var i=r[n],o=t.appendChild(xo("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",f(e)}function f(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function h(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=$n(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=qn(n);){var i=t.find(0,!0);r-=n.text.length-i.from.ch,n=i.to.line,r+=n.text.length-i.to.ch}return r}function d(e){var t=e.display,r=e.doc;t.maxLine=Ai(r,r.first),t.maxLineLength=h(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=h(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function p(e){var t=ho(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function g(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<ds-3}function v(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:g(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Tt(e.display))}}function m(e,t){t||(t=v(e));var r=e.display,n=Do(r.measure),i=t.docHeight+ds,o=t.scrollWidth>t.clientWidth;o&&t.scrollWidth<=t.clientWidth+1&&n>0&&!t.hScrollbarTakesSpace&&(o=!1);var l=i>t.clientHeight;if(l?(r.scrollbarV.style.display="block",r.scrollbarV.style.bottom=o?n+"px":"0",r.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||r.scrollbarV.clientHeight))+"px"):(r.scrollbarV.style.display="",r.scrollbarV.firstChild.style.height="0"),o?(r.scrollbarH.style.display="block",r.scrollbarH.style.right=l?n+"px":"0",r.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||r.scrollbarH.clientWidth)+"px"):(r.scrollbarH.style.display="",r.scrollbarH.firstChild.style.width="0"),o&&l?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=r.scrollbarFiller.style.width=n+"px"):r.scrollbarFiller.style.display="",o&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n+"px",r.gutterFiller.style.width=r.gutters.offsetWidth+"px"):r.gutterFiller.style.display="",!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(0===n){var s=fl&&!sl?"12px":"18px";r.scrollbarV.style.minWidth=r.scrollbarH.style.minHeight=s;var a=function(t){eo(t)!=r.scrollbarV&&eo(t)!=r.scrollbarH&&ur(e,Wr)(t)};us(r.scrollbarV,"mousedown",a),us(r.scrollbarH,"mousedown",a)}e.state.checkedOverlayScrollbar=!0}}function y(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Mt(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=Ei(t,n),l=Ei(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;if(o>s)return{from:s,to:Ei(t,Pi(Ai(t,s))+e.wrapper.clientHeight)};if(Math.min(a,t.lastLine())>=l)return{from:Ei(t,Pi(Ai(t,a))-e.wrapper.clientHeight),to:a}}return{from:o,to:Math.max(l,o+1)}}function b(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=C(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&r[l].gutter&&(r[l].gutter.style.left=o);var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function w(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=x(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(xo("div",[xo("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",f(e),!0}return!1}function x(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function C(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function L(e,t,r){var n=e.display;this.viewport=t,this.visible=y(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.oldViewFrom=n.viewFrom,this.oldViewTo=n.viewTo,this.oldScrollerWidth=n.scroller.clientWidth,this.force=r,this.dims=O(e)}function S(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return vr(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&0==wr(e))return!1;w(e)&&(vr(e),t.dims=O(e));var i=n.first+n.size,o=Math.max(t.visible.from-e.options.viewportMargin,n.first),l=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(i,r.viewTo)),ml&&(o=ei(e.doc,o),l=ti(e.doc,l));var s=o!=r.viewFrom||l!=r.viewTo||r.lastSizeC!=t.wrapperHeight;br(e,o,l),r.viewOffset=Pi(Ai(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var a=wr(e);if(!s&&0==a&&!t.force&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var u=ko();return a>4&&(r.lineDiv.style.display="none"),W(e,r.updateLineNumbers,t.dims),a>4&&(r.lineDiv.style.display=""),u&&ko()!=u&&u.offsetHeight&&u.focus(),Co(r.cursorDiv),Co(r.selectionDiv),s&&(r.lastSizeC=t.wrapperHeight,Ct(e,400)),r.updateLineNumbers=null,!0}function k(e,t){for(var r=t.force,n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)r=!0;else if(r=!1,n&&null!=n.top&&(n={top:Math.min(e.doc.height+Tt(e.display)-ds-e.display.scroller.clientHeight,n.top)}),t.visible=y(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!S(e,t))break;N(e);var o=v(e);yt(e),T(e,o),m(e,o)}ro(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&ro(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function M(e,t){var r=new L(e,t);if(S(e,r)){N(e),k(e,r);var n=v(e);yt(e),T(e,n),m(e,n)}}function T(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=Math.max(t.docHeight,t.clientHeight-ds)+"px"}function H(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function N(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i,o=t.view[n];if(!o.hidden){if(Jo&&8>el){var l=o.node.offsetTop+o.node.offsetHeight;i=l-r,r=l}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var a=o.line.height-i;if(2>i&&(i=Zt(t)),(a>.001||-.001>a)&&(Di(o.line,i),A(o.line),o.rest))for(var u=0;u<o.rest.length;u++)A(o.rest[u])}}}function A(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function O(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)r[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[l]]=o.clientWidth;return{fixedPos:C(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function W(e,t,r){function n(t){var r=t.nextSibling;return tl&&fl&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var i=e.display,o=e.options.lineNumbers,l=i.lineDiv,s=l.firstChild,a=i.view,u=i.viewFrom,c=0;c<a.length;c++){var f=a[c];if(f.hidden);else if(f.node){for(;s!=f.node;)s=n(s);var h=o&&null!=t&&u>=t&&f.lineNumber;f.changes&&(ho(f.changes,"gutter")>-1&&(h=!1),D(e,f,u,r)),h&&(Co(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(x(e.options,u)))),s=f.node.nextSibling}else{var d=G(e,f,u,r);l.insertBefore(d,s)}u+=f.size}for(;s;)s=n(s)}function D(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?z(e,t):"gutter"==o?F(e,t,r,n):"class"==o?R(t):"widget"==o&&B(t,n)}t.changes=null}function I(e){return e.node==e.text&&(e.node=xo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Jo&&8>el&&(e.node.style.zIndex=2)),e.node}function E(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var r=I(e);e.background=r.insertBefore(xo("div",null,t),r.firstChild)}}function P(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):mi(e,t)}function z(e,t){var r=t.text.className,n=P(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,R(t)):r&&(t.text.className=r)}function R(e){E(e),e.line.wrapClass?I(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function F(e,t,r,n){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var o=I(t),l=t.gutter=o.insertBefore(xo("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),t.text);if(!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(xo("div",x(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<e.options.gutters.length;++s){var a=e.options.gutters[s],u=i.hasOwnProperty(a)&&i[a];u&&l.appendChild(xo("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[a]+"px; width: "+n.gutterWidth[a]+"px"))}}}function B(e,t){e.alignable&&(e.alignable=null);for(var r,n=e.node.firstChild;n;n=r){var r=n.nextSibling;"CodeMirror-linewidget"==n.className&&e.node.removeChild(n)}V(e,t)}function G(e,t,r,n){var i=P(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),R(t),F(e,t,r,n),V(t,n),t.node}function V(e,t){if(U(e.line,e,t,!0),e.rest)for(var r=0;r<e.rest.length;r++)U(e.rest[r],e,t,!1)}function U(e,t,r,n){if(e.widgets)for(var i=I(t),o=0,l=e.widgets;o<l.length;++o){var s=l[o],a=xo("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(a.ignoreEvents=!0),K(s,a,t,r),n&&s.above?i.insertBefore(a,t.gutter||t.text):i.appendChild(a),ro(s,"redraw")}}function K(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function X(e){return yl(e.line,e.ch)}function _(e,t){return bl(e,t)<0?t:e}function j(e,t){return bl(e,t)<0?e:t}function Y(e,t){this.ranges=e,this.primIndex=t}function $(e,t){this.anchor=e,this.head=t}function q(e,t){var r=e[t];e.sort(function(e,t){return bl(e.from(),t.from())}),t=ho(e,r);for(var n=1;n<e.length;n++){var i=e[n],o=e[n-1];if(bl(o.to(),i.from())>=0){var l=j(o.from(),i.from()),s=_(o.to(),i.to()),a=o.empty()?i.from()==i.head:o.from()==o.head;t>=n&&--t,e.splice(--n,2,new $(a?s:l,a?l:s))}}return new Y(e,t)}function Z(e,t){return new Y([new $(e,t||e)],0)}function Q(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function J(e,t){if(t.line<e.first)return yl(e.first,0);var r=e.first+e.size-1;return t.line>r?yl(r,Ai(e,r).text.length):et(t,Ai(e,t.line).text.length)}function et(e,t){var r=e.ch;return null==r||r>t?yl(e.line,t):0>r?yl(e.line,0):e}function tt(e,t){return t>=e.first&&t<e.first+e.size}function rt(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=J(e,t[n]);return r}function nt(e,t,r,n){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(n){var o=bl(r,i)<0;o!=bl(n,i)<0?(i=r,r=n):o!=bl(r,n)<0&&(r=n)}return new $(i,r)}return new $(n||r,r)}function it(e,t,r,n){ct(e,new Y([nt(e,e.sel.primary(),t,r)],0),n)}function ot(e,t,r){for(var n=[],i=0;i<e.sel.ranges.length;i++)n[i]=nt(e,e.sel.ranges[i],t[i],null);var o=q(n,e.sel.primIndex);ct(e,o,r)}function lt(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,ct(e,q(i,e.sel.primIndex),n)}function st(e,t,r,n){ct(e,Z(t,r),n)}function at(e,t){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new $(J(e,t[r].anchor),J(e,t[r].head))}};return fs(e,"beforeSelectionChange",e,r),e.cm&&fs(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?q(r.ranges,r.ranges.length-1):t}function ut(e,t,r){var n=e.history.done,i=fo(n);i&&i.ranges?(n[n.length-1]=t,ft(e,t,r)):ct(e,t,r)}function ct(e,t,r){ft(e,t,r),Ki(e,e.sel,e.cm?e.cm.curOp.id:0/0,r)}function ft(e,t,r){(lo(e,"beforeSelectionChange")||e.cm&&lo(e.cm,"beforeSelectionChange"))&&(t=at(e,t));var n=r&&r.bias||(bl(t.primary().head,e.sel.primary().head)<0?-1:1);ht(e,pt(e,t,n,!0)),r&&r.scroll===!1||!e.cm||bn(e.cm)}function ht(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,oo(e.cm)),ro(e,"cursorActivity",e))}function dt(e){ht(e,pt(e,e.sel,null,!1),gs)}function pt(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=gt(e,l.anchor,r,n),a=gt(e,l.head,r,n);(i||s!=l.anchor||a!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new $(s,a))}return i?q(i,t.primIndex):t}function gt(e,t,r,n){var i=!1,o=t,l=r||1;e.cantEdit=!1;e:for(;;){var s=Ai(e,o.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var u=s.markedSpans[a],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(n&&(fs(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!c.atomic)continue;var f=c.find(0>l?-1:1);if(0==bl(f,o)&&(f.ch+=l,f.ch<0?f=f.line>e.first?J(e,yl(f.line-1)):null:f.ch>s.text.length&&(f=f.line<e.first+e.size-1?yl(f.line+1,0):null),!f)){if(i)return n?(e.cantEdit=!0,yl(e.first,0)):gt(e,t,r,!0);i=!0,f=t,l=-l}o=f;continue e}}return o}}function vt(e){for(var t=e.display,r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++){var s=r.sel.ranges[l],a=s.empty();(a||e.options.showCursorWhenSelecting)&&bt(e,s,i),a||wt(e,s,o)}if(e.options.moveInputWithCursor){var u=_t(e,r.sel.primary().head,"div"),c=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,u.top+f.top-c.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,u.left+f.left-c.left))}return n}function mt(e,t){Lo(e.display.cursorDiv,t.cursors),Lo(e.display.selectionDiv,t.selection),null!=t.teTop&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function yt(e){mt(e,vt(e))}function bt(e,t,r){var n=_t(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(xo("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var o=r.appendChild(xo("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=n.other.left+"px",o.style.top=n.other.top+"px",o.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function wt(e,t,r){function n(e,t,r,n){0>t&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(xo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==r?c-e:r)+"px; height: "+(n-t)+"px"))}function i(t,r,i){function o(r,n){return Xt(e,yl(t,r),"div",f,n)}var s,a,f=Ai(l,t),h=f.text.length;return zo(zi(f),r||0,null==i?h:i,function(e,t,l){var f,d,p,g=o(e,"left");if(e==t)f=g,d=p=g.left;else{if(f=o(t-1,"right"),"rtl"==l){var v=g;g=f,f=v}d=g.left,p=f.right}null==r&&0==e&&(d=u),f.top-g.top>3&&(n(d,g.top,null,g.bottom),d=u,g.bottom<f.top&&n(d,g.bottom,null,f.top)),null==i&&t==h&&(p=c),(!s||g.top<s.top||g.top==s.top&&g.left<s.left)&&(s=g),(!a||f.bottom>a.bottom||f.bottom==a.bottom&&f.right>a.right)&&(a=f),u+1>d&&(d=u),n(d,f.top,p-d,f.bottom)}),{start:s,end:a}}var o=e.display,l=e.doc,s=document.createDocumentFragment(),a=Ht(e.display),u=a.left,c=o.lineSpace.offsetWidth-a.right,f=t.from(),h=t.to();if(f.line==h.line)i(f.line,f.ch,h.ch);else{var d=Ai(l,f.line),p=Ai(l,h.line),g=Qn(d)==Qn(p),v=i(f.line,f.ch,g?d.text.length+1:null).end,m=i(h.line,g?0:null,h.ch).start;g&&(v.top<m.top-2?(n(v.right,v.top,null,v.bottom),n(u,m.top,m.left,m.bottom)):n(v.right,v.top,m.left-v.right,v.bottom)),v.bottom<m.top&&n(u,v.bottom,null,m.top)}r.appendChild(s)}function xt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Ct(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,mo(Lt,e))}function Lt(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=Gl(t.mode,kt(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var l=o.styles,s=di(e,o,n,!0);o.styles=s.styles;var a=o.styleClasses,u=s.classes;u?o.styleClasses=u:a&&(o.styleClasses=null);for(var c=!l||l.length!=o.styles.length||a!=u&&(!a||!u||a.bgClass!=u.bgClass||a.textClass!=u.textClass),f=0;!c&&f<l.length;++f)c=l[f]!=o.styles[f];c&&i.push(t.frontier),o.stateAfter=Gl(t.mode,n)}else gi(e,o.text,n),o.stateAfter=t.frontier%5==0?Gl(t.mode,n):null;return++t.frontier,+new Date>r?(Ct(e,e.options.workDelay),!0):void 0}),i.length&&ar(e,function(){for(var t=0;t<i.length;t++)gr(e,i[t],"text")})}}function St(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=Ai(o,s-1);if(a.stateAfter&&(!r||s<=o.frontier))return s;var u=ys(a.text,null,e.options.tabSize);(null==i||n>u)&&(i=s-1,n=u)}return i}function kt(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return!0;var o=St(e,t,r),l=o>n.first&&Ai(n,o-1).stateAfter;return l=l?Gl(n.mode,l):Vl(n.mode),n.iter(o,t,function(r){gi(e,r.text,l);var s=o==t-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;r.stateAfter=s?Gl(n.mode,l):null,++o}),r&&(n.frontier=o),l}function Mt(e){return e.lineSpace.offsetTop}function Tt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ht(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Lo(e.measure,xo("pre","x")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Nt(e,t,r){var n=e.options.lineWrapping,i=n&&e.display.scroller.clientWidth;if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function At(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(Ii(e.rest[n])>r)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ot(e,t){t=Qn(t);var r=Ii(t),n=e.display.externalMeasured=new hr(e.doc,t,r);n.lineN=r;var i=n.built=mi(e,n);return n.text=i.pre,Lo(e.display.lineMeasure,i.pre),n}function Wt(e,t,r,n){return Et(e,It(e,t),r,n)}function Dt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[mr(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function It(e,t){var r=Ii(t),n=Dt(e,r);n&&!n.text?n=null:n&&n.changes&&D(e,n,r,O(e)),n||(n=Ot(e,t));var i=At(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Et(e,t,r,n,i){t.before&&(r=-1);var o,l=r+(n||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Nt(e,t.view,t.rect),t.hasHeights=!0),o=Pt(e,t,r,n),o.bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Pt(e,t,r,n){for(var i,o,l,s,a=t.map,u=0;u<a.length;u+=3){var c=a[u],f=a[u+1];if(c>r?(o=0,l=1,s="left"):f>r?(o=r-c,l=o+1):(u==a.length-3||r==f&&a[u+3]>r)&&(l=f-c,o=l-1,r>=f&&(s="right")),null!=o){if(i=a[u+2],c==f&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==o)for(;u&&a[u-2]==a[u-3]&&a[u-1].insertLeft;)i=a[(u-=3)+2],s="left";if("right"==n&&o==f-c)for(;u<a.length-3&&a[u+3]==a[u+4]&&!a[u+5].insertLeft;)i=a[(u+=3)+2],s="right";break}}var h;if(3==i.nodeType){for(var u=0;4>u;u++){for(;o&&wo(t.line.text.charAt(c+o));)--o;for(;f>c+l&&wo(t.line.text.charAt(c+l));)++l;if(Jo&&9>el&&0==o&&l==f-c)h=i.parentNode.getBoundingClientRect();else if(Jo&&e.options.lineWrapping){var d=xs(i,o,l).getClientRects();h=d.length?d["right"==n?d.length-1:0]:Ll}else h=xs(i,o,l).getBoundingClientRect()||Ll;if(h.left||h.right||0==o)break;l=o,o-=1,s="right"}Jo&&11>el&&(h=zt(e.display.measure,h))}else{o>0&&(s=n="right");var d;h=e.options.lineWrapping&&(d=i.getClientRects()).length>1?d["right"==n?d.length-1:0]:i.getBoundingClientRect()}if(Jo&&9>el&&!o&&(!h||!h.left&&!h.right)){var p=i.parentNode.getClientRects()[0];h=p?{left:p.left,right:p.left+Qt(e.display),top:p.top,bottom:p.bottom}:Ll}for(var g=h.top-t.rect.top,v=h.bottom-t.rect.top,m=(g+v)/2,y=t.view.measure.heights,u=0;u<y.length-1&&!(m<y[u]);u++);var b=u?y[u-1]:0,w=y[u],x={left:("right"==s?h.right:h.left)-t.rect.left,right:("left"==s?h.left:h.right)-t.rect.left,top:b,bottom:w};return h.left||h.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=g,x.rbottom=v),x}function zt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Po(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function Rt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Ft(e){e.display.externalMeasure=null,Co(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Rt(e.display.view[t])}function Bt(e){Ft(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Gt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Vt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ut(e,t,r,n){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var o=oi(t.widgets[i]);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=Pi(t);if("local"==n?l+=Mt(e.display):l-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:Vt());var a=s.left+("window"==n?0:Gt());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function Kt(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=Gt(),i-=Vt();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function Xt(e,t,r,n,i){return n||(n=Ai(e.doc,t.line)),Ut(e,n,Wt(e,n,t.ch,i),r)}function _t(e,t,r,n,i,o){function l(t,l){var s=Et(e,i,t,l?"right":"left",o);return l?s.left=s.right:s.right=s.left,Ut(e,n,s,r)}function s(e,t){var r=a[t],n=r.level%2;return e==Ro(r)&&t&&r.level<a[t-1].level?(r=a[--t],e=Fo(r)-(r.level%2?0:1),n=!0):e==Fo(r)&&t<a.length-1&&r.level<a[t+1].level&&(r=a[++t],e=Ro(r)-r.level%2,n=!1),n&&e==r.to&&e>r.from?l(e-1):l(e,n)}n=n||Ai(e.doc,t.line),i||(i=It(e,n));var a=zi(n),u=t.ch;if(!a)return l(u);var c=_o(a,u),f=s(u,c);return null!=Es&&(f.other=s(u,Es)),f}function jt(e,t){var r=0,t=J(e.doc,t);e.options.lineWrapping||(r=Qt(e.display)*t.ch);var n=Ai(e.doc,t.line),i=Pi(n)+Mt(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function Yt(e,t,r,n){var i=yl(e,t);return i.xRel=n,r&&(i.outside=!0),i}function $t(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,0>r)return Yt(n.first,0,!0,-1);var i=Ei(n,r),o=n.first+n.size-1;if(i>o)return Yt(n.first+n.size-1,Ai(n,o).text.length,!0,1);0>t&&(t=0);for(var l=Ai(n,i);;){var s=qt(e,l,i,t,r),a=qn(l),u=a&&a.find(0,!0);if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=Ii(l=u.to.line)}}function qt(e,t,r,n,i){function o(n){var i=_t(e,yl(r,n),"line",t,u);return s=!0,l>i.bottom?i.left-a:l<i.top?i.left+a:(s=!1,i.left)}var l=i-Pi(t),s=!1,a=2*e.display.wrapper.clientWidth,u=It(e,t),c=zi(t),f=t.text.length,h=Bo(t),d=Go(t),p=o(h),g=s,v=o(d),m=s;if(n>v)return Yt(r,d,m,1);for(;;){if(c?d==h||d==Yo(t,h,1):1>=d-h){for(var y=p>n||v-n>=n-p?h:d,b=n-(y==h?p:v);wo(t.text.charAt(y));)++y;var w=Yt(r,y,y==h?g:m,-1>b?-1:b>1?1:0);return w}var x=Math.ceil(f/2),C=h+x;if(c){C=h;for(var L=0;x>L;++L)C=Yo(t,C,1)}var S=o(C);S>n?(d=C,v=S,(m=s)&&(v+=1e3),f=x):(h=C,p=S,g=s,f-=x)}}function Zt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==wl){wl=xo("pre");for(var t=0;49>t;++t)wl.appendChild(document.createTextNode("x")),wl.appendChild(xo("br"));wl.appendChild(document.createTextNode("x"))}Lo(e.measure,wl);var r=wl.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),Co(e.measure),r||1}function Qt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=xo("span","xxxxxxxxxx"),r=xo("pre",[t]);Lo(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Jt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++kl},Sl?Sl.ops.push(e.curOp):e.curOp.ownsGroup=Sl={ops:[e.curOp],delayedCallbacks:[]}}function er(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r]();for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)}}while(r<t.length)}function tr(e){var t=e.curOp,r=t.ownsGroup;if(r)try{er(r)}finally{Sl=null;for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;rr(r)}}function rr(e){for(var t=e.ops,r=0;r<t.length;r++)nr(t[r]);for(var r=0;r<t.length;r++)ir(t[r]);for(var r=0;r<t.length;r++)or(t[r]);for(var r=0;r<t.length;r++)lr(t[r]);for(var r=0;r<t.length;r++)sr(t[r])}function nr(e){var t=e.cm,r=t.display;
e.updateMaxLine&&d(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new L(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function ir(e){e.updatedDisplay=e.mustUpdate&&S(e.cm,e.update)}function or(e){var t=e.cm,r=t.display;e.updatedDisplay&&N(t),e.barMeasure=v(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Wt(t,r.maxLine,r.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo+ds-r.scroller.clientWidth)),(e.updatedDisplay||e.selectionChanged)&&(e.newSelectionNodes=vt(t))}function lr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Gr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&mt(t,e.newSelectionNodes),e.updatedDisplay&&T(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&m(t,e.barMeasure),e.selectionChanged&&xt(t),t.state.focused&&e.updateInput&&Sr(t,e.typing)}function sr(e){var t=e.cm,r=t.display,n=t.doc;if(null!=e.adjustWidthTo&&Math.abs(e.barMeasure.scrollWidth-t.display.scroller.scrollWidth)>1&&m(t),e.updatedDisplay&&k(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&(r.scroller.scrollTop!=e.scrollTop||e.forceScroll)){var i=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=i}if(null!=e.scrollLeft&&(r.scroller.scrollLeft!=e.scrollLeft||e.forceScroll)){var o=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=o,b(t)}if(e.scrollToPos){var l=gn(t,J(n,e.scrollToPos.from),J(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&pn(t,l)}var s=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(s)for(var u=0;u<s.length;++u)s[u].lines.length||fs(s[u],"hide");if(a)for(var u=0;u<a.length;++u)a[u].lines.length&&fs(a[u],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&tl&&(t.options.lineWrapping&&H(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!g(t)&&m(t)),e.changeObjs&&fs(t,"changes",t,e.changeObjs)}function ar(e,t){if(e.curOp)return t();Jt(e);try{return t()}finally{tr(e)}}function ur(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Jt(e);try{return t.apply(e,arguments)}finally{tr(e)}}}function cr(e){return function(){if(this.curOp)return e.apply(this,arguments);Jt(this);try{return e.apply(this,arguments)}finally{tr(this)}}}function fr(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Jt(t);try{return e.apply(this,arguments)}finally{tr(t)}}}function hr(e,t,r){this.line=t,this.rest=Jn(t),this.size=this.rest?Ii(fo(this.rest))-r+1:1,this.node=this.text=null,this.hidden=ri(e,t)}function dr(e,t,r){for(var n,i=[],o=t;r>o;o=n){var l=new hr(e.doc,Ai(e.doc,o),o);n=o+l.size,i.push(l)}return i}function pr(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)ml&&ei(e.doc,t)<i.viewTo&&vr(e);else if(r<=i.viewFrom)ml&&ti(e.doc,r+n)>i.viewFrom?vr(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)vr(e);else if(t<=i.viewFrom){var o=yr(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):vr(e)}else if(r>=i.viewTo){var o=yr(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):vr(e)}else{var l=yr(e,t,t,-1),s=yr(e,r,r+n,1);l&&s?(i.view=i.view.slice(0,l.index).concat(dr(e,l.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):vr(e)}var a=i.externalMeasured;a&&(r<a.lineN?a.lineN+=n:t<a.lineN+a.size&&(i.externalMeasured=null))}function gr(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[mr(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);-1==ho(l,r)&&l.push(r)}}}function vr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function mr(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,0>t)return n}function yr(e,t,r,n){var i,o=mr(e,t),l=e.display.view;if(!ml||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=0,a=e.display.viewFrom;o>s;s++)a+=l[s].size;if(a!=t){if(n>0){if(o==l.length-1)return null;i=a+l[o].size-t,o++}else i=a-t;t+=i,r+=i}for(;ei(e.doc,r)!=r;){if(o==(0>n?0:l.length-1))return null;r+=n*l[o-(0>n?1:0)].size,o+=n}return{index:o,lineN:r}}function br(e,t,r){var n=e.display,i=n.view;0==i.length||t>=n.viewTo||r<=n.viewFrom?(n.view=dr(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=dr(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(mr(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(dr(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,mr(e,r)))),n.viewTo=r}function wr(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function xr(e){e.display.pollingFast||e.display.poll.set(e.options.pollInterval,function(){Lr(e),e.state.focused&&xr(e)})}function Cr(e){function t(){var n=Lr(e);n||r?(e.display.pollingFast=!1,xr(e)):(r=!0,e.display.poll.set(60,t))}var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,t)}function Lr(e){var t=e.display.input,r=e.display.prevInput,n=e.doc;if(!e.state.focused||Os(t)&&!r||Tr(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var i=t.value;if(i==r&&!e.somethingSelected())return!1;if(Jo&&el>=9&&e.display.inputHasSelection===i||fl&&/[\uf700-\uf7ff]/.test(i))return Sr(e),!1;var o=!e.curOp;o&&Jt(e),e.display.shift=!1,8203!=i.charCodeAt(0)||n.sel!=e.display.selForContextMenu||r||(r="​");for(var l=0,s=Math.min(r.length,i.length);s>l&&r.charCodeAt(l)==i.charCodeAt(l);)++l;var a=i.slice(l),u=As(a),c=null;e.state.pasteIncoming&&n.sel.ranges.length>1&&(Ml&&Ml.join("\n")==a?c=n.sel.ranges.length%Ml.length==0&&po(Ml,As):u.length==n.sel.ranges.length&&(c=po(u,function(e){return[e]})));for(var f=n.sel.ranges.length-1;f>=0;f--){var h=n.sel.ranges[f],d=h.from(),p=h.to();l<r.length?d=yl(d.line,d.ch-(r.length-l)):e.state.overwrite&&h.empty()&&!e.state.pasteIncoming&&(p=yl(p.line,Math.min(Ai(n,p.line).text.length,p.ch+fo(u).length)));var g=e.curOp.updateInput,v={from:d,to:p,text:c?c[f%c.length]:u,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};if(sn(e.doc,v),ro(e,"inputRead",e,v),a&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&h.head.ch<100&&(!f||n.sel.ranges[f-1].head.line!=h.head.line)){var m=e.getModeAt(h.head),y=Wl(v);if(m.electricChars){for(var b=0;b<m.electricChars.length;b++)if(a.indexOf(m.electricChars.charAt(b))>-1){xn(e,y.line,"smart");break}}else m.electricInput&&m.electricInput.test(Ai(n,y.line).text.slice(0,y.ch))&&xn(e,y.line,"smart")}}return bn(e),e.curOp.updateInput=g,e.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=i,o&&tr(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function Sr(e,t){var r,n,i=e.doc;if(e.somethingSelected()){e.display.prevInput="";var o=i.sel.primary();r=Ws&&(o.to().line-o.from().line>100||(n=e.getSelection()).length>1e3);var l=r?"-":n||e.getSelection();e.display.input.value=l,e.state.focused&&ws(e.display.input),Jo&&el>=9&&(e.display.inputHasSelection=l)}else t||(e.display.prevInput=e.display.input.value="",Jo&&el>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=r}function kr(e){"nocursor"==e.options.readOnly||cl&&ko()==e.display.input||e.display.input.focus()}function Mr(e){e.state.focused||(kr(e),Zr(e))}function Tr(e){return e.options.readOnly||e.doc.cantEdit}function Hr(e){function t(){e.state.focused&&setTimeout(mo(kr,e),0)}function r(t){io(e,t)||as(t)}function n(t){if(e.somethingSelected())Ml=e.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=Ml.join("\n"),ws(i.input));else{for(var r=[],n=[],o=0;o<e.doc.sel.ranges.length;o++){var l=e.doc.sel.ranges[o].head.line,s={anchor:yl(l,0),head:yl(l+1,0)};n.push(s),r.push(e.getRange(s.anchor,s.head))}"cut"==t.type?e.setSelections(n,null,gs):(i.prevInput="",i.input.value=r.join("\n"),ws(i.input)),Ml=r}"cut"==t.type&&(e.state.cutIncoming=!0)}var i=e.display;us(i.scroller,"mousedown",ur(e,Wr)),Jo&&11>el?us(i.scroller,"dblclick",ur(e,function(t){if(!io(e,t)){var r=Or(e,t);if(r&&!zr(e,t)&&!Ar(e.display,t)){ls(t);var n=e.findWordAt(r);it(e.doc,n.anchor,n.head)}}})):us(i.scroller,"dblclick",function(t){io(e,t)||ls(t)}),us(i.lineSpace,"selectstart",function(e){Ar(i,e)||ls(e)}),gl||us(i.scroller,"contextmenu",function(t){Jr(e,t)}),us(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Br(e,i.scroller.scrollTop),Gr(e,i.scroller.scrollLeft,!0),fs(e,"scroll",e))}),us(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&Br(e,i.scrollbarV.scrollTop)}),us(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&Gr(e,i.scrollbarH.scrollLeft)}),us(i.scroller,"mousewheel",function(t){Vr(e,t)}),us(i.scroller,"DOMMouseScroll",function(t){Vr(e,t)}),us(i.scrollbarH,"mousedown",t),us(i.scrollbarV,"mousedown",t),us(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),us(i.input,"keyup",function(t){$r.call(e,t)}),us(i.input,"input",function(){Jo&&el>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Cr(e)}),us(i.input,"keydown",ur(e,jr)),us(i.input,"keypress",ur(e,qr)),us(i.input,"focus",mo(Zr,e)),us(i.input,"blur",mo(Qr,e)),e.options.dragDrop&&(us(i.scroller,"dragstart",function(t){Fr(e,t)}),us(i.scroller,"dragenter",r),us(i.scroller,"dragover",r),us(i.scroller,"drop",ur(e,Rr))),us(i.scroller,"paste",function(t){Ar(i,t)||(e.state.pasteIncoming=!0,kr(e),Cr(e))}),us(i.input,"paste",function(){if(tl&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=i.input.selectionStart,r=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=r,i.input.selectionStart=t,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Cr(e)}),us(i.input,"cut",n),us(i.input,"copy",n),ll&&us(i.sizer,"mouseup",function(){ko()==i.input&&i.input.blur(),kr(e)})}function Nr(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function Ar(e,t){for(var r=eo(t);r!=e.wrapper;r=r.parentNode)if(!r||r.ignoreEvents||r.parentNode==e.sizer&&r!=e.mover)return!0}function Or(e,t,r,n){var i=e.display;if(!r){var o=eo(t);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var l,s,a=i.lineSpace.getBoundingClientRect();try{l=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var u,c=$t(e,l,s);if(n&&1==c.xRel&&(u=Ai(e.doc,c.line).text).length==c.ch){var f=ys(u,u.length,e.options.tabSize)-u.length;c=yl(c.line,Math.max(0,Math.round((l-Ht(e.display).left)/Qt(e.display))-f))}return c}function Wr(e){if(!io(this,e)){var t=this,r=t.display;if(r.shift=e.shiftKey,Ar(r,e))return void(tl||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100)));if(!zr(t,e)){var n=Or(t,e);switch(window.focus(),to(e)){case 1:n?Dr(t,e,n):eo(e)==r.scroller&&ls(e);break;case 2:tl&&(t.state.lastMiddleDown=+new Date),n&&it(t.doc,n),setTimeout(mo(kr,t),20),ls(e);break;case 3:gl&&Jr(t,e)}}}}function Dr(e,t,r){setTimeout(mo(Mr,e),0);var n,i=+new Date;Cl&&Cl.time>i-400&&0==bl(Cl.pos,r)?n="triple":xl&&xl.time>i-400&&0==bl(xl.pos,r)?(n="double",Cl={time:i,pos:r}):(n="single",xl={time:i,pos:r});var o=e.doc.sel,l=fl?t.metaKey:t.ctrlKey;e.options.dragDrop&&Ns&&!Tr(e)&&"single"==n&&o.contains(r)>-1&&o.somethingSelected()?Ir(e,t,r,l):Er(e,t,r,n,l)}function Ir(e,t,r,n){var i=e.display,o=ur(e,function(l){tl&&(i.scroller.draggable=!1),e.state.draggingText=!1,cs(document,"mouseup",o),cs(i.scroller,"drop",o),Math.abs(t.clientX-l.clientX)+Math.abs(t.clientY-l.clientY)<10&&(ls(l),n||it(e.doc,r),kr(e),Jo&&9==el&&setTimeout(function(){document.body.focus(),kr(e)},20))});tl&&(i.scroller.draggable=!0),e.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),us(document,"mouseup",o),us(i.scroller,"drop",o)}function Er(e,t,r,n,i){function o(t){if(0!=bl(g,t))if(g=t,"rect"==n){for(var i=[],o=e.options.tabSize,l=ys(Ai(u,r.line).text,r.ch,o),s=ys(Ai(u,t.line).text,t.ch,o),a=Math.min(l,s),d=Math.max(l,s),p=Math.min(r.line,t.line),v=Math.min(e.lastLine(),Math.max(r.line,t.line));v>=p;p++){var m=Ai(u,p).text,y=uo(m,a,o);a==d?i.push(new $(yl(p,y),yl(p,y))):m.length>y&&i.push(new $(yl(p,y),yl(p,uo(m,d,o))))}i.length||i.push(new $(r,r)),ct(u,q(h.ranges.slice(0,f).concat(i),f),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=c,w=b.anchor,x=t;if("single"!=n){if("double"==n)var C=e.findWordAt(t);else var C=new $(yl(t.line,0),J(u,yl(t.line+1,0)));bl(C.anchor,w)>0?(x=C.head,w=j(b.from(),C.anchor)):(x=C.anchor,w=_(b.to(),C.head))}var i=h.ranges.slice(0);i[f]=new $(J(u,w),x),ct(u,q(i,f),vs)}}function l(t){var r=++m,i=Or(e,t,!0,"rect"==n);if(i)if(0!=bl(i,g)){Mr(e),o(i);var s=y(a,u);(i.line>=s.to||i.line<s.from)&&setTimeout(ur(e,function(){m==r&&l(t)}),150)}else{var c=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;c&&setTimeout(ur(e,function(){m==r&&(a.scroller.scrollTop+=c,l(t))}),50)}}function s(t){m=1/0,ls(t),kr(e),cs(document,"mousemove",b),cs(document,"mouseup",w),u.history.lastSelOrigin=null}var a=e.display,u=e.doc;ls(t);var c,f,h=u.sel;if(i&&!t.shiftKey?(f=u.sel.contains(r),c=f>-1?u.sel.ranges[f]:new $(r,r)):c=u.sel.primary(),t.altKey)n="rect",i||(c=new $(r,r)),r=Or(e,t,!0,!0),f=-1;else if("double"==n){var d=e.findWordAt(r);c=e.display.shift||u.extend?nt(u,c,d.anchor,d.head):d}else if("triple"==n){var p=new $(yl(r.line,0),J(u,yl(r.line+1,0)));c=e.display.shift||u.extend?nt(u,c,p.anchor,p.head):p}else c=nt(u,c,r);i?f>-1?lt(u,f,c,vs):(f=u.sel.ranges.length,ct(u,q(u.sel.ranges.concat([c]),f),{scroll:!1,origin:"*mouse"})):(f=0,ct(u,new Y([c],0),vs),h=u.sel);var g=r,v=a.wrapper.getBoundingClientRect(),m=0,b=ur(e,function(e){to(e)?l(e):s(e)}),w=ur(e,s);us(document,"mousemove",b),us(document,"mouseup",w)}function Pr(e,t,r,n,i){try{var o=t.clientX,l=t.clientY}catch(t){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&ls(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(l>a.bottom||!lo(e,r))return Ji(t);l-=a.top-s.viewOffset;for(var u=0;u<e.options.gutters.length;++u){var c=s.gutters.childNodes[u];if(c&&c.getBoundingClientRect().right>=o){var f=Ei(e.doc,l),h=e.options.gutters[u];return i(e,r,e,f,h,t),Ji(t)}}}function zr(e,t){return Pr(e,t,"gutterClick",!0,ro)}function Rr(e){var t=this;if(!io(t,e)&&!Ar(t.display,e)){ls(e),Jo&&(Tl=+new Date);var r=Or(t,e,!0),n=e.dataTransfer.files;if(r&&!Tr(t))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){var s=new FileReader;s.onload=ur(t,function(){if(o[n]=s.result,++l==i){r=J(t.doc,r);var e={from:r,to:r,text:As(o.join("\n")),origin:"paste"};sn(t.doc,e),ut(t.doc,Z(r,Wl(e)))}}),s.readAsText(e)},a=0;i>a;++a)s(n[a],a);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(mo(kr,t),20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(fl?e.metaKey:e.ctrlKey))var u=t.listSelections();if(ft(t.doc,Z(r,r)),u)for(var a=0;a<u.length;++a)dn(t.doc,"",u[a].anchor,u[a].head,"drag");t.replaceSelection(o,"around","paste"),kr(t)}}catch(e){}}}}function Fr(e,t){if(Jo&&(!e.state.draggingText||+new Date-Tl<100))return void as(t);if(!io(e,t)&&!Ar(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!ol)){var r=xo("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",il&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),il&&r.parentNode.removeChild(r)}}function Br(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,qo||M(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbarV.scrollTop!=t&&(e.display.scrollbarV.scrollTop=t),qo&&M(e),Ct(e,100))}function Gr(e,t,r){(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,b(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t))}function Vr(e,t){var r=t.wheelDeltaX,n=t.wheelDeltaY;null==r&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta);var i=e.display,o=i.scroller;if(r&&o.scrollWidth>o.clientWidth||n&&o.scrollHeight>o.clientHeight){if(n&&fl&&tl)e:for(var l=t.target,s=i.view;l!=o;l=l.parentNode)for(var a=0;a<s.length;a++)if(s[a].node==l){e.display.currentWheelTarget=l;break e}if(r&&!qo&&!il&&null!=Nl)return n&&Br(e,Math.max(0,Math.min(o.scrollTop+n*Nl,o.scrollHeight-o.clientHeight))),Gr(e,Math.max(0,Math.min(o.scrollLeft+r*Nl,o.scrollWidth-o.clientWidth))),ls(t),void(i.wheelStartX=null);if(n&&null!=Nl){var u=n*Nl,c=e.doc.scrollTop,f=c+i.wrapper.clientHeight;0>u?c=Math.max(0,c+u-50):f=Math.min(e.doc.height,f+u+50),M(e,{top:c,bottom:f})}20>Hl&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=r,i.wheelDY=n,setTimeout(function(){if(null!=i.wheelStartX){var e=o.scrollLeft-i.wheelStartX,t=o.scrollTop-i.wheelStartY,r=t&&i.wheelDY&&t/i.wheelDY||e&&i.wheelDX&&e/i.wheelDX;i.wheelStartX=i.wheelStartY=null,r&&(Nl=(Nl*Hl+r)/(Hl+1),++Hl)}},200)):(i.wheelDX+=r,i.wheelDY+=n))}}function Ur(e,t,r){if("string"==typeof t&&(t=Ul[t],!t))return!1;e.display.pollingFast&&Lr(e)&&(e.display.pollingFast=!1);var n=e.display.shift,i=!1;try{Tr(e)&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=ps}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function Kr(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function Xr(e,t){var r=Tn(e.options.keyMap),n=r.auto;clearTimeout(Al),n&&!_l(t)&&(Al=setTimeout(function(){Tn(e.options.keyMap)==r&&(e.options.keyMap=n.call?n.call(null,e):n,s(e))},50));var i=jl(t,!0),o=!1;if(!i)return!1;var l=Kr(e);return o=t.shiftKey?Xl("Shift-"+i,l,function(t){return Ur(e,t,!0)})||Xl(i,l,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?Ur(e,t):void 0}):Xl(i,l,function(t){return Ur(e,t)}),o&&(ls(t),xt(e),ro(e,"keyHandled",e,i,t)),o}function _r(e,t,r){var n=Xl("'"+r+"'",Kr(e),function(t){return Ur(e,t,!0)});return n&&(ls(t),xt(e),ro(e,"keyHandled",e,"'"+r+"'",t)),n}function jr(e){var t=this;if(Mr(t),!io(t,e)){Jo&&11>el&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=Xr(t,e);il&&(Ol=n?r:null,!n&&88==r&&!Ws&&(fl?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||Yr(t)}}function Yr(e){function t(e){18!=e.keyCode&&e.altKey||(To(r,"CodeMirror-crosshair"),cs(document,"keyup",t),cs(document,"mouseover",t))}var r=e.display.lineDiv;Ho(r,"CodeMirror-crosshair"),us(document,"keyup",t),us(document,"mouseover",t)}function $r(e){16==e.keyCode&&(this.doc.sel.shift=!1),io(this,e)}function qr(e){var t=this;if(!(io(t,e)||e.ctrlKey&&!e.altKey||fl&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(il&&r==Ol)return Ol=null,void ls(e);if(!(il&&(!e.which||e.which<10)||ll)||!Xr(t,e)){var i=String.fromCharCode(null==n?r:n);_r(t,e,i)||(Jo&&el>=9&&(t.display.inputHasSelection=null),Cr(t))}}}function Zr(e){"nocursor"!=e.options.readOnly&&(e.state.focused||(fs(e,"focus",e),e.state.focused=!0,Ho(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(Sr(e),tl&&setTimeout(mo(Sr,e,!0),0))),xr(e),xt(e))}function Qr(e){e.state.focused&&(fs(e,"blur",e),e.state.focused=!1,To(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Jr(e,t){function r(){if(null!=i.input.selectionStart){var t=e.somethingSelected(),r=i.input.value="​"+(t?i.input.value:"");i.prevInput=t?"":"​",i.input.selectionStart=1,i.input.selectionEnd=r.length,i.selForContextMenu=e.doc.sel}}function n(){if(i.inputDiv.style.position="relative",i.input.style.cssText=a,Jo&&9>el&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=l),xr(e),null!=i.input.selectionStart){(!Jo||Jo&&9>el)&&r();var t=0,n=function(){i.selForContextMenu==e.doc.sel&&0==i.input.selectionStart?ur(e,Ul.selectAll)(e):t++<10?i.detectingSelectAll=setTimeout(n,500):Sr(e)};i.detectingSelectAll=setTimeout(n,200)}}if(!io(e,t,"contextmenu")){var i=e.display;if(!Ar(i,t)&&!en(e,t)){var o=Or(e,t),l=i.scroller.scrollTop;if(o&&!il){var s=e.options.resetSelectionOnContextMenu;s&&-1==e.doc.sel.contains(o)&&ur(e,ct)(e.doc,Z(o),gs);var a=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(Jo?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",tl)var u=window.scrollY;if(kr(e),tl&&window.scrollTo(null,u),Sr(e),e.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=e.doc.sel,clearTimeout(i.detectingSelectAll),Jo&&el>=9&&r(),gl){as(t);var c=function(){cs(window,"mouseup",c),setTimeout(n,20)};us(window,"mouseup",c)}else setTimeout(n,50)}}}}function en(e,t){return lo(e,"gutterContextMenu")?Pr(e,t,"gutterContextMenu",!1,fs):!1}function tn(e,t){if(bl(e,t.from)<0)return e;if(bl(e,t.to)<=0)return Wl(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Wl(t).ch-t.to.ch),yl(r,n)}function rn(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new $(tn(i.anchor,t),tn(i.head,t)))}return q(r,e.sel.primIndex)}function nn(e,t,r){return e.line==t.line?yl(r.line,e.ch-t.ch+r.ch):yl(r.line+(e.line-t.line),e.ch)}function on(e,t,r){for(var n=[],i=yl(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=nn(s.from,i,o),u=nn(Wl(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[l],f=bl(c.head,c.anchor)<0;n[l]=new $(f?u:a,f?a:u)}else n[l]=new $(a,a)}return new Y(n,e.sel.primIndex)}function ln(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return r&&(n.update=function(t,r,n,i){t&&(this.from=J(e,t)),r&&(this.to=J(e,r)),n&&(this.text=n),void 0!==i&&(this.origin=i)}),fs(e,"beforeChange",e,n),e.cm&&fs(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function sn(e,t,r){if(e.cm){if(!e.cm.curOp)return ur(e.cm,sn)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(lo(e,"beforeChange")||e.cm&&lo(e.cm,"beforeChange"))||(t=ln(e,t,!0))){var n=vl&&!r&&Vn(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)an(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text});else an(e,t)}}function an(e,t){if(1!=t.text.length||""!=t.text[0]||0!=bl(t.from,t.to)){var r=rn(e,t);Vi(e,t,r,e.cm?e.cm.curOp.id:0/0),fn(e,t,r,Fn(e,t));var n=[];Hi(e,function(e,r){r||-1!=ho(n,e.history)||(Qi(e.history,t),n.push(e.history)),fn(e,t,null,Fn(e,t))})}}function un(e,t,r){if(!e.cm||!e.cm.state.suppressEdits){for(var n,i=e.history,o=e.sel,l="undo"==t?i.done:i.undone,s="undo"==t?i.undone:i.done,a=0;a<l.length&&(n=l[a],r?!n.ranges||n.equals(e.sel):n.ranges);a++);if(a!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;n=l.pop(),n.ranges;){if(Xi(n,s),r&&!n.equals(e.sel))return void ct(e,n,{clearRedo:!1});o=n}var u=[];Xi(o,s),s.push({changes:u,generation:i.generation}),i.generation=n.generation||++i.maxGeneration;for(var c=lo(e,"beforeChange")||e.cm&&lo(e.cm,"beforeChange"),a=n.changes.length-1;a>=0;--a){var f=n.changes[a];if(f.origin=t,c&&!ln(e,f,!1))return void(l.length=0);u.push(Fi(e,f));var h=a?rn(e,f):fo(l);fn(e,f,h,Gn(e,f)),!a&&e.cm&&e.cm.scrollIntoView({from:f.from,to:Wl(f)});var d=[];Hi(e,function(e,t){t||-1!=ho(d,e.history)||(Qi(e.history,f),d.push(e.history)),fn(e,f,null,Gn(e,f))})}}}}function cn(e,t){if(0!=t&&(e.first+=t,e.sel=new Y(po(e.sel.ranges,function(e){return new $(yl(e.anchor.line+t,e.anchor.ch),yl(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){pr(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)gr(e.cm,n,"gutter")}}function fn(e,t,r,n){if(e.cm&&!e.cm.curOp)return ur(e.cm,fn)(e,t,r,n);if(t.to.line<e.first)return void cn(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);cn(e,i),t={from:yl(e.first,0),to:yl(t.to.line+i,t.to.ch),text:[fo(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:yl(o,Ai(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Oi(e,t.from,t.to),r||(r=rn(e,t)),e.cm?hn(e.cm,t,n):ki(e,t,n),ft(e,r,gs)}}function hn(e,t,r){var n=e.doc,i=e.display,l=t.from,s=t.to,a=!1,u=l.line;e.options.lineWrapping||(u=Ii(Qn(Ai(n,l.line))),n.iter(u,s.line+1,function(e){return e==i.maxLine?(a=!0,!0):void 0})),n.sel.contains(t.from,t.to)>-1&&oo(e),ki(n,t,r,o(e)),e.options.lineWrapping||(n.iter(u,l.line+t.text.length,function(e){var t=h(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,l.line),Ct(e,400);var c=t.text.length-(s.line-l.line)-1;l.line!=s.line||1!=t.text.length||Si(e.doc,t)?pr(e,l.line,s.line+1,c):gr(e,l.line,"text");var f=lo(e,"changes"),d=lo(e,"change");if(d||f){var p={from:l,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&ro(e,"change",e,p),f&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function dn(e,t,r,n,i){if(n||(n=r),bl(n,r)<0){var o=n;n=r,r=o}"string"==typeof t&&(t=As(t)),sn(e,{from:r,to:n,text:t,origin:i})}function pn(e,t){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!al){var o=xo("div","​",null,"position: absolute; top: "+(t.top-r.viewOffset-Mt(e.display))+"px; height: "+(t.bottom-t.top+ds)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}function gn(e,t,r,n){null==n&&(n=0);for(var i=0;5>i;i++){var o=!1,l=_t(e,t),s=r&&r!=t?_t(e,r):l,a=mn(e,Math.min(l.left,s.left),Math.min(l.top,s.top)-n,Math.max(l.left,s.left),Math.max(l.bottom,s.bottom)+n),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=a.scrollTop&&(Br(e,a.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(o=!0)),null!=a.scrollLeft&&(Gr(e,a.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(o=!0)),!o)return l}}function vn(e,t,r,n,i){var o=mn(e,t,r,n,i);null!=o.scrollTop&&Br(e,o.scrollTop),null!=o.scrollLeft&&Gr(e,o.scrollLeft)}function mn(e,t,r,n,i){var o=e.display,l=Zt(e.display);0>r&&(r=0);var s=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,a=o.scroller.clientHeight-ds,u={};i-r>a&&(i=r+a);var c=e.doc.height+Tt(o),f=l>r,h=i>c-l;if(s>r)u.scrollTop=f?0:r;else if(i>s+a){var d=Math.min(r,(h?c:i)-a);d!=s&&(u.scrollTop=d)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,g=o.scroller.clientWidth-ds-o.gutters.offsetWidth,v=n-t>g;return v&&(n=t+g),10>t?u.scrollLeft=0:p>t?u.scrollLeft=Math.max(0,t-(v?0:10)):n>g+p-3&&(u.scrollLeft=n+(v?0:10)-g),u}function yn(e,t,r){(null!=t||null!=r)&&wn(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=r&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+r)}function bn(e){wn(e);var t=e.getCursor(),r=t,n=t;e.options.lineWrapping||(r=t.ch?yl(t.line,t.ch-1):t,n=yl(t.line,t.ch+1)),e.curOp.scrollToPos={from:r,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function wn(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=jt(e,t.from),n=jt(e,t.to),i=mn(e,Math.min(r.left,n.left),Math.min(r.top,n.top)-t.margin,Math.max(r.right,n.right),Math.max(r.bottom,n.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function xn(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=kt(e,t):r="prev");var l=e.options.tabSize,s=Ai(o,t),a=ys(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&(u=o.mode.indent(i,s.text.slice(c.length),s.text),u==ps||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?ys(Ai(o,t-1).text,null,l):0:"add"==r?u=a+e.options.indentUnit:"subtract"==r?u=a-e.options.indentUnit:"number"==typeof r&&(u=a+r),u=Math.max(0,u);var f="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/l);d;--d)h+=l,f+="	";if(u>h&&(f+=co(u-h)),f!=c)dn(o,f,yl(t,0),yl(t,c.length),"+input");else for(var d=0;d<o.sel.ranges.length;d++){var p=o.sel.ranges[d];if(p.head.line==t&&p.head.ch<c.length){var h=yl(t,c.length);lt(o,d,new $(h,h));break}}s.stateAfter=null}function Cn(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=Ai(e,Q(e,t)):i=Ii(t),null==i?null:(n(o,i)&&e.cm&&gr(e.cm,i,r),o)}function Ln(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&bl(o.from,fo(n).to)<=0;){var l=n.pop();if(bl(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}ar(e,function(){for(var t=n.length-1;t>=0;t--)dn(e.doc,"",n[t].from,n[t].to,"+delete");bn(e)})}function Sn(e,t,r,n,i){function o(){var t=s+r;return t<e.first||t>=e.first+e.size?f=!1:(s=t,c=Ai(e,t))}function l(e){var t=(i?Yo:$o)(c,a,r,!0);if(null==t){if(e||!o())return f=!1;a=i?(0>r?Go:Bo)(c):0>r?c.text.length:0}else a=t;return!0}var s=t.line,a=t.ch,u=r,c=Ai(e,s),f=!0;if("char"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var h=null,d="group"==n,p=e.cm&&e.cm.getHelper(t,"wordChars"),g=!0;!(0>r)||l(!g);g=!1){var v=c.text.charAt(a)||"\n",m=yo(v,p)?"w":d&&"\n"==v?"n":!d||/\s/.test(v)?null:"p";if(!d||g||m||(m="s"),h&&h!=m){0>r&&(r=1,l());break}if(m&&(h=m),r>0&&!l(!g))break}var y=gt(e,yl(s,a),u,!0);return f||(y.hitSide=!0),y}function kn(e,t,r,n){var i,o=e.doc,l=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=t.top+r*(s-(0>r?1.5:.5)*Zt(e.display))}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;;){var a=$t(e,l,i);if(!a.outside)break;if(0>r?0>=i:i>=o.height){a.hitSide=!0;break}i+=5*r}return a}function Mn(t,r,n,i){e.defaults[t]=r,n&&(Il[t]=i?function(e,t,r){r!=El&&n(e,t,r)}:n)}function Tn(e){return"string"==typeof e?Kl[e]:e}function Hn(e,t,r,n,i){if(n&&n.shared)return Nn(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return ur(e.cm,Hn)(e,t,r,n,i);var o=new $l(e,i),l=bl(t,r);if(n&&vo(n,o,!1),l>0||0==l&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=xo("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Zn(e,t.line,t,r,o)||t.line!=r.line&&Zn(e,r.line,t,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");ml=!0}o.addToHistory&&Vi(e,{from:t,to:r,origin:"markText"},e.sel,0/0);var s,a=t.line,u=e.cm;if(e.iter(a,r.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&Qn(e)==u.display.maxLine&&(s=!0),o.collapsed&&a!=t.line&&Di(e,0),Pn(e,new Dn(o,a==t.line?t.ch:null,a==r.line?r.ch:null)),++a}),o.collapsed&&e.iter(t.line,r.line+1,function(t){ri(e,t)&&Di(t,0)}),o.clearOnEnter&&us(o,"beforeCursorEnter",function(){o.clear()
}),o.readOnly&&(vl=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ql,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)pr(u,t.line,r.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var c=t.line;c<=r.line;c++)gr(u,c,"text");o.atomic&&dt(u.doc),ro(u,"markerAdded",u,o)}return o}function Nn(e,t,r,n,i){n=vo(n),n.shared=!1;var o=[Hn(e,t,r,n,i)],l=o[0],s=n.widgetNode;return Hi(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(Hn(e,J(e,t),J(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=fo(o)}),new Zl(o,l)}function An(e){return e.findMarks(yl(e.first,0),e.clipPos(yl(e.lastLine())),function(e){return e.parent})}function On(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(bl(o,l)){var s=Hn(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function Wn(e){for(var t=0;t<e.length;t++){var r=e[t],n=[r.primary.doc];Hi(r.primary.doc,function(e){n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];-1==ho(n,o.doc)&&(o.parent=null,r.markers.splice(i--,1))}}}function Dn(e,t,r){this.marker=e,this.from=t,this.to=r}function In(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function En(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Pn(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function zn(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==l.type&&(!r||!o.marker.insertLeft)){var a=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Dn(l,o.from,a?null:o.to))}}return n}function Rn(e,t,r){if(e)for(var n,i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==l.type&&(!r||o.marker.insertLeft)){var a=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Dn(l,a?null:o.from-t,null==o.to?null:o.to-t))}}return n}function Fn(e,t){var r=tt(e,t.from.line)&&Ai(e,t.from.line).markedSpans,n=tt(e,t.to.line)&&Ai(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==bl(t.from,t.to),s=zn(r,i,l),a=Rn(n,o,l),u=1==t.text.length,c=fo(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var h=s[f];if(null==h.to){var d=In(a,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(a)for(var f=0;f<a.length;++f){var h=a[f];if(null!=h.to&&(h.to+=c),null==h.from){var d=In(s,h.marker);d||(h.from=c,u&&(s||(s=[])).push(h))}else h.from+=c,u&&(s||(s=[])).push(h)}s&&(s=Bn(s)),a&&a!=s&&(a=Bn(a));var p=[s];if(!u){var g,v=t.text.length-2;if(v>0&&s)for(var f=0;f<s.length;++f)null==s[f].to&&(g||(g=[])).push(new Dn(s[f].marker,null,null));for(var f=0;v>f;++f)p.push(g);p.push(a)}return p}function Bn(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Gn(e,t){var r=Yi(e,t),n=Fn(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function Vn(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=ho(n,r)||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(bl(u.to,s.from)<0||bl(u.from,s.to)>0)){var c=[a,1],f=bl(u.from,s.from),h=bl(u.to,s.to);(0>f||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(h>0||!l.inclusiveRight&&!h)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-1}}return i}function Un(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Kn(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Xn(e){return e.inclusiveLeft?-1:0}function _n(e){return e.inclusiveRight?1:0}function jn(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=bl(n.from,i.from)||Xn(e)-Xn(t);if(o)return-o;var l=bl(n.to,i.to)||_n(e)-_n(t);return l?l:t.id-e.id}function Yn(e,t){var r,n=ml&&e.markedSpans;if(n)for(var i,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!r||jn(r,i.marker)<0)&&(r=i.marker);return r}function $n(e){return Yn(e,!0)}function qn(e){return Yn(e,!1)}function Zn(e,t,r,n,i){var o=Ai(e,t),l=ml&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=bl(u.from,r)||Xn(a.marker)-Xn(i),f=bl(u.to,n)||_n(a.marker)-_n(i);if(!(c>=0&&0>=f||0>=c&&f>=0)&&(0>=c&&(bl(u.to,r)>0||a.marker.inclusiveRight&&i.inclusiveLeft)||c>=0&&(bl(u.from,n)<0||a.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function Qn(e){for(var t;t=$n(e);)e=t.find(-1,!0).line;return e}function Jn(e){for(var t,r;t=qn(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function ei(e,t){var r=Ai(e,t),n=Qn(r);return r==n?t:Ii(n)}function ti(e,t){if(t>e.lastLine())return t;var r,n=Ai(e,t);if(!ri(e,n))return t;for(;r=qn(n);)n=r.find(1,!0).line;return Ii(n)+1}function ri(e,t){var r=ml&&t.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if(n=r[i],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&ni(e,t,n))return!0}}function ni(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return ni(e,n.line,In(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&ni(e,t,i))return!0}function ii(e,t,r){Pi(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&yn(e,null,r)}function oi(e){if(null!=e.height)return e.height;if(!So(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),Lo(e.cm.display.measure,xo("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function li(e,t,r,n){var i=new Ql(e,r,n);return i.noHScroll&&(e.display.alignWidgets=!0),Cn(e.doc,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,!ri(e.doc,t)){var n=Pi(t)<e.doc.scrollTop;Di(t,t.height+oi(i)),n&&yn(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function si(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Un(e),Kn(e,r);var i=n?n(e):1;i!=e.height&&Di(e,i)}function ai(e){e.parent=null,Un(e)}function ui(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function ci(t,r){if(t.blankLine)return t.blankLine(r);if(t.innerMode){var n=e.innerMode(t,r);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function fi(e,t,r){for(var n=0;10>n;n++){var i=e.token(t,r);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function hi(t,r,n,i,o,l,s){var a=n.flattenSpans;null==a&&(a=t.options.flattenSpans);var u,c=0,f=null,h=new Yl(r,t.options.tabSize);for(""==r&&ui(ci(n,i),l);!h.eol();){if(h.pos>t.options.maxHighlightLength?(a=!1,s&&gi(t,r,i,h.pos),h.pos=r.length,u=null):u=ui(fi(n,h,i),l),t.options.addModeClass){var d=e.innerMode(n,i).mode.name;d&&(u="m-"+(u?d+" "+u:d))}a&&f==u||(c<h.start&&o(h.start,f),c=h.start,f=u),h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e4);o(p,f),c=p}}function di(e,t,r,n){var i=[e.state.modeGen],o={};hi(e,t.text,e.doc.mode,r,function(e,t){i.push(e,t)},o,n);for(var l=0;l<e.state.overlays.length;++l){var s=e.state.overlays[l],a=1,u=0;hi(e,t.text,s.mode,!0,function(e,t){for(var r=a;e>u;){var n=i[a];n>e&&i.splice(a,1,e,i[a+1],n),a+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,a-r,e,"cm-overlay "+t),a=r+2;else for(;a>r;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function pi(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=di(e,t,t.stateAfter=kt(e,Ii(t)));t.styles=r.styles,r.classes?t.styleClasses=r.classes:t.styleClasses&&(t.styleClasses=null)}return t.styles}function gi(e,t,r,n){var i=e.doc.mode,o=new Yl(t,e.options.tabSize);for(o.start=o.pos=n||0,""==t&&ci(i,r);!o.eol()&&o.pos<=e.options.maxHighlightLength;)fi(i,o,r),o.start=o.pos}function vi(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?ts:es;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function mi(e,t){var r=xo("span",null,null,tl?"padding-right: .1px":null),n={pre:xo("pre",[r]),content:r,col:0,pos:0,cm:e};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o,l=i?t.rest[i-1]:t.line;n.pos=0,n.addToken=bi,(Jo||tl)&&e.getOption("lineWrapping")&&(n.addToken=wi(n.addToken)),Eo(e.display.measure)&&(o=zi(l))&&(n.addToken=xi(n.addToken,o)),n.map=[],Li(l,n,pi(e,l)),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=No(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=No(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Io(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return fs(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=No(n.pre.className,n.textClass||"")),n}function yi(e){var t=xo("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function bi(e,t,r,n,i,o){if(t){var l=e.cm.options.specialChars,s=!1;if(l.test(t))for(var a=document.createDocumentFragment(),u=0;;){l.lastIndex=u;var c=l.exec(t),f=c?c.index-u:t.length-u;if(f){var h=document.createTextNode(t.slice(u,u+f));a.appendChild(Jo&&9>el?xo("span",[h]):h),e.map.push(e.pos,e.pos+f,h),e.col+=f,e.pos+=f}if(!c)break;if(u+=f+1,"	"==c[0]){var d=e.cm.options.tabSize,p=d-e.col%d,h=a.appendChild(xo("span",co(p),"cm-tab"));e.col+=p}else{var h=e.cm.options.specialCharPlaceholder(c[0]);a.appendChild(Jo&&9>el?xo("span",[h]):h),e.col+=1}e.map.push(e.pos,e.pos+1,h),e.pos++}else{e.col+=t.length;var a=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,a),Jo&&9>el&&(s=!0),e.pos+=t.length}if(r||n||i||s){var g=r||"";n&&(g+=n),i&&(g+=i);var v=xo("span",[a],g);return o&&(v.title=o),e.content.appendChild(v)}e.content.appendChild(a)}}function wi(e){function t(e){for(var t=" ",r=0;r<e.length-2;++r)t+=r%2?" ":" ";return t+=" "}return function(r,n,i,o,l,s){e(r,n.replace(/ {3,}/g,t),i,o,l,s)}}function xi(e,t){return function(r,n,i,o,l,s){i=i?i+" cm-force-border":"cm-force-border";for(var a=r.pos,u=a+n.length;;){for(var c=0;c<t.length;c++){var f=t[c];if(f.to>a&&f.from<=a)break}if(f.to>=u)return e(r,n,i,o,l,s);e(r,n.slice(0,f.to-a),i,o,null,s),o=null,n=n.slice(f.to-a),a=f.to}}}function Ci(e,t,r,n){var i=!n&&r.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function Li(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,f,h=i.length,d=0,p=1,g="",v=0;;){if(v==d){s=a=u=c="",f=null,v=1/0;for(var m=[],y=0;y<n.length;++y){var b=n[y],w=b.marker;b.from<=d&&(null==b.to||b.to>d)?(null!=b.to&&v>b.to&&(v=b.to,a=""),w.className&&(s+=" "+w.className),w.startStyle&&b.from==d&&(u+=" "+w.startStyle),w.endStyle&&b.to==v&&(a+=" "+w.endStyle),w.title&&!c&&(c=w.title),w.collapsed&&(!f||jn(f.marker,w)<0)&&(f=b)):b.from>d&&v>b.from&&(v=b.from),"bookmark"==w.type&&b.from==d&&w.widgetNode&&m.push(w)}if(f&&(f.from||0)==d&&(Ci(t,(null==f.to?h+1:f.to)-d,f.marker,null==f.from),null==f.to))return;if(!f&&m.length)for(var y=0;y<m.length;++y)Ci(t,0,m[y])}if(d>=h)break;for(var x=Math.min(h,v);;){if(g){var C=d+g.length;if(!f){var L=C>x?g.slice(0,x-d):g;t.addToken(t,L,l?l+s:s,u,d+L.length==v?a:"",c)}if(C>=x){g=g.slice(x-d),d=x;break}d=C,u=""}g=i.slice(o,o=r[p++]),l=vi(r[p++],t.cm.options)}}else for(var p=1;p<r.length;p+=2)t.addToken(t,i.slice(o,o=r[p]),vi(r[p+1],t.cm.options))}function Si(e,t){return 0==t.from.ch&&0==t.to.ch&&""==fo(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function ki(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){si(e,r,i,n),ro(e,"change",e,t)}var l=t.from,s=t.to,a=t.text,u=Ai(e,l.line),c=Ai(e,s.line),f=fo(a),h=i(a.length-1),d=s.line-l.line;if(Si(e,t)){for(var p=0,g=[];p<a.length-1;++p)g.push(new Jl(a[p],i(p),n));o(c,c.text,h),d&&e.remove(l.line,d),g.length&&e.insert(l.line,g)}else if(u==c)if(1==a.length)o(u,u.text.slice(0,l.ch)+f+u.text.slice(s.ch),h);else{for(var g=[],p=1;p<a.length-1;++p)g.push(new Jl(a[p],i(p),n));g.push(new Jl(f+u.text.slice(s.ch),h,n)),o(u,u.text.slice(0,l.ch)+a[0],i(0)),e.insert(l.line+1,g)}else if(1==a.length)o(u,u.text.slice(0,l.ch)+a[0]+c.text.slice(s.ch),i(0)),e.remove(l.line+1,d);else{o(u,u.text.slice(0,l.ch)+a[0],i(0)),o(c,f+c.text.slice(s.ch),h);for(var p=1,g=[];p<a.length-1;++p)g.push(new Jl(a[p],i(p),n));d>1&&e.remove(l.line+1,d-1),e.insert(l.line+1,g)}ro(e,"change",e,t)}function Mi(e){this.lines=e,this.parent=null;for(var t=0,r=0;t<e.length;++t)e[t].parent=this,r+=e[t].height;this.height=r}function Ti(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}function Hi(e,t,r){function n(e,i,o){if(e.linked)for(var l=0;l<e.linked.length;++l){var s=e.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;(!r||a)&&(t(s.doc,a),n(s.doc,e,a))}}}n(e,null,!0)}function Ni(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,l(e),r(e),e.options.lineWrapping||d(e),e.options.mode=t.modeOption,pr(e)}function Ai(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(o>t){r=i;break}t-=o}return r.lines[t]}function Oi(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function Wi(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function Di(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function Ii(e){if(null==e.parent)return null;for(var t=e.parent,r=ho(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function Ei(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(o>t){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var n=0;n<e.lines.length;++n){var l=e.lines[n],s=l.height;if(s>t)break;t-=s}return r+n}function Pi(e){e=Qn(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var n=0;n<o.children.length;++n){var l=o.children[n];if(l==r)break;t+=l.height}return t}function zi(e){var t=e.order;return null==t&&(t=e.order=Ps(e.text)),t}function Ri(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Fi(e,t){var r={from:X(t.from),to:Wl(t),text:Oi(e,t.from,t.to)};return _i(e,r,t.from.line,t.to.line+1),Hi(e,function(e){_i(e,r,t.from.line,t.to.line+1)},!0),r}function Bi(e){for(;e.length;){var t=fo(e);if(!t.ranges)break;e.pop()}}function Gi(e,t){return t?(Bi(e.done),fo(e.done)):e.done.length&&!fo(e.done).ranges?fo(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),fo(e.done)):void 0}function Vi(e,t,r,n){var i=e.history;i.undone.length=0;var o,l=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>l-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=Gi(i,i.lastOp==n))){var s=fo(o.changes);0==bl(t.from,t.to)&&0==bl(t.from,s.to)?s.to=Wl(t):o.changes.push(Fi(e,t))}else{var a=fo(i.done);for(a&&a.ranges||Xi(e.sel,i.done),o={changes:[Fi(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=l,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,s||fs(e,"historyAdded")}function Ui(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ki(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Ui(e,o,fo(i.done),t))?i.done[i.done.length-1]=t:Xi(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&n.clearRedo!==!1&&Bi(i.undone)}function Xi(e,t){var r=fo(t);r&&r.ranges&&r.equals(e)||t.push(e)}function _i(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function ji(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Yi(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=0,i=[];n<t.text.length;++n)i.push(ji(r[n]));return i}function $i(e,t,r){for(var n=0,i=[];n<e.length;++n){var o=e[n];if(o.ranges)i.push(r?Y.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];i.push({changes:s});for(var a=0;a<l.length;++a){var u,c=l[a];if(s.push({from:c.from,to:c.to,text:c.text}),t)for(var f in c)(u=f.match(/^spans_(\d+)$/))&&ho(t,Number(u[1]))>-1&&(fo(s)[f]=c[f],delete c[f])}}}return i}function qi(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Zi(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)qi(o.ranges[s].anchor,t,r,n),qi(o.ranges[s].head,t,r,n)}else{for(var s=0;s<o.changes.length;++s){var a=o.changes[s];if(r<a.from.line)a.from=yl(a.from.line+n,a.from.ch),a.to=yl(a.to.line+n,a.to.ch);else if(t<=a.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function Qi(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;Zi(e.done,r,n,i),Zi(e.undone,r,n,i)}function Ji(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function eo(e){return e.target||e.srcElement}function to(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),fl&&e.ctrlKey&&1==t&&(t=3),t}function ro(e,t){function r(e){return function(){e.apply(null,o)}}var n=e._handlers&&e._handlers[t];if(n){var i,o=Array.prototype.slice.call(arguments,2);Sl?i=Sl.delayedCallbacks:hs?i=hs:(i=hs=[],setTimeout(no,0));for(var l=0;l<n.length;++l)i.push(r(n[l]))}}function no(){var e=hs;hs=null;for(var t=0;t<e.length;++t)e[t]()}function io(e,t,r){return fs(e,r||t.type,e,t),Ji(t)||t.codemirrorIgnore}function oo(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==ho(r,t[n])&&r.push(t[n])}function lo(e,t){var r=e._handlers&&e._handlers[t];return r&&r.length>0}function so(e){e.prototype.on=function(e,t){us(this,e,t)},e.prototype.off=function(e,t){cs(this,e,t)}}function ao(){this.id=null}function uo(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("	",n);-1==o&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=t)return n}}function co(e){for(;bs.length<=e;)bs.push(fo(bs)+" ");return bs[e]}function fo(e){return e[e.length-1]}function ho(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function po(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function go(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&vo(t,r),r}function vo(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||r===!1&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function mo(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function yo(e,t){return t?t.source.indexOf("\\w")>-1&&Ls(e)?!0:t.test(e):Ls(e)}function bo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function wo(e){return e.charCodeAt(0)>=768&&Ss.test(e)}function xo(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function Co(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Lo(e,t){return Co(e).appendChild(t)}function So(e,t){if(e.contains)return e.contains(t);for(;t=t.parentNode;)if(t==e)return!0}function ko(){return document.activeElement}function Mo(e){return new RegExp("\\b"+e+"\\b\\s*")}function To(e,t){var r=Mo(t);r.test(e.className)&&(e.className=e.className.replace(r,""))}function Ho(e,t){Mo(t).test(e.className)||(e.className+=" "+t)}function No(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!Mo(r[n]).test(t)&&(t+=" "+r[n]);return t}function Ao(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),r=0;r<t.length;r++){var n=t[r].CodeMirror;n&&e(n)}}function Oo(){Hs||(Wo(),Hs=!0)}function Wo(){var e;us(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ks=null,Ao(Nr)},100))}),us(window,"blur",function(){Ao(Qr)})}function Do(e){if(null!=ks)return ks;var t=xo("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Lo(e,t),t.offsetWidth&&(ks=t.offsetHeight-t.clientHeight),ks||0}function Io(e){if(null==Ms){var t=xo("span","​");Lo(e,xo("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ms=t.offsetWidth<=1&&t.offsetHeight>2&&!(Jo&&8>el))}return Ms?xo("span","​"):xo("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Eo(e){if(null!=Ts)return Ts;var t=Lo(e,document.createTextNode("AخA")),r=xs(t,0,1).getBoundingClientRect();if(!r||r.left==r.right)return!1;var n=xs(t,1,2).getBoundingClientRect();return Ts=n.right-r.right<3}function Po(e){if(null!=Ds)return Ds;var t=Lo(e,xo("span","x")),r=t.getBoundingClientRect(),n=xs(t,0,1).getBoundingClientRect();return Ds=Math.abs(r.left-n.left)>1}function zo(e,t,r,n){if(!e)return n(t,r,"ltr");for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?"rtl":"ltr"),i=!0)}i||n(t,r,"ltr")}function Ro(e){return e.level%2?e.to:e.from}function Fo(e){return e.level%2?e.from:e.to}function Bo(e){var t=zi(e);return t?Ro(t[0]):0}function Go(e){var t=zi(e);return t?Fo(fo(t)):e.text.length}function Vo(e,t){var r=Ai(e.doc,t),n=Qn(r);n!=r&&(t=Ii(n));var i=zi(n),o=i?i[0].level%2?Go(n):Bo(n):0;return yl(t,o)}function Uo(e,t){for(var r,n=Ai(e.doc,t);r=qn(n);)n=r.find(1,!0).line,t=null;var i=zi(n),o=i?i[0].level%2?Bo(n):Go(n):n.text.length;return yl(null==t?Ii(n):t,o)}function Ko(e,t){var r=Vo(e,t.line),n=Ai(e.doc,r.line),i=zi(n);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return yl(r.line,l?0:o)}return r}function Xo(e,t,r){var n=e[0].level;return t==n?!0:r==n?!1:r>t}function _o(e,t){Es=null;for(var r,n=0;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(null!=r)return Xo(e,i.level,e[r].level)?(i.from!=i.to&&(Es=r),n):(i.from!=i.to&&(Es=n),r);r=n}}return r}function jo(e,t,r,n){if(!n)return t+r;do t+=r;while(t>0&&wo(e.text.charAt(t)));return t}function Yo(e,t,r,n){var i=zi(e);if(!i)return $o(e,t,r,n);for(var o=_o(i,t),l=i[o],s=jo(e,t,l.level%2?-r:r,n);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return _o(i,s)==o?s:(l=i[o+=r],r>0==l.level%2?l.to:l.from);if(l=i[o+=r],!l)return null;s=r>0==l.level%2?jo(e,l.to,-1,n):jo(e,l.from,1,n)}}function $o(e,t,r,n){var i=t+r;if(n)for(;i>0&&wo(e.text.charAt(i));)i+=r;return 0>i||i>e.text.length?null:i}var qo=/gecko\/\d/i.test(navigator.userAgent),Zo=/MSIE \d/.test(navigator.userAgent),Qo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Jo=Zo||Qo,el=Jo&&(Zo?document.documentMode||6:Qo[1]),tl=/WebKit\//.test(navigator.userAgent),rl=tl&&/Qt\/\d+\.\d+/.test(navigator.userAgent),nl=/Chrome\//.test(navigator.userAgent),il=/Opera\//.test(navigator.userAgent),ol=/Apple Computer/.test(navigator.vendor),ll=/KHTML\//.test(navigator.userAgent),sl=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),al=/PhantomJS/.test(navigator.userAgent),ul=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),cl=ul||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),fl=ul||/Mac/.test(navigator.platform),hl=/win/i.test(navigator.platform),dl=il&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);dl&&(dl=Number(dl[1])),dl&&dl>=15&&(il=!1,tl=!0);var pl=fl&&(rl||il&&(null==dl||12.11>dl)),gl=qo||Jo&&el>=9,vl=!1,ml=!1,yl=e.Pos=function(e,t){return this instanceof yl?(this.line=e,void(this.ch=t)):new yl(e,t)},bl=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};Y.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(0!=bl(r.anchor,n.anchor)||0!=bl(r.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new $(X(this.ranges[t].anchor),X(this.ranges[t].head));return new Y(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(bl(t,n.from())>=0&&bl(e,n.to())<=0)return r}return-1}},$.prototype={from:function(){return j(this.anchor,this.head)},to:function(){return _(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var wl,xl,Cl,Ll={left:0,right:0,top:0,bottom:0},Sl=null,kl=0,Ml=null,Tl=0,Hl=0,Nl=null;Jo?Nl=-.53:qo?Nl=15:nl?Nl=-.7:ol&&(Nl=-1/3);var Al,Ol=null,Wl=e.changeEnd=function(e){return e.text?yl(e.from.line+e.text.length-1,fo(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),kr(this),Cr(this)},setOption:function(e,t){var r=this.options,n=r[e];(r[e]!=t||"mode"==e)&&(r[e]=t,Il.hasOwnProperty(e)&&ur(this,Il[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||"string"!=typeof t[r]&&t[r].name==e)return t.splice(r,1),!0},addOverlay:cr(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:r&&r.opaque}),this.state.modeGen++,pr(this)}),removeOverlay:cr(function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void pr(this)}}),indentLine:cr(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),tt(this.doc,e)&&xn(this,e,t,r)}),indentSelection:cr(function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(xn(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&bn(this));else{var o=i.from(),l=i.to(),s=Math.max(r,o.line);r=Math.min(this.lastLine(),l.line-(l.ch?0:1))+1;for(var a=s;r>a;++a)xn(this,a,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[n].from().ch>0&&lt(this.doc,n,new $(o,u[n].to()),gs)}}}),getTokenAt:function(e,t){var r=this.doc;e=J(r,e);for(var n=kt(this,e.line,t),i=this.doc.mode,o=Ai(r,e.line),l=new Yl(o.text,this.options.tabSize);l.pos<e.ch&&!l.eol();){l.start=l.pos;var s=fi(i,l,n)}return{start:l.start,end:l.pos,string:l.current(),type:s||null,state:n}},getTokenTypeAt:function(e){e=J(this.doc,e);var t,r=pi(this,Ai(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf("cm-overlay "):-1;return 0>s?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!Bl.hasOwnProperty(t))return Bl;var n=Bl[t],i=this.getModeAt(e);if("string"==typeof i[t])n[i[t]]&&r.push(n[i[t]]);else if(i[t])for(var o=0;o<i[t].length;o++){var l=n[i[t][o]];l&&r.push(l)}else i.helperType&&n[i.helperType]?r.push(n[i.helperType]):n[i.name]&&r.push(n[i.name]);for(var o=0;o<n._global.length;o++){var s=n._global[o];s.pred(i,this)&&-1==ho(r,s.val)&&r.push(s.val)}return r},getStateAfter:function(e,t){var r=this.doc;return e=Q(r,null==e?r.first+r.size-1:e),kt(this,e+1,t)},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();return r=null==e?n.head:"object"==typeof e?J(this.doc,e):e?n.from():n.to(),_t(this,r,t||"page")},charCoords:function(e,t){return Xt(this,J(this.doc,e),t||"page")},coordsChar:function(e,t){return e=Kt(this,e,t||"page"),$t(this,e.left,e.top)},lineAtHeight:function(e,t){return e=Kt(this,{top:e,left:0},t||"page").top,Ei(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var r=!1,n=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>n&&(e=n,r=!0);var i=Ai(this.doc,e);return Ut(this,i,{top:0,left:0},t||"page").top+(r?this.doc.height-Pi(i):0)},defaultTextHeight:function(){return Zt(this.display)},defaultCharWidth:function(){return Qt(this.display)},setGutterMarker:cr(function(e,t,r){return Cn(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&bo(n)&&(e.gutterMarkers=null),!0})}),clearGutter:cr(function(e){var t=this,r=t.doc,n=r.first;r.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&(r.gutterMarkers[e]=null,gr(t,n,"gutter"),bo(r.gutterMarkers)&&(r.gutterMarkers=null)),++n})}),addLineWidget:cr(function(e,t,r){return li(this,e,t,r)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if("number"==typeof e){if(!tt(this.doc,e))return null;var t=e;if(e=Ai(this.doc,e),!e)return null}else{var t=Ii(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=_t(this,J(this.doc,e));var l=e.bottom,s=e.left;if(t.style.position="absolute",o.sizer.appendChild(t),"over"==n)l=e.top;else if("above"==n||"near"==n){var a=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(l=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&vn(this,s,l,s+t.offsetWidth,l+t.offsetHeight)},triggerOnKeyDown:cr(jr),triggerOnKeyPress:cr(qr),triggerOnKeyUp:$r,execCommand:function(e){return Ul.hasOwnProperty(e)?Ul[e](this):void 0},findPosH:function(e,t,r,n){var i=1;0>t&&(i=-1,t=-t);for(var o=0,l=J(this.doc,e);t>o&&(l=Sn(this.doc,l,i,r,n),!l.hitSide);++o);return l
},moveH:cr(function(e,t){var r=this;r.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?Sn(r.doc,n.head,e,t,r.options.rtlMoveVisually):0>e?n.from():n.to()},ms)}),deleteH:cr(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Ln(this,function(r){var i=Sn(n,r.head,e,t,!1);return 0>e?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=1,o=n;0>t&&(i=-1,t=-t);for(var l=0,s=J(this.doc,e);t>l;++l){var a=_t(this,s,"div");if(null==o?o=a.left:a.left=o,s=kn(this,a,i,r),s.hitSide)break}return s},moveV:cr(function(e,t){var r=this,n=this.doc,i=[],o=!r.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return 0>e?l.from():l.to();var s=_t(r,l.head,"div");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=kn(r,s,e,t);return"page"==t&&l==n.sel.primary()&&yn(r,null,Xt(r,a,"div").top-s.top),a},ms),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=this.doc,r=Ai(t,e.line).text,n=e.ch,i=e.ch;if(r){var o=this.getHelper(e,"wordChars");(e.xRel<0||i==r.length)&&n?--n:++i;for(var l=r.charAt(n),s=yo(l,o)?function(e){return yo(e,o)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!yo(e)};n>0&&s(r.charAt(n-1));)--n;for(;i<r.length&&s(r.charAt(i));)++i}return new $(yl(e.line,n),yl(e.line,i))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Ho(this.display.cursorDiv,"CodeMirror-overwrite"):To(this.display.cursorDiv,"CodeMirror-overwrite"),fs(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return ko()==this.display.input},scrollTo:cr(function(e,t){(null!=e||null!=t)&&wn(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=ds;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:cr(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:yl(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)wn(this),this.curOp.scrollToPos=e;else{var r=mn(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(r.scrollLeft,r.scrollTop)}}),setSize:cr(function(e,t){function r(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=r(e)),null!=t&&(n.display.wrapper.style.height=r(t)),n.options.lineWrapping&&Ft(this);var i=n.display.viewFrom;n.doc.iter(i,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){gr(n,i,"widget");break}++i}),n.curOp.forceUpdate=!0,fs(n,"refresh",this)}),operation:function(e){return ar(this,e)},refresh:cr(function(){var e=this.display.cachedTextHeight;pr(this),this.curOp.forceUpdate=!0,Bt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),f(this),(null==e||Math.abs(e-Zt(this.display))>.5)&&l(this),fs(this,"refresh",this)}),swapDoc:cr(function(e){var t=this.doc;return t.cm=null,Ni(this,e),Bt(this),Sr(this),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ro(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},so(e);var Dl=e.defaults={},Il=e.optionHandlers={},El=e.Init={toString:function(){return"CodeMirror.Init"}};Mn("value","",function(e,t){e.setValue(t)},!0),Mn("mode",null,function(e,t){e.doc.modeOption=t,r(e)},!0),Mn("indentUnit",2,r,!0),Mn("indentWithTabs",!1),Mn("smartIndent",!0),Mn("tabSize",4,function(e){n(e),Bt(e),pr(e)},!0),Mn("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),Mn("specialCharPlaceholder",yi,function(e){e.refresh()},!0),Mn("electricChars",!0),Mn("rtlMoveVisually",!hl),Mn("wholeLineUpdateBefore",!0),Mn("theme","default",function(e){a(e),u(e)},!0),Mn("keyMap","default",s),Mn("extraKeys",null),Mn("lineWrapping",!1,i,!0),Mn("gutters",[],function(e){p(e.options),u(e)},!0),Mn("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?C(e.display)+"px":"0",e.refresh()},!0),Mn("coverGutterNextToScrollbar",!1,m,!0),Mn("lineNumbers",!1,function(e){p(e.options),u(e)},!0),Mn("firstLineNumber",1,u,!0),Mn("lineNumberFormatter",function(e){return e},u,!0),Mn("showCursorWhenSelecting",!1,yt,!0),Mn("resetSelectionOnContextMenu",!0),Mn("readOnly",!1,function(e,t){"nocursor"==t?(Qr(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Sr(e))}),Mn("disableInput",!1,function(e,t){t||Sr(e)},!0),Mn("dragDrop",!0),Mn("cursorBlinkRate",530),Mn("cursorScrollMargin",0),Mn("cursorHeight",1,yt,!0),Mn("singleCursorHeightPerLine",!0,yt,!0),Mn("workTime",100),Mn("workDelay",100),Mn("flattenSpans",!0,n,!0),Mn("addModeClass",!1,n,!0),Mn("pollInterval",100),Mn("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),Mn("historyEventDelay",1250),Mn("viewportMargin",10,function(e){e.refresh()},!0),Mn("maxHighlightLength",1e4,n,!0),Mn("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),Mn("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),Mn("autofocus",null);var Pl=e.modes={},zl=e.mimeModes={};e.defineMode=function(t,r){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),Pl[t]=r},e.defineMIME=function(e,t){zl[e]=t},e.resolveMode=function(t){if("string"==typeof t&&zl.hasOwnProperty(t))t=zl[t];else if(t&&"string"==typeof t.name&&zl.hasOwnProperty(t.name)){var r=zl[t.name];"string"==typeof r&&(r={name:r}),t=go(r,t),t.name=r.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,r){var r=e.resolveMode(r),n=Pl[r.name];if(!n)return e.getMode(t,"text/plain");var i=n(t,r);if(Rl.hasOwnProperty(r.name)){var o=Rl[r.name];for(var l in o)o.hasOwnProperty(l)&&(i.hasOwnProperty(l)&&(i["_"+l]=i[l]),i[l]=o[l])}if(i.name=r.name,r.helperType&&(i.helperType=r.helperType),r.modeProps)for(var l in r.modeProps)i[l]=r.modeProps[l];return i},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Rl=e.modeExtensions={};e.extendMode=function(e,t){var r=Rl.hasOwnProperty(e)?Rl[e]:Rl[e]={};vo(t,r)},e.defineExtension=function(t,r){e.prototype[t]=r},e.defineDocExtension=function(e,t){ns.prototype[e]=t},e.defineOption=Mn;var Fl=[];e.defineInitHook=function(e){Fl.push(e)};var Bl=e.helpers={};e.registerHelper=function(t,r,n){Bl.hasOwnProperty(t)||(Bl[t]=e[t]={_global:[]}),Bl[t][r]=n},e.registerGlobalHelper=function(t,r,n,i){e.registerHelper(t,r,i),Bl[t]._global.push({pred:n,val:i})};var Gl=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r},Vl=e.startState=function(e,t,r){return e.startState?e.startState(t,r):!0};e.innerMode=function(e,t){for(;e.innerMode;){var r=e.innerMode(t);if(!r||r.mode==e)break;t=r.state,e=r.mode}return r||{mode:e,state:t}};var Ul=e.commands={selectAll:function(e){e.setSelection(yl(e.firstLine(),0),yl(e.lastLine()),gs)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),gs)},killLine:function(e){Ln(e,function(t){if(t.empty()){var r=Ai(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:yl(t.head.line+1,0)}:{from:t.head,to:yl(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Ln(e,function(t){return{from:yl(t.from().line,0),to:J(e.doc,yl(t.to().line+1,0))}})},delLineLeft:function(e){Ln(e,function(e){return{from:yl(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Ln(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){Ln(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(yl(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(yl(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Vo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Ko(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Uo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},ms)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},ms)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?Ko(e,t.head):n},ms)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=ys(e.getLine(o.line),o.ch,n);t.push(new Array(n-l%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){ar(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++){var i=t[n].head,o=Ai(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new yl(i.line,i.ch-1)),i.ch>0)i=new yl(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),yl(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=Ai(e.doc,i.line-1).text;l&&e.replaceRange(o.charAt(0)+"\n"+l.charAt(l.length-1),yl(i.line-1,l.length-1),yl(i.line,1),"+transpose")}r.push(new $(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){ar(e,function(){for(var t=e.listSelections().length,r=0;t>r;r++){var n=e.listSelections()[r];e.replaceRange("\n",n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0),bn(e)}})},toggleOverwrite:function(e){e.toggleOverwrite()}},Kl=e.keyMap={};Kl.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Kl.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Kl.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Kl.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Kl["default"]=fl?Kl.macDefault:Kl.pcDefault;var Xl=e.lookupKey=function(e,t,r){function n(t){t=Tn(t);var i=t[e];if(i===!1)return"stop";if(null!=i&&r(i))return!0;if(t.nofallthrough)return"stop";var o=t.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return n(o);for(var l=0;l<o.length;++l){var s=n(o[l]);if(s)return s}return!1}for(var i=0;i<t.length;++i){var o=n(t[i]);if(o)return"stop"!=o}},_l=e.isModifierKey=function(e){var t=Is[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},jl=e.keyName=function(e,t){if(il&&34==e.keyCode&&e["char"])return!1;var r=Is[e.keyCode];return null==r||e.altGraphKey?!1:(e.altKey&&(r="Alt-"+r),(pl?e.metaKey:e.ctrlKey)&&(r="Ctrl-"+r),(pl?e.ctrlKey:e.metaKey)&&(r="Cmd-"+r),!t&&e.shiftKey&&(r="Shift-"+r),r)};e.fromTextArea=function(t,r){function n(){t.value=u.getValue()}if(r||(r={}),r.value=t.value,!r.tabindex&&t.tabindex&&(r.tabindex=t.tabindex),!r.placeholder&&t.placeholder&&(r.placeholder=t.placeholder),null==r.autofocus){var i=ko();r.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(us(t.form,"submit",n),!r.leaveSubmitMethodAlone)){var o=t.form,l=o.submit;try{var s=o.submit=function(){n(),o.submit=l,o.submit(),o.submit=s}}catch(a){}}t.style.display="none";var u=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},r);return u.save=n,u.getTextArea=function(){return t},u.toTextArea=function(){u.toTextArea=isNaN,n(),t.parentNode.removeChild(u.getWrapperElement()),t.style.display="",t.form&&(cs(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=l))},u};var Yl=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Yl.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var r=t==e;else var r=t&&(e.test?e.test(t):e(t));return r?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ys(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ys(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return ys(this.string,null,this.tabSize)-(this.lineStart?ys(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return i(o)==i(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var $l=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};so($l),$l.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Jt(e),lo(this,"clear")){var r=this.find();r&&ro(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=In(l.markedSpans,this);e&&!this.collapsed?gr(e,Ii(l),"text"):e&&(null!=s.to&&(i=Ii(l)),null!=s.from&&(n=Ii(l))),l.markedSpans=En(l.markedSpans,s),null==s.from&&this.collapsed&&!ri(this.doc,l)&&e&&Di(l,Zt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var a=Qn(this.lines[o]),u=h(a);u>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&pr(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&dt(e.doc)),e&&ro(e,"markerCleared",e,this),t&&tr(e),this.parent&&this.parent.clear()}},$l.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var r,n,i=0;i<this.lines.length;++i){var o=this.lines[i],l=In(o.markedSpans,this);if(null!=l.from&&(r=yl(t?o:Ii(o),l.from),-1==e))return r;if(null!=l.to&&(n=yl(t?o:Ii(o),l.to),1==e))return n}return r&&{from:r,to:n}},$l.prototype.changed=function(){var e=this.find(-1,!0),t=this,r=this.doc.cm;e&&r&&ar(r,function(){var n=e.line,i=Ii(e.line),o=Dt(r,i);if(o&&(Rt(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!ri(t.doc,n)&&null!=t.height){var l=t.height;t.height=null;var s=oi(t)-l;s&&Di(n,n.height+s)}})},$l.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=ho(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},$l.prototype.detachLine=function(e){if(this.lines.splice(ho(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var ql=0,Zl=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};so(Zl),Zl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ro(this,"clear")}},Zl.prototype.find=function(e,t){return this.primary.find(e,t)};var Ql=e.LineWidget=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=e,this.node=t};so(Ql),Ql.prototype.clear=function(){var e=this.cm,t=this.line.widgets,r=this.line,n=Ii(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var o=oi(this);ar(e,function(){ii(e,r,-o),gr(e,n,"widget"),Di(r,Math.max(0,r.height-o))})}},Ql.prototype.changed=function(){var e=this.height,t=this.cm,r=this.line;this.height=null;var n=oi(this)-e;n&&ar(t,function(){t.curOp.forceUpdate=!0,ii(t,r,n),Di(r,r.height+n)})};var Jl=e.Line=function(e,t,r){this.text=e,Kn(this,t),this.height=r?r(this):1};so(Jl),Jl.prototype.lineNo=function(){return Ii(this)};var es={},ts={};Mi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;n>r;++r){var i=this.lines[r];this.height-=i.height,ai(i),ro(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;n>e;++e)if(r(this.lines[e]))return!0}},Ti.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(i>e){var o=Math.min(t,i-e),l=n.height;if(n.removeInner(e,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Mi))){var s=[];this.collapse(s),this.children=[new Mi(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>=e){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var l=i.lines.splice(i.lines.length-25,25),s=new Mi(l);i.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Ti(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=ho(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Ti(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(o>e){var l=Math.min(t,o-e);if(i.iterN(e,l,r))return!0;if(0==(t-=l))break;e=0}else e-=o}}};var rs=0,ns=e.Doc=function(e,t,r){if(!(this instanceof ns))return new ns(e,t,r);null==r&&(r=0),Ti.call(this,[new Mi([new Jl("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=r;var n=yl(r,0);this.sel=Z(n),this.history=new Ri(null),this.id=++rs,this.modeOption=t,"string"==typeof e&&(e=As(e)),ki(this,{from:n,to:n,text:e}),ct(this,Z(n),gs)};ns.prototype=go(Ti.prototype,{constructor:ns,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Wi(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:fr(function(e){var t=yl(this.first,0),r=this.first+this.size-1;sn(this,{from:t,to:yl(r,Ai(this,r).text.length),text:As(e),origin:"setValue"},!0),ct(this,Z(t))}),replaceRange:function(e,t,r,n){t=J(this,t),r=r?J(this,r):t,dn(this,e,t,r,n)},getRange:function(e,t,r){var n=Oi(this,J(this,e),J(this,t));return r===!1?n:n.join(r||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return tt(this,e)?Ai(this,e):void 0},getLineNumber:function(e){return Ii(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ai(this,e)),Qn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return J(this,e)},getCursor:function(e){var t,r=this.sel.primary();return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||"to"==e||e===!1?r.to():r.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:fr(function(e,t,r){st(this,J(this,"number"==typeof e?yl(e,t||0):e),null,r)}),setSelection:fr(function(e,t,r){st(this,J(this,e),J(this,t||e),r)}),extendSelection:fr(function(e,t,r){it(this,J(this,e),t&&J(this,t),r)}),extendSelections:fr(function(e,t){ot(this,rt(this,e,t))}),extendSelectionsBy:fr(function(e,t){ot(this,po(this.sel.ranges,e),t)}),setSelections:fr(function(e,t,r){if(e.length){for(var n=0,i=[];n<e.length;n++)i[n]=new $(J(this,e[n].anchor),J(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ct(this,q(i,t),r)}}),addSelection:fr(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new $(J(this,e),J(this,t||e))),ct(this,q(n,n.length-1),r)}),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=Oi(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return e===!1?t:t.join(e||"\n")},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=Oi(this,r[n].from(),r[n].to());e!==!1&&(i=i.join(e||"\n")),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:fr(function(e,t,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:As(e[o]),origin:r}}for(var s=t&&"end"!=t&&on(this,n,t),o=n.length-1;o>=0;o--)sn(this,n[o]);s?ut(this,s):this.cm&&bn(this.cm)}),undo:fr(function(){un(this,"undo")}),redo:fr(function(){un(this,"redo")}),undoSelection:fr(function(){un(this,"undo",!0)}),redoSelection:fr(function(){un(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new Ri(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:$i(this.history.done),undone:$i(this.history.undone)}},setHistory:function(e){var t=this.history=new Ri(this.history.maxGeneration);t.done=$i(e.done.slice(0),null,!0),t.undone=$i(e.undone.slice(0),null,!0)},addLineClass:fr(function(e,t,r){return Cn(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass";if(e[n]){if(new RegExp("(?:^|\\s)"+r+"(?:$|\\s)").test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0})}),removeLineClass:fr(function(e,t,r){return Cn(this,e,"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+r+"(?:$|\\s+)"));if(!o)return!1;var l=o.index+o[0].length;e[n]=i.slice(0,o.index)+(o.index&&l!=i.length?" ":"")+i.slice(l)||null}return!0})}),markText:function(e,t,r){return Hn(this,J(this,e),J(this,t),r,"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=J(this,e),Hn(this,e,e,r,"bookmark")},findMarksAt:function(e){e=J(this,e);var t=[],r=Ai(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=J(this,e),t=J(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];i==e.line&&e.ch>a.to||null==a.from&&i!=e.line||i==t.line&&a.from>t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first;return this.iter(function(n){var i=n.text.length+1;return i>e?(t=e,!0):(e-=i,void++r)}),J(this,yl(r,t))},indexFromPos:function(e){e=J(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new ns(Wi(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new ns(Wi(this,t,r),e.mode||this.modeOption,t);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],On(n,An(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var r=0;r<this.linked.length;++r){var n=this.linked[r];if(n.doc==t){this.linked.splice(r,1),t.unlinkDoc(this),Wn(An(this));break}}if(t.history==this.history){var i=[t.id];Hi(t,function(e){i.push(e.id)},!0),t.history=new Ri(null),t.history.done=$i(this.history.done,i),t.history.undone=$i(this.history.undone,i)}},iterLinkedDocs:function(e){Hi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ns.prototype.eachLine=ns.prototype.iter;var is="iter insert remove copy getEditor".split(" ");for(var os in ns.prototype)ns.prototype.hasOwnProperty(os)&&ho(is,os)<0&&(e.prototype[os]=function(e){return function(){return e.apply(this.doc,arguments)}}(ns.prototype[os]));so(ns);var ls=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},ss=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},as=e.e_stop=function(e){ls(e),ss(e)},us=e.on=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={}),i=n[t]||(n[t]=[]);i.push(r)}},cs=e.off=function(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers&&e._handlers[t];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}},fs=e.signal=function(e,t){var r=e._handlers&&e._handlers[t];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)},hs=null,ds=30,ps=e.Pass={toString:function(){return"CodeMirror.Pass"}},gs={scroll:!1},vs={origin:"*mouse"},ms={origin:"+move"};ao.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var ys=e.countColumn=function(e,t,r,n,i){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var o=n||0,l=i||0;;){var s=e.indexOf("	",o);if(0>s||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}},bs=[""],ws=function(e){e.select()};ul?ws=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Jo&&(ws=function(e){try{e.select()}catch(t){}}),[].indexOf&&(ho=function(e,t){return e.indexOf(t)}),[].map&&(po=function(e,t){return e.map(t)});var xs,Cs=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ls=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Cs.test(e))},Ss=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
xs=document.createRange?function(e,t,r){var n=document.createRange();return n.setEnd(e,r),n.setStart(e,t),n}:function(e,t,r){var n=document.body.createTextRange();return n.moveToElementText(e.parentNode),n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n},Jo&&11>el&&(ko=function(){try{return document.activeElement}catch(e){return document.body}});var ks,Ms,Ts,Hs=!1,Ns=function(){if(Jo&&9>el)return!1;var e=xo("div");return"draggable"in e||"dragDrop"in e}(),As=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;n>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Os=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(r){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},Ws=function(){var e=xo("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ds=null,Is={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};e.keyNames=Is,function(){for(var e=0;10>e;e++)Is[e+48]=Is[e+96]=String(e);for(var e=65;90>=e;e++)Is[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Is[e+111]=Is[e+63235]="F"+e}();var Es,Ps=function(){function e(e){return 247>=e?r.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?n.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,r){this.level=e,this.from=t,this.to=r}var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,l=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,u="L";return function(r){if(!i.test(r))return!1;for(var n,c=r.length,f=[],h=0;c>h;++h)f.push(n=e(r.charCodeAt(h)));for(var h=0,d=u;c>h;++h){var n=f[h];"m"==n?f[h]=d:d=n}for(var h=0,p=u;c>h;++h){var n=f[h];"1"==n&&"r"==p?f[h]="n":l.test(n)&&(p=n,"r"==n&&(f[h]="R"))}for(var h=1,d=f[0];c-1>h;++h){var n=f[h];"+"==n&&"1"==d&&"1"==f[h+1]?f[h]="1":","!=n||d!=f[h+1]||"1"!=d&&"n"!=d||(f[h]=d),d=n}for(var h=0;c>h;++h){var n=f[h];if(","==n)f[h]="N";else if("%"==n){for(var g=h+1;c>g&&"%"==f[g];++g);for(var v=h&&"!"==f[h-1]||c>g&&"1"==f[g]?"1":"N",m=h;g>m;++m)f[m]=v;h=g-1}}for(var h=0,p=u;c>h;++h){var n=f[h];"L"==p&&"1"==n?f[h]="L":l.test(n)&&(p=n)}for(var h=0;c>h;++h)if(o.test(f[h])){for(var g=h+1;c>g&&o.test(f[g]);++g);for(var y="L"==(h?f[h-1]:u),b="L"==(c>g?f[g]:u),v=y||b?"L":"R",m=h;g>m;++m)f[m]=v;h=g-1}for(var w,x=[],h=0;c>h;)if(s.test(f[h])){var C=h;for(++h;c>h&&s.test(f[h]);++h);x.push(new t(0,C,h))}else{var L=h,S=x.length;for(++h;c>h&&"L"!=f[h];++h);for(var m=L;h>m;)if(a.test(f[m])){m>L&&x.splice(S,0,new t(1,L,m));var k=m;for(++m;h>m&&a.test(f[m]);++m);x.splice(S,0,new t(2,k,m)),L=m}else++m;h>L&&x.splice(S,0,new t(1,L,h))}return 1==x[0].level&&(w=r.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==fo(x).level&&(w=r.match(/\s+$/))&&(fo(x).to-=w[0].length,x.push(new t(0,c-w[0].length,c))),x[0].level!=fo(x).level&&x.push(new t(x[0].level,c,c)),x}}();return e.version="4.7.0",e});
},{}],16:[function(require,module,exports){
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=!0;return t}function r(e,t){for(var r,o=!1;null!=(r=e.next());){if(o&&"/"==r){t.tokenize=null;break}o="*"==r}return["comment","comment"]}function o(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,r){function o(e,t){return m=t,e}function i(e,t){var r=e.next();if(g[r]){var i=g[r](e,t);if(i!==!1)return i}return"@"==r?(e.eatWhile(/[\w\\\-]/),o("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?o(null,"compare"):'"'==r||"'"==r?(t.tokenize=a(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),o("atom","hash")):"!"==r?(e.match(/^\s*\w*/),o("keyword","important")):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),o("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?o(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?o("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?o(null,r):"u"==r&&e.match("rl(")?(e.backUp(1),t.tokenize=n,o("property","word")):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),o("property","word")):o(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),o("number","unit")):e.match(/^\w+-/)?o("meta","meta"):void 0}function a(e){return function(t,r){for(var i,a=!1;null!=(i=t.next());){if(i==e&&!a){")"==e&&t.backUp(1);break}a=!a&&"\\"==i}return(i==e||!a&&")"!=e)&&(r.tokenize=null),o("string","string")}}function n(e,t){return e.next(),t.tokenize=e.match(/\s*[\"\')]/,!1)?null:a(")"),o(null,"(")}function l(e,t,r){this.type=e,this.indent=t,this.prev=r}function s(e,t,r){return e.context=new l(r,t.indentation()+b,e.context),r}function d(e){return e.context=e.context.prev,e.context.type}function c(e,t,r){return j[r.context.type](e,t,r)}function u(e,t,r,o){for(var i=o||1;i>0;i--)r.context=r.context.prev;return c(e,t,r)}function p(e){var t=e.current().toLowerCase();h=x.hasOwnProperty(t)?"atom":v.hasOwnProperty(t)?"keyword":"variable"}r.propertyKeywords||(r=e.resolveMode("text/css"));var m,h,b=t.indentUnit,g=r.tokenHooks,f=r.mediaTypes||{},w=r.mediaFeatures||{},y=r.propertyKeywords||{},k=r.nonStandardPropertyKeywords||{},v=r.colorKeywords||{},x=r.valueKeywords||{},z=r.fontProperties||{},q=r.allowNested,j={};return j.top=function(e,t,r){if("{"==e)return s(r,t,"block");if("}"==e&&r.context.prev)return d(r);if("@media"==e)return s(r,t,"media");if("@font-face"==e)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return s(r,t,"at");if("hash"==e)h="builtin";else if("word"==e)h="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return s(r,t,"interpolation");if(":"==e)return"pseudo";if(q&&"("==e)return s(r,t,"parens")}return r.context.type},j.block=function(e,t,r){if("word"==e){var o=t.current().toLowerCase();return y.hasOwnProperty(o)?(h="property","maybeprop"):k.hasOwnProperty(o)?(h="string-2","maybeprop"):q?(h=t.match(/^\s*:/,!1)?"property":"tag","block"):(h+=" error","maybeprop")}return"meta"==e?"block":q||"hash"!=e&&"qualifier"!=e?j.top(e,t,r):(h="error","block")},j.maybeprop=function(e,t,r){return":"==e?s(r,t,"prop"):c(e,t,r)},j.prop=function(e,t,r){if(";"==e)return d(r);if("{"==e&&q)return s(r,t,"propBlock");if("}"==e||"{"==e)return u(e,t,r);if("("==e)return s(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current())){if("word"==e)p(t);else if("interpolation"==e)return s(r,t,"interpolation")}else h+=" error";return"prop"},j.propBlock=function(e,t,r){return"}"==e?d(r):"word"==e?(h="property","maybeprop"):r.context.type},j.parens=function(e,t,r){return"{"==e||"}"==e?u(e,t,r):")"==e?d(r):"("==e?s(r,t,"parens"):("word"==e&&p(t),"parens")},j.pseudo=function(e,t,r){return"word"==e?(h="variable-3",r.context.type):c(e,t,r)},j.media=function(e,t,r){if("("==e)return s(r,t,"media_parens");if("}"==e)return u(e,t,r);if("{"==e)return d(r)&&s(r,t,q?"block":"top");if("word"==e){var o=t.current().toLowerCase();h="only"==o||"not"==o||"and"==o?"keyword":f.hasOwnProperty(o)?"attribute":w.hasOwnProperty(o)?"property":"error"}return r.context.type},j.media_parens=function(e,t,r){return")"==e?d(r):"{"==e||"}"==e?u(e,t,r,2):j.media(e,t,r)},j.font_face_before=function(e,t,r){return"{"==e?s(r,t,"font_face"):c(e,t,r)},j.font_face=function(e,t,r){return"}"==e?d(r):"word"==e?(h=z.hasOwnProperty(t.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},j.keyframes=function(e,t,r){return"word"==e?(h="variable","keyframes"):"{"==e?s(r,t,"top"):c(e,t,r)},j.at=function(e,t,r){return";"==e?d(r):"{"==e||"}"==e?u(e,t,r):("word"==e?h="tag":"hash"==e&&(h="builtin"),"at")},j.interpolation=function(e,t,r){return"}"==e?d(r):"{"==e||";"==e?u(e,t,r):("variable"!=e&&(h="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new l("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||i)(e,t);return r&&"object"==typeof r&&(m=r[1],r=r[0]),h=r,t.state=j[t.state](m,e,t),h},indent:function(e,t){var r=e.context,o=t&&t.charAt(0),i=r.indent;return"prop"!=r.type||"}"!=o&&")"!=o||(r=r.prev),!r.prev||("}"!=o||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"font_face"!=r.type)&&(")"!=o||"parens"!=r.type&&"media_parens"!=r.type)&&("{"!=o||"at"!=r.type&&"media"!=r.type)||(i=r.indent-b,r=r.prev),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],a=t(i),n=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],l=t(n),s=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],d=t(s),c=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=t(c),p=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],m=t(p),h=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],b=t(h),g=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],f=t(g),w=i.concat(n).concat(s).concat(c).concat(p).concat(h);e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{mediaTypes:a,mediaFeatures:l,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:m,valueKeywords:b,fontProperties:f,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=o,o(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=r,r(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:a,mediaFeatures:l,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:m,valueKeywords:b,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=r,r(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:a,mediaFeatures:l,propertyKeywords:d,nonStandardPropertyKeywords:u,colorKeywords:m,valueKeywords:b,fontProperties:f,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=r,r(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})});
},{"../../lib/codemirror":15}],17:[function(require,module,exports){
!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("htmlmixed",function(e,a){function o(t,e){var a=e.htmlState.tagName;a&&(a=a.toLowerCase());var o=r.token(t,e.htmlState);if("script"==a&&/\btag\b/.test(o)&&">"==t.current()){var l=t.string.slice(Math.max(0,t.pos-100),t.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);l=l?l[1]:"",l&&/[\"\']/.test(l.charAt(0))&&(l=l.slice(1,l.length-1));for(var m=0;m<i.length;++m){var d=i[m];if("string"==typeof d.matches?l==d.matches:d.matches.test(l)){d.mode&&(e.token=n,e.localMode=d.mode,e.localState=d.mode.startState&&d.mode.startState(r.indent(e.htmlState,"")));break}}}else"style"==a&&/\btag\b/.test(o)&&">"==t.current()&&(e.token=c,e.localMode=s,e.localState=s.startState(r.indent(e.htmlState,"")));return o}function l(t,e,a){var o,l=t.current(),n=l.search(e);return n>-1?t.backUp(l.length-n):(o=l.match(/<\/?$/))&&(t.backUp(l.length),t.match(e,!1)||t.match(l)),a}function n(t,e){return t.match(/^<\/\s*script\s*>/i,!1)?(e.token=o,e.localState=e.localMode=null,o(t,e)):l(t,/<\/\s*script\s*>/,e.localMode.token(t,e.localState))}function c(t,e){return t.match(/^<\/\s*style\s*>/i,!1)?(e.token=o,e.localState=e.localMode=null,o(t,e)):l(t,/<\/\s*style\s*>/,s.token(t,e.localState))}var r=t.getMode(e,{name:"xml",htmlMode:!0,multilineTagIndentFactor:a.multilineTagIndentFactor,multilineTagIndentPastTag:a.multilineTagIndentPastTag}),s=t.getMode(e,"css"),i=[],m=a&&a.scriptTypes;if(i.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:t.getMode(e,"javascript")}),m)for(var d=0;d<m.length;++d){var u=m[d];i.push({matches:u.matches,mode:u.mode&&t.getMode(e,u.mode)})}return i.push({matches:/./,mode:t.getMode(e,"text/plain")}),{startState:function(){var t=r.startState();return{token:o,localMode:null,localState:null,htmlState:t}},copyState:function(e){if(e.localState)var a=t.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:a,htmlState:t.copyState(r,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,a){return!e.localMode||/^\s*<\//.test(a)?r.indent(e.htmlState,a):e.localMode.indent?e.localMode.indent(e.localState,a):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||r}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")});
},{"../../lib/codemirror":15,"../css/css":16,"../javascript/javascript":18,"../xml/xml":21}],18:[function(require,module,exports){
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("javascript",function(t,r){function n(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}function a(e,t,r){return vt=e,mt=r,t}function i(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=o(r),t.tokenize(e,t);if("."==r&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return a("number","number");if("."==r&&e.match(".."))return a("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return a(r);if("="==r&&e.eat(">"))return a("=>","operator");if("0"==r&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),a("number","number");if(/\d/.test(r))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),a("number","number");if("/"==r)return e.eat("*")?(t.tokenize=c,c(e,t)):e.eat("/")?(e.skipToEnd(),a("comment","comment")):"operator"==t.lastType||"keyword c"==t.lastType||"sof"==t.lastType||/^[\[{}\(,;:]$/.test(t.lastType)?(n(e),e.eatWhile(/[gimy]/),a("regexp","string-2")):(e.eatWhile(jt),a("operator","operator",e.current()));if("`"==r)return t.tokenize=l,l(e,t);if("#"==r)return e.skipToEnd(),a("error","error");if(jt.test(r))return e.eatWhile(jt),a("operator","operator",e.current());if(gt.test(r)){e.eatWhile(gt);var i=e.current(),u=wt.propertyIsEnumerable(i)&&wt[i];return u&&"."!=t.lastType?a(u.type,u.style,i):a("variable","variable",i)}}function o(e){return function(t,r){var n,o=!1;if(kt&&"@"==t.peek()&&t.match(Mt))return r.tokenize=i,a("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||o);)o=!o&&"\\"==n;return o||(r.tokenize=i),a("string","string")}}function c(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=i;break}n="*"==r}return a("comment","comment")}function l(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=i;break}n=!n&&"\\"==r}return a("quasi","string-2",e.current())}function u(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(0>r)){for(var n=0,a=!1,i=r-1;i>=0;--i){var o=e.string.charAt(i),c=Vt.indexOf(o);if(c>=0&&3>c){if(!n){++i;break}if(0==--n)break}else if(c>=3&&6>c)++n;else if(gt.test(o))a=!0;else if(a&&!n){++i;break}}a&&!n&&(t.fatArrowAt=i)}}function s(e,t,r,n,a,i){this.indented=e,this.column=t,this.type=r,this.prev=a,this.info=i,null!=n&&(this.align=n)}function f(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(var r=n.vars;r;r=r.next)if(r.name==t)return!0}function d(e,t,r,n,a){var i=e.cc;for(It.state=e,It.stream=a,It.marked=null,It.cc=i,It.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var o=i.length?i.pop():xt?w:g;if(o(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return It.marked?It.marked:"variable"==r&&f(e,n)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)It.cc.push(arguments[e])}function v(){return p.apply(null,arguments),!0}function m(e){function t(t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}var n=It.state;if(n.context){if(It.marked="def",t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;r.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function y(){It.state.context={prev:It.state.context,vars:It.state.localVars},It.state.localVars=zt}function b(){It.state.localVars=It.state.context.vars,It.state.context=It.state.context.prev}function k(e,t){var r=function(){var r=It.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var a=r.lexical;a&&")"==a.type&&a.align;a=a.prev)n=a.indented;r.lexical=new s(n,It.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function x(){var e=It.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function h(e){function t(r){return r==e?v():";"==e?p():v(t)}return t}function g(e,t){return"var"==e?v(k("vardef",t.length),F,h(";"),x):"keyword a"==e?v(k("form"),w,g,x):"keyword b"==e?v(k("form"),g,x):"{"==e?v(k("}"),U,x):";"==e?v():"if"==e?("else"==It.state.lexical.info&&It.state.cc[It.state.cc.length-1]==x&&It.state.cc.pop()(),v(k("form"),w,g,x,Q)):"function"==e?v(et):"for"==e?v(k("form"),R,g,x):"variable"==e?v(k("stat"),q):"switch"==e?v(k("form"),w,k("}","switch"),h("{"),U,x,x):"case"==e?v(w,h(":")):"default"==e?v(h(":")):"catch"==e?v(k("form"),y,h("("),tt,h(")"),g,x,b):"module"==e?v(k("form"),y,ot,b,x):"class"==e?v(k("form"),rt,x):"export"==e?v(k("form"),ct,x):"import"==e?v(k("form"),lt,x):p(k("stat"),w,h(";"),x)}function w(e){return M(e,!1)}function j(e){return M(e,!0)}function M(e,t){if(It.state.fatArrowAt==It.stream.start){var r=t?$:C;if("("==e)return v(y,k(")"),N(G,")"),x,h("=>"),r,b);if("variable"==e)return p(y,G,h("=>"),r,b)}var n=t?z:I;return Et.hasOwnProperty(e)?v(n):"function"==e?v(et,n):"keyword c"==e?v(t?E:V):"("==e?v(k(")"),V,pt,h(")"),x,n):"operator"==e||"spread"==e?v(t?j:w):"["==e?v(k("]"),ft,x,n):"{"==e?H(W,"}",null,n):"quasi"==e?p(T,n):v()}function V(e){return e.match(/[;\}\)\],]/)?p():p(w)}function E(e){return e.match(/[;\}\)\],]/)?p():p(j)}function I(e,t){return","==e?v(w):z(e,t,!1)}function z(e,t,r){var n=0==r?I:z,a=0==r?w:j;return"=>"==e?v(y,r?$:C,b):"operator"==e?/\+\+|--/.test(t)?v(n):"?"==t?v(w,h(":"),a):v(a):"quasi"==e?p(T,n):";"!=e?"("==e?H(j,")","call",n):"."==e?v(O,n):"["==e?v(k("]"),V,h("]"),x,n):void 0:void 0}function T(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?v(T):v(w,A)}function A(e){return"}"==e?(It.marked="string-2",It.state.tokenize=l,v(T)):void 0}function C(e){return u(It.stream,It.state),p("{"==e?g:w)}function $(e){return u(It.stream,It.state),p("{"==e?g:j)}function q(e){return":"==e?v(x,g):p(I,h(";"),x)}function O(e){return"variable"==e?(It.marked="property",v()):void 0}function W(e,t){return"variable"==e||"keyword"==It.style?(It.marked="property",v("get"==t||"set"==t?P:S)):"number"==e||"string"==e?(It.marked=kt?"property":It.style+" property",v(S)):"jsonld-keyword"==e?v(S):"["==e?v(w,h("]"),S):void 0}function P(e){return"variable"!=e?p(S):(It.marked="property",v(et))}function S(e){return":"==e?v(j):"("==e?p(et):void 0}function N(e,t){function r(n){if(","==n){var a=It.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),v(e,r)}return n==t?v():v(h(t))}return function(n){return n==t?v():p(e,r)}}function H(e,t,r){for(var n=3;n<arguments.length;n++)It.cc.push(arguments[n]);return v(k(t,r),N(e,t),x)}function U(e){return"}"==e?v():p(g,U)}function B(e){return ht&&":"==e?v(D):void 0}function D(e){return"variable"==e?(It.marked="variable-3",v()):void 0}function F(){return p(G,B,K,L)}function G(e,t){return"variable"==e?(m(t),v()):"["==e?H(G,"]"):"{"==e?H(J,"}"):void 0}function J(e,t){return"variable"!=e||It.stream.match(/^\s*:/,!1)?("variable"==e&&(It.marked="property"),v(h(":"),G,K)):(m(t),v(K))}function K(e,t){return"="==t?v(j):void 0}function L(e){return","==e?v(F):void 0}function Q(e,t){return"keyword b"==e&&"else"==t?v(k("form","else"),g,x):void 0}function R(e){return"("==e?v(k(")"),X,h(")"),x):void 0}function X(e){return"var"==e?v(F,h(";"),Z):";"==e?v(Z):"variable"==e?v(Y):p(w,h(";"),Z)}function Y(e,t){return"in"==t||"of"==t?(It.marked="keyword",v(w)):v(I,Z)}function Z(e,t){return";"==e?v(_):"in"==t||"of"==t?(It.marked="keyword",v(w)):p(w,h(";"),_)}function _(e){")"!=e&&v(w)}function et(e,t){return"*"==t?(It.marked="keyword",v(et)):"variable"==e?(m(t),v(et)):"("==e?v(y,k(")"),N(tt,")"),x,g,b):void 0}function tt(e){return"spread"==e?v(tt):p(G,B)}function rt(e,t){return"variable"==e?(m(t),v(nt)):void 0}function nt(e,t){return"extends"==t?v(w,nt):"{"==e?v(k("}"),at,x):void 0}function at(e,t){return"variable"==e||"keyword"==It.style?(It.marked="property","get"==t||"set"==t?v(it,et,at):v(et,at)):"*"==t?(It.marked="keyword",v(at)):";"==e?v(at):"}"==e?v():void 0}function it(e){return"variable"!=e?p():(It.marked="property",v())}function ot(e,t){return"string"==e?v(g):"variable"==e?(m(t),v(st)):void 0}function ct(e,t){return"*"==t?(It.marked="keyword",v(st,h(";"))):"default"==t?(It.marked="keyword",v(w,h(";"))):p(g)}function lt(e){return"string"==e?v():p(ut,st)}function ut(e,t){return"{"==e?H(ut,"}"):("variable"==e&&m(t),v())}function st(e,t){return"from"==t?(It.marked="keyword",v(w)):void 0}function ft(e){return"]"==e?v():p(j,dt)}function dt(e){return"for"==e?p(pt,h("]")):","==e?v(N(E,"]")):p(N(j,"]"))}function pt(e){return"for"==e?v(R,pt):"if"==e?v(w,pt):void 0}var vt,mt,yt=t.indentUnit,bt=r.statementIndent,kt=r.jsonld,xt=r.json||kt,ht=r.typescript,gt=r.wordCharacters||/[\w$\xa1-\uffff]/,wt=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),a=e("operator"),i={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":r,"do":r,"try":r,"finally":r,"return":n,"break":n,"continue":n,"new":n,"delete":n,"throw":n,"debugger":n,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":a,"typeof":a,"instanceof":a,"true":i,"false":i,"null":i,undefined:i,NaN:i,Infinity:i,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),"yield":n,"export":e("export"),"import":e("import"),"extends":n};if(ht){var c={type:"variable",style:"variable-3"},l={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:c,number:c,bool:c,any:c};for(var u in l)o[u]=l[u]}return o}(),jt=/[+\-*&%=<>!?|~^]/,Mt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Vt="([{}])",Et={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},It={state:null,column:null,marked:null,cc:null},zt={name:"this",next:{name:"arguments"}};return x.lex=!0,{startState:function(e){var t={tokenize:i,lastType:"sof",cc:[],lexical:new s((e||0)-yt,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),u(e,t)),t.tokenize!=c&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==vt?r:(t.lastType="operator"!=vt||"++"!=mt&&"--"!=mt?vt:"incdec",d(t,r,vt,mt,e))},indent:function(t,n){if(t.tokenize==c)return e.Pass;if(t.tokenize!=i)return 0;var a=n&&n.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(n))for(var l=t.cc.length-1;l>=0;--l){var u=t.cc[l];if(u==x)o=o.prev;else if(u!=Q)break}"stat"==o.type&&"}"==a&&(o=o.prev),bt&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var s=o.type,f=a==s;return"vardef"==s?o.indented+("operator"==t.lastType||","==t.lastType?o.info+1:0):"form"==s&&"{"==a?o.indented:"form"==s?o.indented+yt:"stat"==s?o.indented+("operator"==t.lastType||","==t.lastType?bt||yt:0):"switch"!=o.info||f||0==r.doubleIndentSwitch?o.align?o.column+(f?0:1):o.indented+(f?0:yt):o.indented+(/^(?:case|default)\b/.test(n)?yt:2*yt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:xt?null:"/*",blockCommentEnd:xt?null:"*/",lineComment:xt?null:"//",fold:"brace",helperType:xt?"json":"javascript",jsonldMode:kt,jsonMode:xt}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
},{"../../lib/codemirror":15}],19:[function(require,module,exports){
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("ruby",function(e){function t(e){for(var t={},n=0,r=e.length;r>n;++n)t[e[n]]=!0;return t}function n(e,t,n){return n.tokenize.push(e),e(t,n)}function r(e,t){if(l=null,e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(f),"comment";if(e.eatSpace())return null;var r,i=e.next();if("`"==i||"'"==i||'"'==i)return n(a(i,"string",'"'==i||"`"==i),e,t);if("/"==i){var o=e.current().length;if(e.skipTo("/")){var d=e.current().length;e.backUp(e.current().length-o);for(var c=0;e.current().length<d;){var s=e.next();if("("==s?c+=1:")"==s&&(c-=1),0>c)break}if(e.backUp(e.current().length-o),0==c)return n(a(i,"string-2",!0),e,t)}return"operator"}if("%"==i){var k="string",h=!0;e.eat("s")?k="atom":e.eat(/[WQ]/)?k="string":e.eat(/[r]/)?k="string-2":e.eat(/[wxq]/)&&(k="string",h=!1);var m=e.eat(/[^\w\s=]/);return m?(p.propertyIsEnumerable(m)&&(m=p[m]),n(a(m,k,h,!0),e,t)):"operator"}if("#"==i)return e.skipToEnd(),"comment";if("<"==i&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return n(u(r[1]),e,t);if("0"==i)return e.eatWhile(e.eat("x")?/[\da-fA-F]/:e.eat("b")?/[01]/:/[0-7]/),"number";if(/\d/.test(i))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==i){for(;e.match(/^\\[CM]-/););return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}if(":"==i)return e.eat("'")?n(a("'","atom",!1),e,t):e.eat('"')?n(a('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(e.eatWhile(/[\w$\xa1-\uffff]/),e.eat(/[\?\!\=]/),"atom"):"operator";if("@"==i&&e.match(/^@?[a-zA-Z_\xa1-\uffff]/))return e.eat("@"),e.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==i)return e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(i))return e.eatWhile(/[\w\xa1-\uffff]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident";if("|"!=i||!t.varList&&"{"!=t.lastTok&&"do"!=t.lastTok){if(/[\(\)\[\]{}\\;]/.test(i))return l=i,null;if("-"==i&&e.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(i)){var x=e.eatWhile(/[=+\-\/*:\.^%<>~|]/);return"."!=i||x||(l="."),"operator"}return null}return l="|",null}function i(e){return e||(e=1),function(t,n){if("}"==t.peek()){if(1==e)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n);n.tokenize[n.tokenize.length-1]=i(e-1)}else"{"==t.peek()&&(n.tokenize[n.tokenize.length-1]=i(e+1));return r(t,n)}}function o(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,r(t,n))}}function a(e,t,n,r){return function(a,u){var f,l=!1;for("read-quoted-paused"===u.context.type&&(u.context=u.context.prev,a.eat("}"));null!=(f=a.next());){if(f==e&&(r||!l)){u.tokenize.pop();break}if(n&&"#"==f&&!l){if(a.eat("{")){"}"==e&&(u.context={prev:u.context,type:"read-quoted-paused"}),u.tokenize.push(i());break}if(/[@\$]/.test(a.peek())){u.tokenize.push(o());break}}l=!l&&"\\"==f}return t}}function u(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function f(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var l,d=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),c=t(["def","class","case","for","while","module","then","catch","loop","proc","begin"]),s=t(["end","until"]),p={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[r],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var n,r=t.tokenize[t.tokenize.length-1](e,t),i=l;if("ident"==r){var o=e.current();r="."==t.lastTok?"property":d.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(o)?"tag":"def"==t.lastTok||"class"==t.lastTok||t.varList?"def":"variable","keyword"==r&&(i=o,c.propertyIsEnumerable(o)?n="indent":s.propertyIsEnumerable(o)?n="dedent":"if"!=o&&"unless"!=o||e.column()!=e.indentation()?"do"==o&&t.context.indented<t.indented&&(n="indent"):n="indent")}return(l||r&&"comment"!=r)&&(t.lastTok=i),"|"==l&&(t.varList=!t.varList),"indent"==n||/[\(\[\{]/.test(l)?t.context={prev:t.context,type:l||r,indented:t.indented}:("dedent"==n||/[\)\]\}]/.test(l))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine="\\"==l||"operator"==r),r},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=r)return 0;var i=n&&n.charAt(0),o=t.context,a=o.type==p[i]||"keyword"==o.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return o.indented+(a?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de",lineComment:"#"}}),e.defineMIME("text/x-ruby","ruby")});
},{"../../lib/codemirror":15}],20:[function(require,module,exports){
!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../ruby/ruby")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../ruby/ruby"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("slim",function(e){function n(t,e,n){var i=function(i,r){return r.tokenize=e,i.pos<t?(i.pos=t,n):r.tokenize(i,r)};return function(t,n){return n.tokenize=i,e(t,n)}}function i(t,e,i,r,o){var u=t.current(),a=u.search(i);return a>-1&&(e.tokenize=n(t.pos,e.tokenize,o),t.backUp(u.length-a-r)),o}function r(t,e){t.stack={parent:t.stack,style:"continuation",indented:e,tokenize:t.line},t.line=t.tokenize}function o(t){t.line==t.tokenize&&(t.line=t.stack.tokenize,t.stack=t.stack.parent)}function u(t,e){return function(n,i){if(o(i),n.match(/^\\$/))return r(i,t),"lineContinuation";var u=e(n,i);return n.eol()&&n.current().match(/(?:^|[^\\])(?:\\\\)*\\$/)&&n.backUp(1),u}}function a(t,e){return function(n,i){o(i);var u=e(n,i);return n.eol()&&n.current().match(/,$/)&&r(i,t),u}}function c(t,e){return function(n,i){var r=n.peek();return r==t&&1==i.rubyState.tokenize.length?(n.next(),i.tokenize=e,"closeAttributeTag"):s(n,i)}}function l(t){var e,n=function(n,i){if(1==i.rubyState.tokenize.length&&!i.rubyState.context.prev){if(n.backUp(1),n.eatSpace())return i.rubyState=e,i.tokenize=t,t(n,i);n.next()}return s(n,i)};return function(t,i){return e=i.rubyState,i.rubyState=Z.startState(),i.tokenize=n,s(t,i)}}function s(t,e){return Z.token(t,e.rubyState)}function k(t,e){return t.match(/^\\$/)?"lineContinuation":d(t,e)}function d(t,e){return t.match(/^#\{/)?(e.tokenize=c("}",e.tokenize),null):i(t,e,/[^\\]#\{/,1,P.token(t,e.htmlState))}function m(t){return function(e,n){var i=k(e,n);return e.eol()&&(n.tokenize=t),i}}function f(t,e,n){return e.stack={parent:e.stack,style:"html",indented:t.column()+n,tokenize:e.line},e.line=e.tokenize=d,null}function b(t,e){return t.skipToEnd(),e.stack.style}function z(t,e){return e.stack={parent:e.stack,style:"comment",indented:e.indented+1,tokenize:e.line},e.line=b,b(t,e)}function p(t,e){return t.eat(e.stack.endQuote)?(e.line=e.stack.line,e.tokenize=e.stack.tokenize,e.stack=e.stack.parent,null):t.match(K)?(e.tokenize=x,"slimAttribute"):(t.next(),null)}function x(t,e){return t.match(/^==?/)?(e.tokenize=h,null):p(t,e)}function h(t,e){var n=t.peek();return'"'==n||"'"==n?(e.tokenize=q(n,"string",!0,!1,p),t.next(),e.tokenize(t,e)):"["==n?l(p)(t,e):t.match(/^(true|false|nil)\b/)?(e.tokenize=p,"keyword"):l(p)(t,e)}function y(t,e,n){return t.stack={parent:t.stack,style:"wrapper",indented:t.indented+1,tokenize:n,line:t.line,endQuote:e},t.line=t.tokenize=p,null}function S(e,n){if(e.match(/^#\{/))return n.tokenize=c("}",n.tokenize),null;var i=new t.StringStream(e.string.slice(n.stack.indented),e.tabSize);i.pos=e.pos-n.stack.indented,i.start=e.start-n.stack.indented,i.lastColumnPos=e.lastColumnPos-n.stack.indented,i.lastColumnValue=e.lastColumnValue-n.stack.indented;var r=n.subMode.token(i,n.subState);return e.pos=i.pos+n.stack.indented,r}function v(t,e){return e.stack.indented=t.column(),e.line=e.tokenize=S,e.tokenize(t,e)}function w(n){var i=D[n],r=t.mimeModes[i];if(r)return t.getMode(e,r);var o=t.modes[i];return o?o(e,{name:i}):t.getMode(e,"null")}function g(t){return _.hasOwnProperty(t)?_[t]:_[t]=w(t)}function M(t,e){var n=g(t),i=n.startState&&n.startState();return e.subMode=n,e.subState=i,e.stack={parent:e.stack,style:"sub",indented:e.indented+1,tokenize:e.line},e.line=e.tokenize=v,"slimSubmode"}function C(t){return t.skipToEnd(),"slimDoctype"}function E(t,e){var n=t.peek();if("<"==n)return(e.tokenize=m(e.tokenize))(t,e);if(t.match(/^[|']/))return f(t,e,1);if(t.match(/^\/(!|\[\w+])?/))return z(t,e);if(t.match(/^(-|==?[<>]?)/))return e.tokenize=u(t.column(),a(t.column(),s)),"slimSwitch";if(t.match(/^doctype\b/))return e.tokenize=C,"keyword";var i=t.match(Q);return i?M(i[1],e):L(t,e)}function A(t,e){return e.startOfLine?E(t,e):L(t,e)}function L(t,e){return t.eat("*")?(e.tokenize=l($),null):t.match(H)?(e.tokenize=$,"slimTag"):T(t,e)}function $(t,e){return t.match(/^(<>?|><?)/)?(e.tokenize=T,null):T(t,e)}function T(t,e){return t.match(W)?(e.tokenize=T,"slimId"):t.match(N)?(e.tokenize=T,"slimClass"):U(t,e)}function U(t,e){return t.match(/^([\[\{\(])/)?y(e,B[RegExp.$1],U):t.match(J)?(e.tokenize=j,"slimAttribute"):"*"==t.peek()?(t.next(),e.tokenize=l(I),null):I(t,e)}function j(t,e){return t.match(/^==?/)?(e.tokenize=O,null):U(t,e)}function O(t,e){var n=t.peek();return'"'==n||"'"==n?(e.tokenize=q(n,"string",!0,!1,U),t.next(),e.tokenize(t,e)):"["==n?l(U)(t,e):":"==n?l(R)(t,e):t.match(/^(true|false|nil)\b/)?(e.tokenize=U,"keyword"):l(U)(t,e)}function R(t,e){return t.backUp(1),t.match(/^[^\s],(?=:)/)?(e.tokenize=l(R),null):(t.next(),U(t,e))}function q(t,e,n,i,u){return function(a,l){o(l);var s=0==a.current().length;if(a.match(/^\\$/,s))return s?(r(l,l.indented),"lineContinuation"):e;if(a.match(/^#\{/,s))return s?(l.tokenize=c("}",l.tokenize),null):e;for(var k,d=!1;null!=(k=a.next());){if(k==t&&(i||!d)){l.tokenize=u;break}if(n&&"#"==k&&!d&&a.eat("{")){a.backUp(2);break}d=!d&&"\\"==k}return a.eol()&&d&&a.backUp(1),e}}function I(t,e){return t.match(/^==?/)?(e.tokenize=s,"slimSwitch"):t.match(/^\/$/)?(e.tokenize=A,null):t.match(/^:/)?(e.tokenize=L,"slimSwitch"):(f(t,e,0),e.tokenize(t,e))}var P=t.getMode(e,{name:"htmlmixed"}),Z=t.getMode(e,"ruby"),_={html:P,ruby:Z},D={ruby:"ruby",javascript:"javascript",css:"text/css",sass:"text/x-sass",scss:"text/x-scss",less:"text/x-less",styl:"text/x-styl",coffee:"coffeescript",asciidoc:"text/x-asciidoc",markdown:"text/x-markdown",textile:"text/x-textile",creole:"text/x-creole",wiki:"text/x-wiki",mediawiki:"text/x-mediawiki",rdoc:"text/x-rdoc",builder:"text/x-builder",nokogiri:"text/x-nokogiri",erb:"application/x-erb"},Q=function(t){var e=[];for(var n in t)e.push(n);return new RegExp("^("+e.join("|")+"):")}(D),V={commentLine:"comment",slimSwitch:"operator special",slimTag:"tag",slimId:"attribute def",slimClass:"attribute qualifier",slimAttribute:"attribute",slimSubmode:"keyword special",closeAttributeTag:null,slimDoctype:null,lineContinuation:null},B={"{":"}","[":"]","(":")"},F="_a-zA-ZÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�",G=F+"\\-0-9·̀-ͯ‿-⁀",H=new RegExp("^[:"+F+"](?::["+G+"]|["+G+"]*)"),J=new RegExp("^[:"+F+"][:\\."+G+"]*(?=\\s*=)"),K=new RegExp("^[:"+F+"][:\\."+G+"]*"),N=/^\.-?[_a-zA-Z]+[\w\-]*/,W=/^#[_a-zA-Z]+[\w\-]*/,X={startState:function(){var t=P.startState(),e=Z.startState();return{htmlState:t,rubyState:e,stack:null,last:null,tokenize:A,line:A,indented:0}},copyState:function(e){return{htmlState:t.copyState(P,e.htmlState),rubyState:t.copyState(Z,e.rubyState),subMode:e.subMode,subState:e.subMode&&t.copyState(e.subMode,e.subState),stack:e.stack,last:e.last,tokenize:e.tokenize,line:e.line}},token:function(t,e){if(t.sol())for(e.indented=t.indentation(),e.startOfLine=!0,e.tokenize=e.line;e.stack&&e.stack.indented>e.indented&&"slimSubmode"!=e.last;)e.line=e.tokenize=e.stack.tokenize,e.stack=e.stack.parent,e.subMode=null,e.subState=null;if(t.eatSpace())return null;var n=e.tokenize(t,e);return e.startOfLine=!1,n&&(e.last=n),V.hasOwnProperty(n)?V[n]:n},blankLine:function(t){return t.subMode&&t.subMode.blankLine?t.subMode.blankLine(t.subState):void 0},innerMode:function(t){return t.subMode?{state:t.subState,mode:t.subMode}:{state:t,mode:X}}};return X},"htmlmixed","ruby"),t.defineMIME("text/x-slim","slim"),t.defineMIME("application/x-slim","slim")});
},{"../../lib/codemirror":15,"../htmlmixed/htmlmixed":17,"../ruby/ruby":19}],21:[function(require,module,exports){
!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("xml",function(e,n){function r(t,e){function n(n){return e.tokenize=n,n(t,e)}var r=t.next();if("<"==r)return t.eat("!")?t.eat("[")?t.match("CDATA[")?n(i("atom","]]>")):null:t.match("--")?n(i("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(l(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=i("meta","?>"),"meta"):(z=t.eat("/")?"closeTag":"openTag",e.tokenize=o,"tag bracket");if("&"==r){var a;return a=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),a?"atom":"error"}return t.eatWhile(/[^&<]/),null}function o(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=r,z=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return z="equals",null;if("<"==n){e.tokenize=r,e.state=f,e.tagName=e.tagStart=null;var o=e.tokenize(t,e);return o?o+" tag error":"tag error"}return/[\'\"]/.test(n)?(e.tokenize=a(n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function a(t){var e=function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=o;break}return"string"};return e.isInAttribute=!0,e}function i(t,e){return function(n,o){for(;!n.eol();){if(n.match(e)){o.tokenize=r;break}n.next()}return t}}function l(t){return function(e,n){for(var o;null!=(o=e.next());){if("<"==o)return n.tokenize=l(t+1),n.tokenize(e,n);if(">"==o){if(1==t){n.tokenize=r;break}return n.tokenize=l(t-1),n.tokenize(e,n)}}return"meta"}}function u(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(T.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function d(t){t.context&&(t.context=t.context.prev)}function c(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!T.contextGrabbers.hasOwnProperty(n)||!T.contextGrabbers[n].hasOwnProperty(e))return;d(t)}}function f(t,e,n){return"openTag"==t?(n.tagStart=e.column(),s):"closeTag"==t?m:f}function s(t,e,n){return"word"==t?(n.tagName=e.current(),N="tag",h):(N="error",s)}function m(t,e,n){if("word"==t){var r=e.current();return n.context&&n.context.tagName!=r&&T.implicitlyClosed.hasOwnProperty(n.context.tagName)&&d(n),n.context&&n.context.tagName==r?(N="tag",g):(N="tag error",p)}return N="error",p}function g(t,e,n){return"endTag"!=t?(N="error",g):(d(n),f)}function p(t,e,n){return N="error",g(t,e,n)}function h(t,e,n){if("word"==t)return N="attribute",x;if("endTag"==t||"selfcloseTag"==t){var r=n.tagName,o=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||T.autoSelfClosers.hasOwnProperty(r)?c(n,r):(c(n,r),n.context=new u(n,r,o==n.indented)),f}return N="error",h}function x(t,e,n){return"equals"==t?b:(T.allowMissing||(N="error"),h(t,e,n))}function b(t,e,n){return"string"==t?k:"word"==t&&T.allowUnquoted?(N="string",h):(N="error",h(t,e,n))}function k(t,e,n){return"string"==t?k:h(t,e,n)}var w=e.indentUnit,v=n.multilineTagIndentFactor||1,y=n.multilineTagIndentPastTag;null==y&&(y=!0);var z,N,T=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},C=n.alignCDATA;return{startState:function(){return{tokenize:r,state:f,indented:0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;z=null;var n=e.tokenize(t,e);return(n||z)&&"comment"!=n&&(N=null,e.state=e.state(z||n,t,e),N&&(n="error"==N?n+" error":N)),n},indent:function(e,n,a){var i=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+w;if(i&&i.noIndent)return t.Pass;if(e.tokenize!=o&&e.tokenize!=r)return a?a.match(/^(\s*)/)[0].length:0;if(e.tagName)return y?e.tagStart+e.tagName.length+2:e.tagStart+w*v;if(C&&/<!\[CDATA\[/.test(n))return 0;var l=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(l&&l[1])for(;i;){if(i.tagName==l[2]){i=i.prev;break}if(!T.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(l)for(;i;){var u=T.contextGrabbers[i.tagName];if(!u||!u.hasOwnProperty(l[2]))break;i=i.prev}for(;i&&!i.startOfLine;)i=i.prev;return i?i.indent+w:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})});
},{"../../lib/codemirror":15}],22:[function(require,module,exports){
if(Function.prototype.bind||(Function.prototype.bind=function(e){"use strict";if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),function(){"use strict";var e=Object.prototype,t=e.__defineGetter__,r=e.__defineSetter__,n=e.__lookupGetter__,o=e.__lookupSetter__,i=e.hasOwnProperty;t&&r&&n&&o&&(Object.defineProperty||(Object.defineProperty=function(e,a,c){if(arguments.length<3)throw new TypeError("Arguments not optional");if(a+="",i.call(c,"value")&&(n.call(e,a)||o.call(e,a)||(e[a]=c.value),i.call(c,"get")||i.call(c,"set")))throw new TypeError("Cannot specify an accessor and a value");if(!(c.writable&&c.enumerable&&c.configurable))throw new TypeError("This implementation of Object.defineProperty does not support false for configurable, enumerable, or writable.");return c.get&&t.call(e,a,c.get),c.set&&r.call(e,a,c.set),e}),Object.getOwnPropertyDescriptor||(Object.getOwnPropertyDescriptor=function(e,t){if(arguments.length<2)throw new TypeError("Arguments not optional.");t+="";var r={configurable:!0,enumerable:!0,writable:!0},a=n.call(e,t),c=o.call(e,t);return i.call(e,t)?a||c?(delete r.writable,r.get=r.set=void 0,a&&(r.get=a),c&&(r.set=c),r):(r.value=e[t],r):r}),Object.defineProperties||(Object.defineProperties=function(e,t){var r;for(r in t)i.call(t,r)&&Object.defineProperty(e,r,t[r])}))}(),!(document.documentElement.dataset||Object.getOwnPropertyDescriptor(Element.prototype,"dataset")&&Object.getOwnPropertyDescriptor(Element.prototype,"dataset").get)){var propDescriptor={enumerable:!0,get:function(){"use strict";var e,t,r,n,o,i,a=this,c=this.attributes,p=c.length,l=function(e){return e.charAt(1).toUpperCase()},s=function(){return this},u=function(e,t){return"undefined"!=typeof t?this.setAttribute(e,t):this.removeAttribute(e)};try{({}).__defineGetter__("test",function(){}),t={}}catch(f){t=document.createElement("div")}for(e=0;p>e;e++)if(i=c[e],i&&i.name&&/^data-\w[\w\-]*$/.test(i.name)){r=i.value,n=i.name,o=n.substr(5).replace(/-./g,l);try{Object.defineProperty(t,o,{enumerable:this.enumerable,get:s.bind(r||""),set:u.bind(a,n)})}catch(b){t[o]=r}}return t}};try{Object.defineProperty(Element.prototype,"dataset",propDescriptor)}catch(e){propDescriptor.enumerable=!1,Object.defineProperty(Element.prototype,"dataset",propDescriptor)}}
},{}],23:[function(require,module,exports){
var domify=require("domify"),tpl='<div class="dialog">\n  <div class="dialog-box">\n    <div class="dialog-message"></div>\n    <div class="dialog-actions"></div>\n  </div>\n</div>\n',classie=require("classie"),oneBtn='<button class="dialog-close dialog-continue btn"></button>\n',twoBtn='<button class="dialog-close btn"></button>\n<button class="dialog-continue primary-btn"></button>\n',key=require("keymaster"),animEvent=require("compose-animevent"),Wagon=require("compose-wagon"),bean=require("bean");require("compose-dataset-shim"),module.exports=Wagon.extend({events:{"click .dialog-continue":"continueAction","click .dialog-close":"closeAction",one:{animationend:"tab"}},initialize:function(){this.options.close=this.options.close||"Cancel",this.render(),this.bindKeyboardEvents()},bindKeyboardEvents:function(){key("tab",this.tab.bind(this)),key("enter",this.continueAction.bind(this)),key("esc",this.closeAction.bind(this))},remove:function(){key.unbind("tab, enter, esc"),Wagon.prototype.remove.apply(this,arguments)},show:function(){return document.body.appendChild(this.el),this},tab:function(t){t&&t.preventDefault(),document.activeElement!=this.closeButton?this.closeButton.focus():this.continueButton.focus()},closeAction:function(t){t&&t.preventDefault(),this.closeButton.focus(),classie.add(this.closeButton,"active"),this.close(function(){this.options.onDismiss&&this.options.onDismiss()}.bind(this))},continueAction:function(t){t&&t.preventDefault(),this.continueButton.focus(),classie.add(this.continueButton,"active"),this.close(function(){this.options.submit?this.options.submit.nodeType?this.options.submit.submit():(form=document.querySelector(this.options.submit),"true"==form.dataset.remote?bean.fire(form,"submit"):form.submit()):this.options.follow&&(this.options.follow.match(/^https?:\/\//)?window.location=this.options.follow:window.location.href=this.options.follow),this.options.onConfirm&&this.options.onConfirm()}.bind(this))},close:function(t){classie.add(this.el,"dismiss"),animEvent.one(this.el,"end",function(){t&&t(),this.remove()}.bind(this))},render:function(){var t=domify(tpl);this.options.continue?(t.querySelector(".dialog-actions").innerHTML=twoBtn,this.continueButton=t.querySelector(".dialog-continue"),this.continueButton.textContent=this.options.continue,this.options.destructive&&(classie.remove(this.continueButton,"primary-btn"),classie.add(this.continueButton,"primary-destroy-btn"))):t.querySelector(".dialog-actions").innerHTML=oneBtn,this.closeButton=t.querySelector(".dialog-close"),t.querySelector(".dialog-close").textContent=this.options.close;var i=t.querySelector(".dialog-message");return this.options.messageHTML?i.innerHTML=this.options.messageHTML:(this.options.title&&(i.innerHTML+="<h2>"+this.options.title+"</h2>"),this.options.message&&(i.innerHTML+="<p>"+this.options.message+"</p>")),this.el=t,this}});
},{"bean":10,"classie":11,"compose-animevent":24,"compose-dataset-shim":22,"compose-wagon":25,"domify":47,"keymaster":26}],24:[function(require,module,exports){
function setEvent(e,n,t,o){return supported?(t=cssAnimEventTypes[t])?void bean[e](n,t,o):(console.error("cssAnimEventTypes does not support event: "+t),!1):o()}function on(e,n,t){setEvent("on",e,n,t)}function one(e,n,t){setEvent("one",e,n,t)}function off(e,n,t){setEvent("off",e,n,t)}function camelCaseEventTypes(e){return e=e||"",{start:e+"AnimationStart",end:e+"AnimationEnd",iteration:e+"AnimationIteration"}}function lowerCaseEventTypes(e){return e=e||"",{start:e+"animationstart",end:e+"animationend",iteration:e+"animationiteration"}}function getAnimationEventTypes(){var e=["webkit","Moz","O",""],n=document.documentElement.style;if(void 0!==n.animationName)return lowerCaseEventTypes();for(var t,o=0,i=e.length;i>o;o++)if(t=e[o],void 0!==n[t+"AnimationName"]){if(0===o)return camelCaseEventTypes(t.toLowerCase());if(1===o)return lowerCaseEventTypes();if(2===o)return lowerCaseEventTypes(t.toLowerCase())}return{}}var cssAnimEventTypes=getAnimationEventTypes(),bean=require("bean"),supported=void 0!==cssAnimEventTypes.start;module.exports={on:on,off:off,one:one,types:cssAnimEventTypes};
},{"bean":10}],25:[function(require,module,exports){
function Wagon(e){this.options=e||{},this.el=this.options.el||null,this.cid=_.uniqueId("c"),this.initialize.apply(this,arguments),this.delegateEvents()}function extend(e,t){var n,i=this;n=e&&_.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},_.extend(n,i,t);var o=function(){this.constructor=n};return o.prototype=i.prototype,n.prototype=new o,e&&_.extend(n.prototype,e),n.__super__=i.prototype,n}function eventDelegator(e,t,n){for(var i in t)if("one"!==i){var o=t[i];if(_.isFunction(o)||(o=this[t[i]]),!o)throw new Error("Event handler "+i+" not found.");var r=i.match(delegateEventSplitter),a=r[1],s=r[2];if(o=_.bind(o,this),0===a.indexOf("animation")){if(cssEventName=animevent.types[a.replace("animation","")],!cssEventName)throw new Error("Event "+a+" is not supported.");a=cssEventName}this.cid&&(a+="."+this.cid);var p=n?n:"on";""!==s?(bean[p](e,a,s,o),"click"===a&&bean[p](e,a,s,tap(o))):(bean[p](e,a,o),"click"===a&&bean[p](e,a,tap(o)))}else eventDelegator.call(this,e,t[i],"one");return this}var _=require("lodash"),bean=require("bean"),tap=require("compose-tap-event"),animevent=require("compose-animevent");module.exports=Wagon;var delegateEventSplitter=/^(\S+)\s*(.*)$/,noop=function(){};Wagon.prototype.initialize=noop,Wagon.prototype.delegateEvents=function(e){return e||(e=_.result(this,"events"))?(this.undelegateEvents(),eventDelegator.call(this,this.el,e)):this},Wagon.prototype.undelegateEvents=function(){return bean.off(this.el,"."+this.cid),this},Wagon.prototype.remove=function(){return this.undelegateEvents(),this.el.parentNode.removeChild(this.el),this},Wagon.extend=function(){return extend.apply(this,arguments)};
},{"bean":10,"compose-animevent":24,"compose-tap-event":46,"lodash":48}],26:[function(require,module,exports){
!function(e){function n(e,n){for(var t=e.length;t--;)if(e[t]===n)return t;return-1}function t(e,n){if(e.length!=n.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function o(e){for(m in b)b[m]=e[T[m]]}function r(e){var t,r,i,l,c,u;if(t=e.keyCode,-1==n(S,t)&&S.push(t),(93==t||224==t)&&(t=91),t in b){b[t]=!0;for(i in C)C[i]==t&&(f[i]=!0)}else if(o(e),f.filter.call(this,e)&&t in E)for(u=p(),l=0;l<E[t].length;l++)if(r=E[t][l],r.scope==u||"all"==r.scope){c=r.mods.length>0;for(i in b)(!b[i]&&n(r.mods,+i)>-1||b[i]&&-1==n(r.mods,+i))&&(c=!1);(0!=r.mods.length||b[16]||b[18]||b[17]||b[91])&&!c||r.method(e,r)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function i(e){var t,o=e.keyCode,r=n(S,o);if(r>=0&&S.splice(r,1),(93==o||224==o)&&(o=91),o in b){b[o]=!1;for(t in C)C[t]==o&&(f[t]=!1)}}function l(){for(m in b)b[m]=!1;for(m in C)f[m]=!1}function f(e,n,t){var o,r;o=g(e),void 0===t&&(t=n,n="all");for(var i=0;i<o.length;i++)r=[],e=o[i].split("+"),e.length>1&&(r=v(e),e=[e[e.length-1]]),e=e[0],e=P(e),e in E||(E[e]=[]),E[e].push({shortcut:o[i],scope:n,method:t,key:o[i],mods:r})}function c(e,n){var o,r,i,l,f,c=[];for(o=g(e),l=0;l<o.length;l++){if(r=o[l].split("+"),r.length>1&&(c=v(r),e=r[r.length-1]),e=P(e),void 0===n&&(n=p()),!E[e])return;for(i=0;i<E[e].length;i++)f=E[e][i],f.scope===n&&t(f.mods,c)&&(E[e][i]={})}}function u(e){return"string"==typeof e&&(e=P(e)),-1!=n(S,e)}function a(){return S.slice(0)}function s(e){var n=(e.target||e.srcElement).tagName;return!("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)}function d(e){w=e||"all"}function p(){return w||"all"}function h(e){var n,t,o;for(n in E)for(t=E[n],o=0;o<t.length;)t[o].scope===e?t.splice(o,1):o++}function g(e){var n;return e=e.replace(/\s/g,""),n=e.split(","),""==n[n.length-1]&&(n[n.length-2]+=","),n}function v(e){for(var n=e.slice(0,e.length-1),t=0;t<n.length;t++)n[t]=C[n[t]];return n}function y(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent&&e.attachEvent("on"+n,function(){t(window.event)})}function k(){var n=e.key;return e.key=A,n}var m,E={},b={16:!1,18:!1,17:!1,91:!1},w="all",C={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},K={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},P=function(e){return K[e]||e.toUpperCase().charCodeAt(0)},S=[];for(m=1;20>m;m++)K["f"+m]=111+m;var T={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(m in C)f[m]=!1;y(document,"keydown",function(e){r(e)}),y(document,"keyup",i),y(window,"focus",l);var A=e.key;e.key=f,e.key.setScope=d,e.key.getScope=p,e.key.deleteScope=h,e.key.filter=s,e.key.isPressed=u,e.key.getPressedKeyCodes=a,e.key.noConflict=k,e.key.unbind=c,"undefined"!=typeof module&&(module.exports=f)}(this);
},{}],27:[function(require,module,exports){
function notify(e,s){s||(s=e,e="normal"),"progress"==e&&(e="action");var n=_.isString(s)?{message:s,type:e}:_.merge(s,{type:e});return _.defaults(n,defaultsByType[e]),messages.addMessage(n)}var _=require("lodash"),messages=require("./lib/message-collection"),defaultsByType={error:{keep:!0},normal:{dismissAfter:2.5},success:{dismissAfter:2.5},action:{safeFor:1,delay:500}};module.exports=notify,notify.normal=notify.bind(null,"normal"),notify.success=notify.bind(null,"success"),notify.error=notify.bind(null,"error"),notify.action=notify.bind(null,"action"),notify.progress=notify.bind(null,"action"),notify.clear=messages.clear.bind(messages);
},{"./lib/message-collection":28,"lodash":48}],28:[function(require,module,exports){
var _=require("lodash"),Tetromino=require("compose-tetromino"),Message=require("./message"),MessageView=require("./message-view"),debug=require("debug")("notifications:collection"),queue=[],currentId=0,MessageCollection=Tetromino.extend({initialize:function(){debug("initialize"),this.setTimestamp()},addMessage:function(e){var u=++currentId;debug("addMessage (id #%d)",u);var s=new Message(_.merge(e,{id:u})).once("remove",this.removeMessage.bind(this,u));return queue.push(s),debug("pushed message to queue (id #%d)",u),this.setTimestamp(),queue.length>1?queue[0].destruct():this.next(),s},removeMessage:function(e){debug("removeMessage (id #%d)",e);var u=_.findIndex(queue,function(u){return u.id===e});debug("queue.length = %d",queue.length),u>-1&&queue.splice(u,1),debug("queue.length",queue.length),queue.length&&this.next()},setTimestamp:function(){debug("setTimestamp"),this.time=Date.now()},next:function(){debug("next (id #%d)",queue[0].id),new MessageView({message:queue[0]}),queue[0].start()},clear:function(e){debug("clear force = %s",e),debug("queue = %j",queue),this.setTimestamp(),!queue[0]||queue[0].keep&&!e||(debug("dismissing message id = %d",queue[0]),queue[0].dismiss())}});module.exports=new MessageCollection;
},{"./message":30,"./message-view":29,"compose-tetromino":32,"debug":36,"lodash":48}],29:[function(require,module,exports){
var _=require("lodash"),domify=require("domify"),Wagon=require("compose-wagon"),bean=require("bean"),classie=require("classie"),animevent=require("compose-animevent"),debug=require("debug")("notifications:view"),tpl='<div class="notification">\n  <div class="notification-content">\n    <div class="notification-message"></div>\n    <a class="notification-close" href="#" title="dismiss">\n      <span class="x_icon" aria-hidden="true"></span>\n      <span class="hidden_label">close</span>\n    </a>\n  </div>\n</div>';module.exports=Wagon.extend({events:{"click .notification-close":"dismiss"},initialize:function(e){debug("initialize (id #%d)",e.message.id),this.message=e.message,this.message.once("dismiss",this.dismiss.bind(this)),this.render()},render:function(){debug("render (id #%d)",this.message.id),this.message.renderedAt=Date.now();var e=domify(tpl);e.querySelector(".notification-message").innerHTML=this.message.message,this.message.type&&classie.add(e,this.message.type);var i=this;return this.handleKeyUp=function(e){27===e.keyCode&&i.dismiss.call(i,e)},bean.on(document,"keyup",this.handleKeyUp),document.body.appendChild(e),this.el=e,this},dismiss:function(e){debug("dismiss (id #%d)",this.message.id),e&&e.preventDefault(),animevent.one(this.el,"end",this.remove.bind(this)),classie.add(this.el,"dismiss")}});
},{"bean":10,"classie":11,"compose-animevent":31,"compose-wagon":35,"debug":36,"domify":47,"lodash":48}],30:[function(require,module,exports){
var _=require("lodash"),Tetromino=require("compose-tetromino"),debug=require("debug")("notifications:message"),defaults={message:"Just what do you think you're doing, <strong>Dave</strong>.",safeFor:2,keep:!1};module.exports=Tetromino.extend({initialize:function(i){_.extend(this,i),_.defaults(this,defaults),debug("initialize (id #%d)",this.id)},start:function(){debug("start (id #%d)",this.id),this.dismissAfter&&(this.timeout=setTimeout(this.dismiss.bind(this),1e3*this.dismissAfter))},destruct:function(){debug("destruct (id #%d)",this.id);var i=Math.max(this.renderedAt+1e3*this.safeFor-Date.now(),0);if(this.dismissAfter){var e=Math.max(this.renderedAt+1e3*this.dismissAfter-Date.now(),0);e>i&&(clearTimeout(this.timeout),_.delay(this.dismiss.bind(this),i))}else _.delay(this.dismiss.bind(this),i)},dismiss:function(i){i=i||0===i?i:300,debug("dismiss (id #%d), time = %d",this.id,i),this.emit("dismiss"),debug("emitted 'dismiss' event for message id = #%d",this.id),_.delay(function(){this.emit("remove"),debug("emitted 'remove' event for message id = #%d",this.id)}.bind(this),i)}});
},{"compose-tetromino":32,"debug":36,"lodash":48}],31:[function(require,module,exports){
module.exports=require(24)
},{"/app/node_modules/compose-dialog/node_modules/compose-animevent/index.js":24,"bean":10}],32:[function(require,module,exports){
function Tetromino(t){this.options=t||{},this._eventEmitter=new EventEmitter2,this.initialize.apply(this,arguments)}var EventEmitter2=require("eventemitter2").EventEmitter2,extend=require("compose-extend");module.exports=Tetromino;var noop=function(){};Tetromino.prototype.initialize=noop,Tetromino.prototype.emit=function(){return this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},Tetromino.prototype.on=function(){return this._eventEmitter.on.apply(this._eventEmitter,arguments),this},Tetromino.prototype.once=function(){return this._eventEmitter.once.apply(this._eventEmitter,arguments),this},Tetromino.prototype.off=function(){return this._eventEmitter.off.apply(this._eventEmitter,arguments),this},Tetromino.prototype.onAll=function(){return this._eventEmitter.onAny.apply(this._eventEmitter,arguments),this},Tetromino.prototype.offAll=function(){return this._eventEmitter.offAny.apply(this._eventEmitter,arguments),this},Tetromino.prototype.listeners=function(){return this._eventEmitter.listeners.apply(this._eventEmitter,arguments),this},Tetromino.extend=function(){return extend.apply(this,arguments)};
},{"compose-extend":33,"eventemitter2":34}],33:[function(require,module,exports){
function extend(t,r){var e,n=this;e=t&&_.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},_.extend(e,n,r);var o=function(){this.constructor=e};return o.prototype=n.prototype,e.prototype=new o,t&&_.extend(e.prototype,t),e.__super__=n.prototype,e}module.exports=extend;var _={has:function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},extend:function(t){for(var r=1;r<arguments.length;++r){var e=arguments[r];if(e)for(var n in e)t[n]=e[n]}return t}};
},{}],34:[function(require,module,exports){
!function(){function e(){this._events={},this._conf&&t.call(this,this._conf)}function t(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function s(e){this._events={},this.newListener=!1,t.call(this,e)}function i(e,t,s,n){if(!s)return[];var r,l,o,h,a,f,c,u=[],_=t.length,p=t[n],v=t[n+1];if(n===_&&s._listeners){if("function"==typeof s._listeners)return e&&e.push(s._listeners),[s];for(r=0,l=s._listeners.length;l>r;r++)e&&e.push(s._listeners[r]);return[s]}if("*"===p||"**"===p||s[p]){if("*"===p){for(o in s)"_listeners"!==o&&s.hasOwnProperty(o)&&(u=u.concat(i(e,t,s[o],n+1)));return u}if("**"===p){c=n+1===_||n+2===_&&"*"===v,c&&s._listeners&&(u=u.concat(i(e,t,s,_)));for(o in s)"_listeners"!==o&&s.hasOwnProperty(o)&&("*"===o||"**"===o?(s[o]._listeners&&!c&&(u=u.concat(i(e,t,s[o],_))),u=u.concat(i(e,t,s[o],n))):u=u.concat(o===v?i(e,t,s[o],n+2):i(e,t,s[o],n)));return u}u=u.concat(i(e,t,s[p],n+1))}if(h=s["*"],h&&i(e,t,h,n+1),a=s["**"])if(_>n){a._listeners&&i(e,t,a,_);for(o in a)"_listeners"!==o&&a.hasOwnProperty(o)&&(o===v?i(e,t,a[o],n+2):o===p?i(e,t,a[o],n+1):(f={},f[o]=a[o],i(e,t,{"**":f},n+1)))}else a._listeners?i(e,t,a,_):a["*"]&&a["*"]._listeners&&i(e,t,a["*"],_);return u}function n(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var s=0,i=e.length;i>s+1;s++)if("**"===e[s]&&"**"===e[s+1])return;for(var n=this.listenerTree,o=e.shift();o;){if(n[o]||(n[o]={}),n=n[o],0===e.length){if(n._listeners){if("function"==typeof n._listeners)n._listeners=[n._listeners,t];else if(r(n._listeners)&&(n._listeners.push(t),!n._listeners.warned)){var h=l;"undefined"!=typeof this._events.maxListeners&&(h=this._events.maxListeners),h>0&&n._listeners.length>h&&(n._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",n._listeners.length),console.trace())}}else n._listeners=t;return!0}o=e.shift()}return!0}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},l=10;s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},s.prototype.event="",s.prototype.once=function(e,t){return this.many(e,1,t),this},s.prototype.many=function(e,t,s){function i(){0===--t&&n.off(e,i),s.apply(this,arguments)}var n=this;if("function"!=typeof s)throw new Error("many only accepts instances of Function");return i._origin=s,this.on(e,i),n},s.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var s=arguments.length,n=new Array(s-1),r=1;s>r;r++)n[r-1]=arguments[r];for(r=0,s=this._all.length;s>r;r++)this.event=t,this._all[r].apply(this,n)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var l;if(this.wildcard){l=[];var o="string"==typeof t?t.split(this.delimiter):t.slice();i.call(this,l,o,this.listenerTree,0)}else l=this._events[t];if("function"==typeof l){if(this.event=t,1===arguments.length)l.call(this);else if(arguments.length>1)switch(arguments.length){case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(var s=arguments.length,n=new Array(s-1),r=1;s>r;r++)n[r-1]=arguments[r];l.apply(this,n)}return!0}if(l){for(var s=arguments.length,n=new Array(s-1),r=1;s>r;r++)n[r-1]=arguments[r];for(var h=l.slice(),r=0,s=h.length;s>r;r++)this.event=t,h[r].apply(this,n);return h.length>0||!!this._all}return!!this._all},s.prototype.on=function(t,s){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof s)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,s),this.wildcard)return n.call(this,t,s),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],s];else if(r(this._events[t])&&(this._events[t].push(s),!this._events[t].warned)){var i=l;"undefined"!=typeof this._events.maxListeners&&(i=this._events.maxListeners),i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=s;return this},s.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var s,n=[];if(this.wildcard){var l="string"==typeof e?e.split(this.delimiter):e.slice();n=i.call(this,null,l,this.listenerTree,0)}else{if(!this._events[e])return this;s=this._events[e],n.push({_listeners:s})}for(var o=0;o<n.length;o++){var h=n[o];if(s=h._listeners,r(s)){for(var a=-1,f=0,c=s.length;c>f;f++)if(s[f]===t||s[f].listener&&s[f].listener===t||s[f]._origin&&s[f]._origin===t){a=f;break}if(0>a)continue;return this.wildcard?h._listeners.splice(a,1):this._events[e].splice(a,1),0===s.length&&(this.wildcard?delete h._listeners:delete this._events[e]),this}(s===t||s.listener&&s.listener===t||s._origin&&s._origin===t)&&(this.wildcard?delete h._listeners:delete this._events[e])}return this},s.prototype.offAny=function(e){var t,s=0,i=0;if(e&&this._all&&this._all.length>0){for(t=this._all,s=0,i=t.length;i>s;s++)if(e===t[s])return t.splice(s,1),this}else this._all=[];return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var s="string"==typeof t?t.split(this.delimiter):t.slice(),n=i.call(this,null,s,this.listenerTree,0),r=0;r<n.length;r++){var l=n[r];l._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},s.prototype.listeners=function(t){if(this.wildcard){var s=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return i.call(this,s,n,this.listenerTree,0),s}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),r(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return s}):"object"==typeof exports?exports.EventEmitter2=s:window.EventEmitter2=s}();
},{}],35:[function(require,module,exports){
module.exports=require(25)
},{"/app/node_modules/compose-dialog/node_modules/compose-wagon/index.js":25,"bean":10,"compose-animevent":31,"compose-tap-event":46,"lodash":48}],36:[function(require,module,exports){
function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var o=arguments,e=this.useColors;if(o[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+o[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),!e)return o;var r="color: "+this.color;o=[o[0],r,"color: inherit"].concat(Array.prototype.slice.call(o,1));var t=0,n=0;return o[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(t++,"%c"===o&&(n=t))}),o.splice(n,0,r),o}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(o){try{null==o?localStorage.removeItem("debug"):localStorage.debug=o}catch(e){}}function load(){var o;try{o=localStorage.debug}catch(e){}return o}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(o){return JSON.stringify(o)},exports.enable(load());
},{"./debug":37}],37:[function(require,module,exports){
function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||console.log.bind(console);p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;
},{"ms":38}],38:[function(require,module,exports){
function parse(e){var r=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"h":return a*h;case"minutes":case"minute":case"m":return a*m;case"seconds":case"second":case"s":return a*s;case"ms":return a}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e.long?long(s):short(s)};
},{}],39:[function(require,module,exports){
var Wagon=require("wagon"),request=require("superagent"),serialize=require("form-serialize"),bean=require("bean");module.exports=Wagon.extend({events:{"ajax:success":"success","ajax:error":"error","ajax:beforeSend":"beforeSend",submit:"submit"},$:function(){return this.el.querySelector.apply(this.el,arguments)||{}},submit:function(e){e.preventDefault();var t,r=(this.el.dataset.method||this.el.getAttribute("method")||"get").toLowerCase(),s=this.el.dataset.url||this.el.getAttribute("action"),a=serialize(this.el),i=this.el.dataset.type||void 0;return"delete"===r&&(r="del"),this.currentRequest=t=request[r](s),a&&t.send(a),i?t.type(i):t.set("Accept","*/*;q=0.5, text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"),bean.fire(this.el,"ajax:beforeSend",[t]),t.end(this._handleResponse.bind(this)),t},_handleResponse:function(e,t){e?bean.fire(this.el,"ajax:error",[this.currentRequest.xhr,this.currentRequest.xhr.status,e]):t.error?bean.fire(this.el,"ajax:error",[this.currentRequest.xhr,t.status,t.error]):bean.fire(this.el,"ajax:success",[t.body,t.status,this.currentRequest.xhr]),bean.fire(this.el,"ajax:complete",[this.currentRequest.xhr,t?t.status:0]),delete this.currentRequest},beforeSend:function(){},success:function(){},error:function(){}});
},{"bean":10,"form-serialize":42,"superagent":43,"wagon":40}],40:[function(require,module,exports){
module.exports=require(25)
},{"/app/node_modules/compose-dialog/node_modules/compose-wagon/index.js":25,"bean":10,"compose-animevent":41,"compose-tap-event":46,"lodash":48}],41:[function(require,module,exports){
module.exports=require(24)
},{"/app/node_modules/compose-dialog/node_modules/compose-animevent/index.js":24,"bean":10}],42:[function(require,module,exports){
function serialize(e,r){"object"!=typeof r?r={hash:!!r}:void 0===r.hash&&(r.hash=!0);for(var t=r.hash?{}:"",a=r.serializer||r.hash?hash_serializer:str_serialize,s=e.elements||[],i=0;i<s.length;++i){var c=s[i];if((r.disabled||!c.disabled)&&c.name&&k_r_success_contrls.test(c.nodeName)&&!k_r_submitter.test(c.type)){var n=c.name,o=c.value;if("checkbox"!==c.type&&"radio"!==c.type||c.checked||(o=void 0),o)if("select-multiple"!==c.type)t=a(t,n,o);else{o=[];for(var r=c.options,i=0;i<r.length;++i){var _=r[i];_.selected&&(t=a(t,n,_.value))}}}}return t}function hash_serializer(e,r,t){if(r in e){var a=e[r];Array.isArray(a)||(e[r]=[a]),e[r].push(t)}else has_brackets(r)?extract_from_brackets(e,r,t):e[r]=t;return e}function str_serialize(e,r,t){return t=t.replace(/(\r)?\n/g,"\r\n"),t=encodeURIComponent(t),t=t.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(r)+"="+t}function has_brackets(e){return e.match(brackets_regex)}function matches_between_brackets(e){for(var r,t=new RegExp(brackets_regex),a=[];r=t.exec(e);)a.push(r[1]);return a}function extract_from_brackets(e,r,t){var a=r.match(brackeks_prefix_regex)[1];e[a]||(e[a]={});for(var s=e[a],i=matches_between_brackets(r),c=i.length,n=0;c>n;n++){var o=i[n],_=c===n+1;if(_){var l=s[o];l?(Array.isArray(l)||(s[o]=[l]),s[o].push(t)):s[o]=t}else s[o]={},s=s[o]}s=t}var k_r_submitter=/^(?:submit|button|image|reset|file)$/i,k_r_success_contrls=/^(?:input|select|textarea|keygen)/i,brackets_regex=/\[(.+?)\]/g,brackeks_prefix_regex=/^(.+?)\[/;module.exports=serialize;
},{}],43:[function(require,module,exports){
function noop(){}function isHost(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function getXHR(){if(root.XMLHttpRequest&&("file:"!=root.location.protocol||!root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function isObject(t){return t===Object(t)}function serialize(t){if(!isObject(t))return t;var e=[];for(var r in t)null!=t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}function parseString(t){for(var e,r,s={},i=t.split("&"),o=0,n=i.length;n>o;++o)r=i[o],e=r.split("="),s[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return s}function parseHeader(t){var e,r,s,i,o=t.split(/\r?\n/),n={};o.pop();for(var u=0,a=o.length;a>u;++u)r=o[u],e=r.indexOf(":"),s=r.slice(0,e).toLowerCase(),i=trim(r.slice(e+1)),n[s]=i;return n}function type(t){return t.split(/ *; */).shift()}function params(t){return reduce(t.split(/ *; */),function(t,e){var r=e.split(/ *= */),s=r.shift(),i=r.shift();return s&&i&&(t[s]=i),t},{})}function Response(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function Request(t,e){var r=this;Emitter.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var e=new Response(r);"HEAD"==t&&(e.text=null),r.callback(null,e)})}function request(t,e){return"function"==typeof e?new Request("GET",t).end(e):1==arguments.length?new Request("GET",t):new Request(t,e)}var Emitter=require("emitter"),reduce=require("reduce"),root="undefined"==typeof window?this:window,trim="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(t){return this.header[t.toLowerCase()]},Response.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=type(t);var e=params(t);for(var r in e)this[r]=e[r]},Response.prototype.parseBody=function(t){var e=request.parse[this.type];return e?e(t):null},Response.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},Response.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,s="cannot "+e+" "+r+" ("+this.status+")",i=new Error(s);return i.status=this.status,i.method=e,i.url=r,i},request.Response=Response,Emitter(Request.prototype),Request.prototype.use=function(t){return t(this),this},Request.prototype.timeout=function(t){return this._timeout=t,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(t,e){if(isObject(t)){for(var r in t)this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},Request.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},Request.prototype.type=function(t){return this.set("Content-Type",request.types[t]||t),this},Request.prototype.accept=function(t){return this.set("Accept",request.types[t]||t),this},Request.prototype.auth=function(t,e){var r=btoa(t+":"+e);return this.set("Authorization","Basic "+r),this},Request.prototype.query=function(t){return"string"!=typeof t&&(t=serialize(t)),t&&this._query.push(t),this},Request.prototype.field=function(t,e){return this._formData||(this._formData=new FormData),this._formData.append(t,e),this},Request.prototype.attach=function(t,e,r){return this._formData||(this._formData=new FormData),this._formData.append(t,e,r),this},Request.prototype.send=function(t){var e=isObject(t),r=this.getHeader("Content-Type");if(e&&isObject(this._data))for(var s in t)this._data[s]=t[s];else"string"==typeof t?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(r||this.type("json"),this):this},Request.prototype.callback=function(t,e){var r=this._callback;return 2==r.length?r(t,e):t?this.emit("error",t):void r(e)},Request.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},Request.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(t){var e=this,r=this.xhr=getXHR(),s=this._query.join("&"),i=this._timeout,o=this._formData||this._data;if(this._callback=t||noop,r.onreadystatechange=function(){return 4==r.readyState?0==r.status?e.aborted?e.timeoutError():e.crossDomainError():void e.emit("end"):void 0},r.upload&&(r.upload.onprogress=function(t){t.percent=t.loaded/t.total*100,e.emit("progress",t)}),i&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},i)),s&&(s=request.serializeObject(s),this.url+=~this.url.indexOf("?")?"&"+s:"?"+s),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof o&&!isHost(o)){var n=request.serialize[this.getHeader("Content-Type")];n&&(o=n(o))}for(var u in this.header)null!=this.header[u]&&r.setRequestHeader(u,this.header[u]);return this.emit("request",this),r.send(o),this},request.Request=Request,request.get=function(t,e,r){var s=request("GET",t);return"function"==typeof e&&(r=e,e=null),e&&s.query(e),r&&s.end(r),s},request.head=function(t,e,r){var s=request("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.del=function(t,e){var r=request("DELETE",t);return e&&r.end(e),r},request.patch=function(t,e,r){var s=request("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.post=function(t,e,r){var s=request("POST",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},request.put=function(t,e,r){var s=request("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},module.exports=request;
},{"emitter":44,"reduce":45}],44:[function(require,module,exports){
function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};
},{}],45:[function(require,module,exports){
module.exports=function(l,n,e){for(var r=0,t=l.length,u=3==arguments.length?e:l[r++];t>r;)u=n.call(null,u,l[r],++r,l);return u};
},{}],46:[function(require,module,exports){
function Tap(n){function e(e){function t(t){if(e!==t&&(c(),!t.defaultPrevented)){var a=e.preventDefault,u=e.stopPropagation;t.stopPropagation=function(){u.call(e),u.call(t)},t.preventDefault=function(){a.call(e),a.call(t)},n.call(o,t)}}function c(n){e!==n&&(cancelEvents.forEach(function(n){document.removeEventListener(n,c)}),endEvents.forEach(function(n){document.removeEventListener(n,t)}))}if(e.touches&&!(e.touches.length>1)){var o=this;cancelEvents.forEach(function(n){document.addEventListener(n,c)}),endEvents.forEach(function(n){document.addEventListener(n,t)})}}return e.handler=n,e}var cancelEvents=["touchmove","touchcancel","touchstart"],endEvents=["touchend"];module.exports=Tap;
},{}],47:[function(require,module,exports){
function parse(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var a=/<([\w:]+)/.exec(e);if(!a)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=a[1];if("body"==r){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var i=map[r]||map._default,p=i[0],o=i[1],d=i[2],l=t.createElement("div");for(l.innerHTML=o+e+d;p--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var n=t.createDocumentFragment();l.firstChild;)n.appendChild(l.removeChild(l.firstChild));return n}module.exports=parse;var div=document.createElement("div");div.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';var innerHTMLBug=!div.getElementsByTagName("link").length;div=void 0;var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"],map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"],map.text=map.circle=map.ellipse=map.line=map.path=map.polygon=map.polyline=map.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];
},{}],48:[function(require,module,exports){
(function(n){(function(){function t(n,t,r){for(var e=(r||0)-1,u=n?n.length:0;++e<u;)if(n[e]===t)return e;return-1}function r(n,r){var e=typeof r;if(n=n.cache,"boolean"==e||null==r)return n[r]?0:-1;"number"!=e&&"string"!=e&&(e="object");var u="number"==e?r:d+r;return n=(n=n[e])&&n[u],"object"==e?n&&t(n,r)>-1?0:-1:n?0:-1}function e(n){var t=this.cache,r=typeof n;if("boolean"==r||null==n)t[n]=!0;else{"number"!=r&&"string"!=r&&(r="object");var e="number"==r?n:d+n,u=t[r]||(t[r]={});"object"==r?(u[e]||(u[e]=[])).push(n):u[e]=!0}}function u(n){return n.charCodeAt(0)}function o(n,t){for(var r=n.criteria,e=t.criteria,u=-1,o=r.length;++u<o;){var a=r[u],i=e[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.index-t.index}function a(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var i=l();i["false"]=i["null"]=i["true"]=i.undefined=!1;var f=l();for(f.array=n,f.cache=i,f.push=e;++t<r;)f.push(n[t]);return f}function i(n){return"\\"+H[n]}function f(){return g.pop()||[]}function l(){return y.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function c(n){n.length=0,g.length<_&&g.push(n)}function p(n){var t=n.cache;t&&p(t),n.array=n.cache=n.criteria=n.object=n.number=n.string=n.value=null,y.length<_&&y.push(n)}function s(n,t,r){t||(t=0),"undefined"==typeof r&&(r=n?n.length:0);for(var e=-1,u=r-t||0,o=Array(0>u?0:u);++e<u;)o[e]=n[t+e];return o}function v(n){function e(n){return n&&"object"==typeof n&&!Xe(n)&&De.call(n,"__wrapped__")?n:new g(n)}function g(n,t){this.__chain__=!!t,this.__wrapped__=n}function y(n){function t(){if(e){var n=s(e);Te.apply(n,arguments)}if(this instanceof t){var o=H(r.prototype),a=r.apply(o,n||arguments);return It(a)?a:o}return r.apply(u,n||arguments)}var r=n[0],e=n[2],u=n[4];return Qe(t,n),t}function _(n,t,r,e,u){if(r){var o=r(n);if("undefined"!=typeof o)return o}var a=It(n);if(!a)return n;var i=Oe.call(n);if(!U[i])return n;var l=He[i];switch(i){case B:case W:return new l(+n);case z:case K:return new l(n);case P:return o=l(n.source,O.exec(n)),o.lastIndex=n.lastIndex,o}var p=Xe(n);if(t){var v=!e;e||(e=f()),u||(u=f());for(var h=e.length;h--;)if(e[h]==n)return u[h];o=p?l(n.length):{}}else o=p?s(n):uu({},n);return p&&(De.call(n,"index")&&(o.index=n.index),De.call(n,"input")&&(o.input=n.input)),t?(e.push(n),u.push(o),(p?Qt:iu)(n,function(n,a){o[a]=_(n,t,r,e,u)}),v&&(c(e),c(u)),o):o}function H(n){return It(n)?qe(n):{}}function Q(n,t,r){if("function"!=typeof n)return Xr;if("undefined"==typeof t||!("prototype"in n))return n;var e=n.__bindData__;if("undefined"==typeof e&&(Je.funcNames&&(e=!n.name),e=e||!Je.funcDecomp,!e)){var u=Se.call(n);Je.funcNames||(e=!N.test(u)),e||(e=S.test(u),Qe(n,e))}if(e===!1||e!==!0&&1&e[1])return n;switch(r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)}}return Tr(n,t)}function X(n){function t(){var n=f?a:this;if(u){var h=s(u);Te.apply(h,arguments)}if((o||c)&&(h||(h=s(arguments)),o&&Te.apply(h,o),c&&h.length<i))return e|=16,X([r,p?e:-4&e,h,null,a,i]);if(h||(h=arguments),l&&(r=n[v]),this instanceof t){n=H(r.prototype);var g=r.apply(n,h);return It(g)?g:n}return r.apply(n,h)}var r=n[0],e=n[1],u=n[2],o=n[3],a=n[4],i=n[5],f=1&e,l=2&e,c=4&e,p=8&e,v=r;return Qe(t,n),t}function Y(n,e){var u=-1,o=ft(),i=n?n.length:0,f=i>=b&&o===t,l=[];if(f){var c=a(e);c?(o=r,e=c):f=!1}for(;++u<i;){var s=n[u];o(e,s)<0&&l.push(s)}return f&&p(e),l}function Z(n,t,r,e){for(var u=(e||0)-1,o=n?n.length:0,a=[];++u<o;){var i=n[u];if(i&&"object"==typeof i&&"number"==typeof i.length&&(Xe(i)||st(i))){t||(i=Z(i,t,r));var f=-1,l=i.length,c=a.length;for(a.length+=l;++f<l;)a[c++]=i[f]}else r||a.push(i)}return a}function tt(n,t,r,e,u,o){if(r){var a=r(n,t);if("undefined"!=typeof a)return!!a}if(n===t)return 0!==n||1/n==1/t;var i=typeof n,l=typeof t;if(!(n!==n||n&&G[i]||t&&G[l]))return!1;if(null==n||null==t)return n===t;var p=Oe.call(n),s=Oe.call(t);if(p==$&&(p=L),s==$&&(s=L),p!=s)return!1;switch(p){case B:case W:return+n==+t;case z:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case P:case K:return n==we(t)}var v=p==F;if(!v){var h=De.call(n,"__wrapped__"),g=De.call(t,"__wrapped__");if(h||g)return tt(h?n.__wrapped__:n,g?t.__wrapped__:t,r,e,u,o);if(p!=L)return!1;var y=n.constructor,m=t.constructor;if(y!=m&&!(Et(y)&&y instanceof y&&Et(m)&&m instanceof m)&&"constructor"in n&&"constructor"in t)return!1}var d=!u;u||(u=f()),o||(o=f());for(var b=u.length;b--;)if(u[b]==n)return o[b]==t;var _=0;if(a=!0,u.push(n),o.push(t),v){if(b=n.length,_=t.length,a=_==b,a||e)for(;_--;){var w=b,j=t[_];if(e)for(;w--&&!(a=tt(n[w],j,r,e,u,o)););else if(!(a=tt(n[_],j,r,e,u,o)))break}}else au(t,function(t,i,f){return De.call(f,i)?(_++,a=De.call(n,i)&&tt(n[i],t,r,e,u,o)):void 0}),a&&!e&&au(n,function(n,t,r){return De.call(r,t)?a=--_>-1:void 0});return u.pop(),o.pop(),d&&(c(u),c(o)),a}function rt(n,t,r,e,u){(Xe(t)?Qt:iu)(t,function(t,o){var a,i,f=t,l=n[o];if(t&&((i=Xe(t))||fu(t))){for(var c=e.length;c--;)if(a=e[c]==t){l=u[c];break}if(!a){var p;r&&(f=r(l,t),(p="undefined"!=typeof f)&&(l=f)),p||(l=i?Xe(l)?l:[]:fu(l)?l:{}),e.push(t),u.push(l),p||rt(l,t,r,e,u)}}else r&&(f=r(l,t),"undefined"==typeof f&&(f=t)),"undefined"!=typeof f&&(l=f);n[o]=l})}function et(n,t){return n+Ie(Ge()*(t-n+1))}function ut(n,e,u){var o=-1,i=ft(),l=n?n.length:0,s=[],v=!e&&l>=b&&i===t,h=u||v?f():s;if(v){var g=a(h);i=r,h=g}for(;++o<l;){var y=n[o],m=u?u(y,o,n):y;(e?!o||h[h.length-1]!==m:i(h,m)<0)&&((u||v)&&h.push(m),s.push(y))}return v?(c(h.array),p(h)):u&&c(h),s}function ot(n){return function(t,r,u){var o={};r=e.createCallback(r,u,3);var a=-1,i=t?t.length:0;if("number"==typeof i)for(;++a<i;){var f=t[a];n(o,f,r(f,a,t),t)}else iu(t,function(t,e,u){n(o,t,r(t,e,u),u)});return o}}function at(n,t,r,e,u,o){var a=1&t,i=2&t,f=4&t,l=16&t,c=32&t;if(!i&&!Et(n))throw new je;l&&!r.length&&(t&=-17,l=r=!1),c&&!e.length&&(t&=-33,c=e=!1);var p=n&&n.__bindData__;if(p&&p!==!0)return p=s(p),p[2]&&(p[2]=s(p[2])),p[3]&&(p[3]=s(p[3])),!a||1&p[1]||(p[4]=u),!a&&1&p[1]&&(t|=8),!f||4&p[1]||(p[5]=o),l&&Te.apply(p[2]||(p[2]=[]),r),c&&Be.apply(p[3]||(p[3]=[]),e),p[1]|=t,at.apply(null,p);var v=1==t||17===t?y:X;return v([n,t,r,e,u,o])}function it(n){return nu[n]}function ft(){var n=(n=e.indexOf)===mr?t:n;return n}function lt(n){return"function"==typeof n&&Ne.test(n)}function ct(n){var t,r;return n&&Oe.call(n)==L&&(t=n.constructor,!Et(t)||t instanceof t)?(au(n,function(n,t){r=t}),"undefined"==typeof r||De.call(n,r)):!1}function pt(n){return tu[n]}function st(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==$||!1}function vt(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r=t,t=!1),_(n,t,"function"==typeof r&&Q(r,e,1))}function ht(n,t,r){return _(n,!0,"function"==typeof t&&Q(t,r,1))}function gt(n,t){var r=H(n);return t?uu(r,t):r}function yt(n,t,r){var u;return t=e.createCallback(t,r,3),iu(n,function(n,r,e){return t(n,r,e)?(u=r,!1):void 0}),u}function mt(n,t,r){var u;return t=e.createCallback(t,r,3),bt(n,function(n,r,e){return t(n,r,e)?(u=r,!1):void 0}),u}function dt(n,t,r){var e=[];au(n,function(n,t){e.push(t,n)});var u=e.length;for(t=Q(t,r,3);u--&&t(e[u--],e[u],n)!==!1;);return n}function bt(n,t,r){var e=Ze(n),u=e.length;for(t=Q(t,r,3);u--;){var o=e[u];if(t(n[o],o,n)===!1)break}return n}function _t(n){var t=[];return au(n,function(n,r){Et(n)&&t.push(r)}),t.sort()}function wt(n,t){return n?De.call(n,t):!1}function jt(n){for(var t=-1,r=Ze(n),e=r.length,u={};++t<e;){var o=r[t];u[n[o]]=o}return u}function kt(n){return n===!0||n===!1||n&&"object"==typeof n&&Oe.call(n)==B||!1}function xt(n){return n&&"object"==typeof n&&Oe.call(n)==W||!1}function Ct(n){return n&&1===n.nodeType||!1}function Ot(n){var t=!0;if(!n)return t;var r=Oe.call(n),e=n.length;return r==F||r==K||r==$||r==L&&"number"==typeof e&&Et(n.splice)?!e:(iu(n,function(){return t=!1}),t)}function Nt(n,t,r,e){return tt(n,t,"function"==typeof r&&Q(r,e,2))}function Rt(n){return Le(n)&&!Pe(parseFloat(n))}function Et(n){return"function"==typeof n}function It(n){return!(!n||!G[typeof n])}function St(n){return Dt(n)&&n!=+n}function At(n){return null===n}function Dt(n){return"number"==typeof n||n&&"object"==typeof n&&Oe.call(n)==z||!1}function Tt(n){return n&&"object"==typeof n&&Oe.call(n)==P||!1}function $t(n){return"string"==typeof n||n&&"object"==typeof n&&Oe.call(n)==K||!1}function Ft(n){return"undefined"==typeof n}function Bt(n,t,r){var u={};return t=e.createCallback(t,r,3),iu(n,function(n,r,e){u[r]=t(n,r,e)}),u}function Wt(n){var t=arguments,r=2;if(!It(n))return n;if("number"!=typeof t[2]&&(r=t.length),r>3&&"function"==typeof t[r-2])var e=Q(t[--r-1],t[r--],2);else r>2&&"function"==typeof t[r-1]&&(e=t[--r]);for(var u=s(arguments,1,r),o=-1,a=f(),i=f();++o<r;)rt(n,u[o],e,a,i);return c(a),c(i),n}function qt(n,t,r){var u={};if("function"!=typeof t){var o=[];au(n,function(n,t){o.push(t)}),o=Y(o,Z(arguments,!0,!1,1));for(var a=-1,i=o.length;++a<i;){var f=o[a];u[f]=n[f]}}else t=e.createCallback(t,r,3),au(n,function(n,r,e){t(n,r,e)||(u[r]=n)});return u}function zt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function Lt(n,t,r){var u={};if("function"!=typeof t)for(var o=-1,a=Z(arguments,!0,!1,1),i=It(n)?a.length:0;++o<i;){var f=a[o];f in n&&(u[f]=n[f])}else t=e.createCallback(t,r,3),au(n,function(n,r,e){t(n,r,e)&&(u[r]=n)});return u}function Pt(n,t,r,u){var o=Xe(n);if(null==r)if(o)r=[];else{var a=n&&n.constructor,i=a&&a.prototype;r=H(i)}return t&&(t=e.createCallback(t,u,4),(o?Qt:iu)(n,function(n,e,u){return t(r,n,e,u)})),r}function Kt(n){for(var t=-1,r=Ze(n),e=r.length,u=ve(e);++t<e;)u[t]=n[r[t]];return u}function Ut(n){for(var t=arguments,r=-1,e=Z(t,!0,!1,1),u=t[2]&&t[2][t[1]]===n?1:e.length,o=ve(u);++r<u;)o[r]=n[e[r]];return o}function Mt(n,t,r){var e=-1,u=ft(),o=n?n.length:0,a=!1;return r=(0>r?Ue(0,o+r):r)||0,Xe(n)?a=u(n,t,r)>-1:"number"==typeof o?a=($t(n)?n.indexOf(t,r):u(n,t,r))>-1:iu(n,function(n){return++e>=r?!(a=n===t):void 0}),a}function Vt(n,t,r){var u=!0;t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a&&(u=!!t(n[o],o,n)););else iu(n,function(n,r,e){return u=!!t(n,r,e)});return u}function Gt(n,t,r){var u=[];t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a;){var i=n[o];t(i,o,n)&&u.push(i)}else iu(n,function(n,r,e){t(n,r,e)&&u.push(n)});return u}function Ht(n,t,r){t=e.createCallback(t,r,3);var u=-1,o=n?n.length:0;if("number"!=typeof o){var a;return iu(n,function(n,r,e){return t(n,r,e)?(a=n,!1):void 0}),a}for(;++u<o;){var i=n[u];if(t(i,u,n))return i}}function Jt(n,t,r){var u;return t=e.createCallback(t,r,3),Xt(n,function(n,r,e){return t(n,r,e)?(u=n,!1):void 0}),u}function Qt(n,t,r){var e=-1,u=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof u)for(;++e<u&&t(n[e],e,n)!==!1;);else iu(n,t);return n}function Xt(n,t,r){var e=n?n.length:0;if(t=t&&"undefined"==typeof r?t:Q(t,r,3),"number"==typeof e)for(;e--&&t(n[e],e,n)!==!1;);else{var u=Ze(n);e=u.length,iu(n,function(n,r,o){return r=u?u[--e]:--e,t(o[r],r,o)})}return n}function Yt(n,t){var r=s(arguments,2),e=-1,u="function"==typeof t,o=n?n.length:0,a=ve("number"==typeof o?o:0);return Qt(n,function(n){a[++e]=(u?t:n[t]).apply(n,r)}),a}function Zt(n,t,r){var u=-1,o=n?n.length:0;if(t=e.createCallback(t,r,3),"number"==typeof o)for(var a=ve(o);++u<o;)a[u]=t(n[u],u,n);else a=[],iu(n,function(n,r,e){a[++u]=t(n,r,e)});return a}function nr(n,t,r){var o=-1/0,a=o;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var i=-1,f=n.length;++i<f;){var l=n[i];l>a&&(a=l)}else t=null==t&&$t(n)?u:e.createCallback(t,r,3),Qt(n,function(n,r,e){var u=t(n,r,e);u>o&&(o=u,a=n)});return a}function tr(n,t,r){var o=1/0,a=o;if("function"!=typeof t&&r&&r[t]===n&&(t=null),null==t&&Xe(n))for(var i=-1,f=n.length;++i<f;){var l=n[i];a>l&&(a=l)}else t=null==t&&$t(n)?u:e.createCallback(t,r,3),Qt(n,function(n,r,e){var u=t(n,r,e);o>u&&(o=u,a=n)});return a}function rr(n,t,r,u){if(!n)return r;var o=arguments.length<3;t=e.createCallback(t,u,4);var a=-1,i=n.length;if("number"==typeof i)for(o&&(r=n[++a]);++a<i;)r=t(r,n[a],a,n);else iu(n,function(n,e,u){r=o?(o=!1,n):t(r,n,e,u)});return r}function er(n,t,r,u){var o=arguments.length<3;return t=e.createCallback(t,u,4),Xt(n,function(n,e,u){r=o?(o=!1,n):t(r,n,e,u)}),r}function ur(n,t,r){return t=e.createCallback(t,r,3),Gt(n,function(n,r,e){return!t(n,r,e)})}function or(n,t,r){if(n&&"number"!=typeof n.length&&(n=Kt(n)),null==t||r)return n?n[et(0,n.length-1)]:h;var e=ar(n);return e.length=Me(Ue(0,t),e.length),e}function ar(n){var t=-1,r=n?n.length:0,e=ve("number"==typeof r?r:0);return Qt(n,function(n){var r=et(0,++t);e[t]=e[r],e[r]=n}),e}function ir(n){var t=n?n.length:0;return"number"==typeof t?t:Ze(n).length}function fr(n,t,r){var u;t=e.createCallback(t,r,3);var o=-1,a=n?n.length:0;if("number"==typeof a)for(;++o<a&&!(u=t(n[o],o,n)););else iu(n,function(n,r,e){return!(u=t(n,r,e))});return!!u}function lr(n,t,r){var u=-1,a=Xe(t),i=n?n.length:0,s=ve("number"==typeof i?i:0);for(a||(t=e.createCallback(t,r,3)),Qt(n,function(n,r,e){var o=s[++u]=l();a?o.criteria=Zt(t,function(t){return n[t]}):(o.criteria=f())[0]=t(n,r,e),o.index=u,o.value=n}),i=s.length,s.sort(o);i--;){var v=s[i];s[i]=v.value,a||c(v.criteria),p(v)}return s}function cr(n){return n&&"number"==typeof n.length?s(n):Kt(n)}function pr(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e}function sr(n){return Y(n,Z(arguments,!0,!0,1))}function vr(n,t,r){var u=-1,o=n?n.length:0;for(t=e.createCallback(t,r,3);++u<o;)if(t(n[u],u,n))return u;return-1}function hr(n,t,r){var u=n?n.length:0;for(t=e.createCallback(t,r,3);u--;)if(t(n[u],u,n))return u;return-1}function gr(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=-1;for(t=e.createCallback(t,r,3);++a<o&&t(n[a],a,n);)u++}else if(u=t,null==u||r)return n?n[0]:h;return s(n,0,Me(Ue(0,u),o))}function yr(n,t,r,e){return"boolean"!=typeof t&&null!=t&&(e=r,r="function"!=typeof t&&e&&e[t]===n?null:t,t=!1),null!=r&&(n=Zt(n,r,e)),Z(n,t)}function mr(n,r,e){if("number"==typeof e){var u=n?n.length:0;e=0>e?Ue(0,u+e):e||0}else if(e){var o=Or(n,r);return n[o]===r?o:-1}return t(n,r,e)}function dr(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=o;for(t=e.createCallback(t,r,3);a--&&t(n[a],a,n);)u++}else u=null==t||r?1:t||u;return s(n,0,Me(Ue(0,o-u),o))}function br(){for(var n=[],e=-1,u=arguments.length,o=f(),i=ft(),l=i===t,s=f();++e<u;){var v=arguments[e];(Xe(v)||st(v))&&(n.push(v),o.push(l&&v.length>=b&&a(e?n[e]:s)))}var h=n[0],g=-1,y=h?h.length:0,m=[];n:for(;++g<y;){var d=o[0];if(v=h[g],(d?r(d,v):i(s,v))<0){for(e=u,(d||s).push(v);--e;)if(d=o[e],(d?r(d,v):i(n[e],v))<0)continue n;m.push(v)}}for(;u--;)d=o[u],d&&p(d);return c(o),c(s),m}function _r(n,t,r){var u=0,o=n?n.length:0;if("number"!=typeof t&&null!=t){var a=o;for(t=e.createCallback(t,r,3);a--&&t(n[a],a,n);)u++}else if(u=t,null==u||r)return n?n[o-1]:h;return s(n,Ue(0,o-u))}function wr(n,t,r){var e=n?n.length:0;for("number"==typeof r&&(e=(0>r?Ue(0,e+r):Me(r,e-1))+1);e--;)if(n[e]===t)return e;return-1}function jr(n){for(var t=arguments,r=0,e=t.length,u=n?n.length:0;++r<e;)for(var o=-1,a=t[r];++o<u;)n[o]===a&&(Fe.call(n,o--,1),u--);return n}function kr(n,t,r){n=+n||0,r="number"==typeof r?r:+r||1,null==t&&(t=n,n=0);for(var e=-1,u=Ue(0,Re((t-n)/(r||1))),o=ve(u);++e<u;)o[e]=n,n+=r;return o}function xr(n,t,r){var u=-1,o=n?n.length:0,a=[];for(t=e.createCallback(t,r,3);++u<o;){var i=n[u];t(i,u,n)&&(a.push(i),Fe.call(n,u--,1),o--)}return a}function Cr(n,t,r){if("number"!=typeof t&&null!=t){var u=0,o=-1,a=n?n.length:0;for(t=e.createCallback(t,r,3);++o<a&&t(n[o],o,n);)u++}else u=null==t||r?1:Ue(0,t);return s(n,u)}function Or(n,t,r,u){var o=0,a=n?n.length:o;for(r=r?e.createCallback(r,u,1):Xr,t=r(t);a>o;){var i=o+a>>>1;r(n[i])<t?o=i+1:a=i}return o}function Nr(){return ut(Z(arguments,!0,!0))}function Rr(n,t,r,u){return"boolean"!=typeof t&&null!=t&&(u=r,r="function"!=typeof t&&u&&u[t]===n?null:t,t=!1),null!=r&&(r=e.createCallback(r,u,3)),ut(n,t,r)}function Er(n){return Y(n,s(arguments,1))}function Ir(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Xe(r)||st(r))var e=e?ut(Y(e,r).concat(Y(r,e))):r}return e||[]}function Sr(){for(var n=arguments.length>1?arguments:arguments[0],t=-1,r=n?nr(su(n,"length")):0,e=ve(0>r?0:r);++t<r;)e[t]=su(n,t);return e}function Ar(n,t){var r=-1,e=n?n.length:0,u={};for(t||!e||Xe(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Dr(n,t){if(!Et(t))throw new je;return function(){return--n<1?t.apply(this,arguments):void 0}}function Tr(n,t){return arguments.length>2?at(n,17,s(arguments,2),null,t):at(n,1,null,null,t)}function $r(n){for(var t=arguments.length>1?Z(arguments,!0,!1,1):_t(n),r=-1,e=t.length;++r<e;){var u=t[r];n[u]=at(n[u],1,null,null,n)}return n}function Fr(n,t){return arguments.length>2?at(t,19,s(arguments,2),null,n):at(t,3,null,null,n)}function Br(){for(var n=arguments,t=n.length;t--;)if(!Et(n[t]))throw new je;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}}function Wr(n,t){return t="number"==typeof t?t:+t||n.length,at(n,4,null,null,null,t)}function qr(n,t,r){var e,u,o,a,i,f,l,c=0,p=!1,s=!0;if(!Et(n))throw new je;if(t=Ue(0,t)||0,r===!0){var v=!0;s=!1}else It(r)&&(v=r.leading,p="maxWait"in r&&(Ue(t,r.maxWait)||0),s="trailing"in r?r.trailing:s);var g=function(){var r=t-(hu()-a);if(0>=r){u&&Ee(u);var p=l;u=f=l=h,p&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))}else f=$e(g,r)},y=function(){f&&Ee(f),u=f=l=h,(s||p!==t)&&(c=hu(),o=n.apply(i,e),f||u||(e=i=null))};return function(){if(e=arguments,a=hu(),i=this,l=s&&(f||!v),p===!1)var r=v&&!f;else{u||v||(c=a);var h=p-(a-c),m=0>=h;m?(u&&(u=Ee(u)),c=a,o=n.apply(i,e)):u||(u=$e(y,h))}return m&&f?f=Ee(f):f||t===p||(f=$e(g,t)),r&&(m=!0,o=n.apply(i,e)),!m||f||u||(e=i=null),o}}function zr(n){if(!Et(n))throw new je;var t=s(arguments,1);return $e(function(){n.apply(h,t)},1)}function Lr(n,t){if(!Et(n))throw new je;var r=s(arguments,2);return $e(function(){n.apply(h,r)},t)}function Pr(n,t){if(!Et(n))throw new je;var r=function(){var e=r.cache,u=t?t.apply(this,arguments):d+arguments[0];return De.call(e,u)?e[u]:e[u]=n.apply(this,arguments)};return r.cache={},r}function Kr(n){var t,r;if(!Et(n))throw new je;return function(){return t?r:(t=!0,r=n.apply(this,arguments),n=null,r)}}function Ur(n){return at(n,16,s(arguments,1))}function Mr(n){return at(n,32,null,s(arguments,1))}function Vr(n,t,r){var e=!0,u=!0;if(!Et(n))throw new je;return r===!1?e=!1:It(r)&&(e="leading"in r?r.leading:e,u="trailing"in r?r.trailing:u),M.leading=e,M.maxWait=t,M.trailing=u,qr(n,t,M)}function Gr(n,t){return at(t,16,[n])}function Hr(n){return function(){return n}}function Jr(n,t,r){var e=typeof n;if(null==n||"function"==e)return Q(n,t,r);if("object"!=e)return te(n);var u=Ze(n),o=u[0],a=n[o];return 1!=u.length||a!==a||It(a)?function(t){for(var r=u.length,e=!1;r--&&(e=tt(t[u[r]],n[u[r]],null,!0)););return e}:function(n){var t=n[o];return a===t&&(0!==a||1/a==1/t)}}function Qr(n){return null==n?"":we(n).replace(eu,it)}function Xr(n){return n}function Yr(n,t,r){var u=!0,o=t&&_t(t);t&&(r||o.length)||(null==r&&(r=t),a=g,t=n,n=e,o=_t(t)),r===!1?u=!1:It(r)&&"chain"in r&&(u=r.chain);var a=n,i=Et(a);Qt(o,function(r){var e=n[r]=t[r];i&&(a.prototype[r]=function(){var t=this.__chain__,r=this.__wrapped__,o=[r];Te.apply(o,arguments);var i=e.apply(n,o);if(u||t){if(r===i&&It(i))return this;i=new a(i),i.__chain__=t}return i})})}function Zr(){return n._=Ce,this}function ne(){}function te(n){return function(t){return t[n]}}function re(n,t,r){var e=null==n,u=null==t;if(null==r&&("boolean"==typeof n&&u?(r=n,n=1):u||"boolean"!=typeof t||(r=t,u=!0)),e&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var o=Ge();return Me(n+o*(t-n+parseFloat("1e-"+((o+"").length-1))),t)}return et(n,t)}function ee(n,t){if(n){var r=n[t];return Et(r)?n[t]():r}}function ue(n,t,r){var u=e.templateSettings;n=we(n||""),r=ou({},r,u);var o,a=ou({},r.imports,u.imports),f=Ze(a),l=Kt(a),c=0,p=r.interpolate||I,s="__p += '",v=_e((r.escape||I).source+"|"+p.source+"|"+(p===R?C:I).source+"|"+(r.evaluate||I).source+"|$","g");n.replace(v,function(t,r,e,u,a,f){return e||(e=u),s+=n.slice(c,f).replace(A,i),r&&(s+="' +\n__e("+r+") +\n'"),a&&(o=!0,s+="';\n"+a+";\n__p += '"),e&&(s+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),c=f+t.length,t}),s+="';\n";var g=r.variable,y=g;y||(g="obj",s="with ("+g+") {\n"+s+"\n}\n"),s=(o?s.replace(j,""):s).replace(k,"$1").replace(x,"$1;"),s="function("+g+") {\n"+(y?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+s+"return __p\n}";var m="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+T++ +"]")+"\n*/";try{var d=ye(f,"return "+s+m).apply(h,l)}catch(b){throw b.source=s,b}return t?d(t):(d.source=s,d)}function oe(n,t,r){n=(n=+n)>-1?n:0;var e=-1,u=ve(n);for(t=Q(t,r,1);++e<n;)u[e]=t(e);return u}function ae(n){return null==n?"":we(n).replace(ru,pt)}function ie(n){var t=++m;return we(null==n?"":n)+t}function fe(n){return n=new g(n),n.__chain__=!0,n}function le(n,t){return t(n),n}function ce(){return this.__chain__=!0,this}function pe(){return we(this.__wrapped__)}function se(){return this.__wrapped__}n=n?nt.defaults(J.Object(),n,nt.pick(J,D)):J;var ve=n.Array,he=n.Boolean,ge=n.Date,ye=n.Function,me=n.Math,de=n.Number,be=n.Object,_e=n.RegExp,we=n.String,je=n.TypeError,ke=[],xe=be.prototype,Ce=n._,Oe=xe.toString,Ne=_e("^"+we(Oe).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Re=me.ceil,Ee=n.clearTimeout,Ie=me.floor,Se=ye.prototype.toString,Ae=lt(Ae=be.getPrototypeOf)&&Ae,De=xe.hasOwnProperty,Te=ke.push,$e=n.setTimeout,Fe=ke.splice,Be=ke.unshift,We=function(){try{var n={},t=lt(t=be.defineProperty)&&t,r=t(n,n,n)&&t}catch(e){}return r}(),qe=lt(qe=be.create)&&qe,ze=lt(ze=ve.isArray)&&ze,Le=n.isFinite,Pe=n.isNaN,Ke=lt(Ke=be.keys)&&Ke,Ue=me.max,Me=me.min,Ve=n.parseInt,Ge=me.random,He={};He[F]=ve,He[B]=he,He[W]=ge,He[q]=ye,He[L]=be,He[z]=de,He[P]=_e,He[K]=we,g.prototype=e.prototype;var Je=e.support={};Je.funcDecomp=!lt(n.WinRTError)&&S.test(v),Je.funcNames="string"==typeof ye.name,e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:R,variable:"",imports:{_:e}},qe||(H=function(){function t(){}return function(r){if(It(r)){t.prototype=r;var e=new t;t.prototype=null}return e||n.Object()}}());var Qe=We?function(n,t){V.value=t,We(n,"__bindData__",V)}:ne,Xe=ze||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&Oe.call(n)==F||!1},Ye=function(n){var t,r=n,e=[];if(!r)return e;if(!G[typeof n])return e;for(t in r)De.call(r,t)&&e.push(t);return e},Ze=Ke?function(n){return It(n)?Ke(n):[]}:Ye,nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tu=jt(nu),ru=_e("("+Ze(tu).join("|")+")","g"),eu=_e("["+Ze(nu).join("")+"]","g"),uu=function(n,t,r){var e,u=n,o=u;if(!u)return o;var a=arguments,i=0,f="number"==typeof r?2:a.length;if(f>3&&"function"==typeof a[f-2])var l=Q(a[--f-1],a[f--],2);else f>2&&"function"==typeof a[f-1]&&(l=a[--f]);for(;++i<f;)if(u=a[i],u&&G[typeof u])for(var c=-1,p=G[typeof u]&&Ze(u),s=p?p.length:0;++c<s;)e=p[c],o[e]=l?l(o[e],u[e]):u[e];return o},ou=function(n,t,r){var e,u=n,o=u;if(!u)return o;for(var a=arguments,i=0,f="number"==typeof r?2:a.length;++i<f;)if(u=a[i],u&&G[typeof u])for(var l=-1,c=G[typeof u]&&Ze(u),p=c?c.length:0;++l<p;)e=c[l],"undefined"==typeof o[e]&&(o[e]=u[e]);return o},au=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!G[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(e in u)if(t(u[e],e,n)===!1)return o;return o},iu=function(n,t,r){var e,u=n,o=u;if(!u)return o;if(!G[typeof u])return o;t=t&&"undefined"==typeof r?t:Q(t,r,3);for(var a=-1,i=G[typeof u]&&Ze(u),f=i?i.length:0;++a<f;)if(e=i[a],t(u[e],e,n)===!1)return o;return o},fu=Ae?function(n){if(!n||Oe.call(n)!=L)return!1;var t=n.valueOf,r=lt(t)&&(r=Ae(t))&&Ae(r);return r?n==r||Ae(n)==r:ct(n)}:ct,lu=ot(function(n,t,r){De.call(n,r)?n[r]++:n[r]=1}),cu=ot(function(n,t,r){(De.call(n,r)?n[r]:n[r]=[]).push(t)}),pu=ot(function(n,t,r){n[r]=t}),su=Zt,vu=Gt,hu=lt(hu=ge.now)&&hu||function(){return(new ge).getTime()},gu=8==Ve(w+"08")?Ve:function(n,t){return Ve($t(n)?n.replace(E,""):n,t||0)};return e.after=Dr,e.assign=uu,e.at=Ut,e.bind=Tr,e.bindAll=$r,e.bindKey=Fr,e.chain=fe,e.compact=pr,e.compose=Br,e.constant=Hr,e.countBy=lu,e.create=gt,e.createCallback=Jr,e.curry=Wr,e.debounce=qr,e.defaults=ou,e.defer=zr,e.delay=Lr,e.difference=sr,e.filter=Gt,e.flatten=yr,e.forEach=Qt,e.forEachRight=Xt,e.forIn=au,e.forInRight=dt,e.forOwn=iu,e.forOwnRight=bt,e.functions=_t,e.groupBy=cu,e.indexBy=pu,e.initial=dr,e.intersection=br,e.invert=jt,e.invoke=Yt,e.keys=Ze,e.map=Zt,e.mapValues=Bt,e.max=nr,e.memoize=Pr,e.merge=Wt,e.min=tr,e.omit=qt,e.once=Kr,e.pairs=zt,e.partial=Ur,e.partialRight=Mr,e.pick=Lt,e.pluck=su,e.property=te,e.pull=jr,e.range=kr,e.reject=ur,e.remove=xr,e.rest=Cr,e.shuffle=ar,e.sortBy=lr,e.tap=le,e.throttle=Vr,e.times=oe,e.toArray=cr,e.transform=Pt,e.union=Nr,e.uniq=Rr,e.values=Kt,e.where=vu,e.without=Er,e.wrap=Gr,e.xor=Ir,e.zip=Sr,e.zipObject=Ar,e.collect=Zt,e.drop=Cr,e.each=Qt,e.eachRight=Xt,e.extend=uu,e.methods=_t,e.object=Ar,e.select=Gt,e.tail=Cr,e.unique=Rr,e.unzip=Sr,Yr(e),e.clone=vt,e.cloneDeep=ht,e.contains=Mt,e.escape=Qr,e.every=Vt,e.find=Ht,e.findIndex=vr,e.findKey=yt,e.findLast=Jt,e.findLastIndex=hr,e.findLastKey=mt,e.has=wt,e.identity=Xr,e.indexOf=mr,e.isArguments=st,e.isArray=Xe,e.isBoolean=kt,e.isDate=xt,e.isElement=Ct,e.isEmpty=Ot,e.isEqual=Nt,e.isFinite=Rt,e.isFunction=Et,e.isNaN=St,e.isNull=At,e.isNumber=Dt,e.isObject=It,e.isPlainObject=fu,e.isRegExp=Tt,e.isString=$t,e.isUndefined=Ft,e.lastIndexOf=wr,e.mixin=Yr,e.noConflict=Zr,e.noop=ne,e.now=hu,e.parseInt=gu,e.random=re,e.reduce=rr,e.reduceRight=er,e.result=ee,e.runInContext=v,e.size=ir,e.some=fr,e.sortedIndex=Or,e.template=ue,e.unescape=ae,e.uniqueId=ie,e.all=Vt,e.any=fr,e.detect=Ht,e.findWhere=Ht,e.foldl=rr,e.foldr=er,e.include=Mt,e.inject=rr,Yr(function(){var n={};return iu(e,function(t,r){e.prototype[r]||(n[r]=t)}),n}(),!1),e.first=gr,e.last=_r,e.sample=or,e.take=gr,e.head=gr,iu(e,function(n,t){var r="sample"!==t;e.prototype[t]||(e.prototype[t]=function(t,e){var u=this.__chain__,o=n(this.__wrapped__,t,e);return u||null!=t&&(!e||r&&"function"==typeof t)?new g(o,u):o})}),e.VERSION="2.4.1",e.prototype.chain=ce,e.prototype.toString=pe,e.prototype.value=se,e.prototype.valueOf=se,Qt(["join","pop","shift"],function(n){var t=ke[n];e.prototype[n]=function(){var n=this.__chain__,r=t.apply(this.__wrapped__,arguments);return n?new g(r,n):r}}),Qt(["push","reverse","sort","unshift"],function(n){var t=ke[n];e.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Qt(["concat","slice","splice"],function(n){var t=ke[n];e.prototype[n]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),e}var h,g=[],y=[],m=0,d=+new Date+"",b=75,_=40,w=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",j=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,x=/(__e\(.*?\)|\b__t\)) \+\n'';/g,C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,O=/\w*$/,N=/^\s*function[ \n\r\t]+\w/,R=/<%=([\s\S]+?)%>/g,E=RegExp("^["+w+"]*0+(?=.$)"),I=/($^)/,S=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,D=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],T=0,$="[object Arguments]",F="[object Array]",B="[object Boolean]",W="[object Date]",q="[object Function]",z="[object Number]",L="[object Object]",P="[object RegExp]",K="[object String]",U={};U[q]=!1,U[$]=U[F]=U[B]=U[W]=U[z]=U[L]=U[P]=U[K]=!0;var M={leading:!1,maxWait:0,trailing:!1},V={configurable:!1,enumerable:!1,value:null,writable:!1},G={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},H={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},J=G[typeof window]&&window||this,Q=G[typeof exports]&&exports&&!exports.nodeType&&exports,X=G[typeof module]&&module&&!module.nodeType&&module,Y=X&&X.exports===Q&&Q,Z=G[typeof n]&&n;!Z||Z.global!==Z&&Z.window!==Z||(J=Z);var nt=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(J._=nt,define(function(){return nt})):Q&&X?Y?(X.exports=nt)._=nt:Q._=nt:J._=nt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}]},{},[2])(2)
});


//# sourceMappingURL=megatron.map.json